(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4470:function(h){"use strict";var g=Object.prototype.hasOwnProperty,E=Object.prototype.toString,_=Object.defineProperty,A=Object.getOwnPropertyDescriptor,isArray=function(h){return"function"==typeof Array.isArray?Array.isArray(h):"[object Array]"===E.call(h)},isPlainObject=function(h){if(!h||"[object Object]"!==E.call(h))return!1;var _,A=g.call(h,"constructor"),b=h.constructor&&h.constructor.prototype&&g.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!A&&!b)return!1;for(_ in h);return void 0===_||g.call(h,_)},setProperty=function(h,g){_&&"__proto__"===g.name?_(h,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):h[g.name]=g.newValue},getProperty=function(h,E){if("__proto__"===E){if(!g.call(h,E))return;if(A)return A(h,E).value}return h[E]};h.exports=function extend(){var h,g,E,_,A,b,C=arguments[0],k=1,S=arguments.length,N=!1;for("boolean"==typeof C&&(N=C,C=arguments[1]||{},k=2),(null==C||"object"!=typeof C&&"function"!=typeof C)&&(C={});k<S;++k)if(h=arguments[k],null!=h)for(g in h)E=getProperty(C,g),C!==(_=getProperty(h,g))&&(N&&_&&(isPlainObject(_)||(A=isArray(_)))?(A?(A=!1,b=E&&isArray(E)?E:[]):b=E&&isPlainObject(E)?E:{},setProperty(C,{name:g,newValue:extend(N,b,_)})):void 0!==_&&setProperty(C,{name:g,newValue:_}));return C}},9821:function(h,g,E){"use strict";let _=E(4579).parse,A=E(7799).compile,b=E(7094).segment,C=E(1105);h.exports={parse:_,compile:A,segment:b,hls:C}},7799:function(h){"use strict";function CompilerError(h,g){this.message=h,this.error=g}function convertTimestamp(h){let g=pad(Math.floor(h/60/60),2),E=pad(Math.floor(h/60)%60,2),_=pad(Math.floor(h%60),2),A=pad(Math.floor(1e3*(h%1).toFixed(4)),3);return`${g}:${E}:${_}.${A}`}function pad(h,g){let E=`${h}`;for(;E.length<g;)E=`0${E}`;return E}CompilerError.prototype=Object.create(Error.prototype),h.exports={CompilerError,compile:function(h){if(!h)throw new CompilerError("Input must be non-null");if("object"!=typeof h)throw new CompilerError("Input must be an object");if(Array.isArray(h))throw new CompilerError("Input cannot be array");if(!h.valid)throw new CompilerError("Input must be valid");let g="WEBVTT\n";if(h.meta){if("object"!=typeof h.meta||Array.isArray(h.meta))throw new CompilerError("Metadata must be an object");Object.entries(h.meta).forEach(h=>{if("string"!=typeof h[1])throw new CompilerError(`Metadata value for "${h[0]}" must be string`);g+=`${h[0]}: ${h[1]}
`})}let E=null;return h.cues.forEach((h,_)=>{if(E&&E>h.start)throw new CompilerError(`Cue number ${_} is not in chronological order`);E=h.start,g+="\n"+function(h){if("object"!=typeof h)throw new CompilerError("Cue malformed: not of type object");if("string"!=typeof h.identifier&&"number"!=typeof h.identifier&&null!==h.identifier)throw new CompilerError(`Cue malformed: identifier value is not a string.
    ${JSON.stringify(h)}`);if(isNaN(h.start))throw new CompilerError(`Cue malformed: null start value.
    ${JSON.stringify(h)}`);if(isNaN(h.end))throw new CompilerError(`Cue malformed: null end value.
    ${JSON.stringify(h)}`);if(h.start>=h.end)throw new CompilerError(`Cue malformed: start timestamp greater than end
    ${JSON.stringify(h)}`);if("string"!=typeof h.text)throw new CompilerError(`Cue malformed: null text value.
    ${JSON.stringify(h)}`);if("string"!=typeof h.styles)throw new CompilerError(`Cue malformed: null styles value.
    ${JSON.stringify(h)}`);let g="";h.identifier.length>0&&(g+=`${h.identifier}
`);let E=convertTimestamp(h.start),_=convertTimestamp(h.end);return g+(`${E} --> ${_}`+(h.styles?` ${h.styles}`:""))+`
${h.text}`}(h)+"\n"}),g}}},1105:function(h,g,E){"use strict";let _=E(7094).segment;function pad(h,g){let E="0".repeat(Math.max(0,g-h.toString().length));return`${E}${h}`}function printableTimestamp(h){let g=(h%1).toFixed(3);h=Math.round(h-g);let E=Math.floor(h/3600),_=Math.floor((h-3600*E)/60),A=h-3600*E-60*_,b=`${pad(E,2)}:`;return`${b}${pad(_,2)}:${pad(A,2)}.${pad(1e3*g,3)}`}h.exports={hlsSegment:function(h,g,E){void 0===E&&(E="900000");let A=_(h,g),b=[];return A.forEach((h,g)=>{let _=`WEBVTT
X-TIMESTAMP-MAP=MPEGTS:${E},LOCAL:00:00:00.000

${function(h){let g=[];return h.forEach(h=>{g.push(function(h){let g=[];h.identifier&&g.push(h.identifier);let E=printableTimestamp(h.start),_=printableTimestamp(h.end),A=h.styles?`${h.styles}`:"";return g.push(`${E} --> ${_} ${A}`),g.push(h.text),g.join("\n")}(h))}),g.join("\n\n")}(h.cues)}
`,A=`${g}.vtt`;b.push({filename:A,content:_})}),b},hlsSegmentPlaylist:function(h,g){let E;let A=_(h,g),b=function(h){let g=[];return h.forEach((h,E)=>{g.push(`#EXTINF:${h.duration.toFixed(5)},
${E}.vtt`)}),g.join("\n")}(A),C=Math.round((E=0,A.forEach(h=>{h.duration>E&&(E=h.duration)}),E)),k=`#EXTM3U
#EXT-X-TARGETDURATION:${C}
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-PLAYLIST-TYPE:VOD
${b}
#EXT-X-ENDLIST
`;return k}}},4579:function(h){"use strict";function ParserError(h,g){this.message=h,this.error=g}ParserError.prototype=Object.create(Error.prototype);let g=/([0-9]+)?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function parseTimestamp(h){let E=h.match(g);return 3600*parseFloat(E[1]||0)+(60*parseFloat(E[2])+parseFloat(E[3]))}h.exports={ParserError,parse:function(h,E){E||(E={});let{meta:_=!1,strict:A=!0}=E;if("string"!=typeof h)throw new ParserError("Input must be a string");h=(h=(h=h.trim()).replace(/\r\n/g,"\n")).replace(/\r/g,"\n");let b=h.split("\n\n"),C=b.shift();if(!C.startsWith("WEBVTT"))throw new ParserError('Must start with "WEBVTT"');let k=C.split("\n"),S=k[0].replace("WEBVTT","");if(S.length>0&&" "!==S[0]&&"	"!==S[0])throw new ParserError("Header comment must start with space or tab");if(0===b.length&&1===k.length)return{valid:!0,strict:A,cues:[],errors:[]};if(!_&&k.length>1&&""!==k[1])throw new ParserError("Missing blank line after signature");let{cues:N,errors:w}=function(h,E){let _=[],A=h.map((h,A)=>{try{return function(h,E,_){var A,b;let C="",k=0,S=.01,N="",w="",R=h.split("\n").filter(Boolean);if(R.length>0&&R[0].trim().startsWith("NOTE"))return null;if(1===R.length&&!R[0].includes("-->"))throw new ParserError(`Cue identifier cannot be standalone (cue #${E})`);if(R.length>1&&!(R[0].includes("-->")||R[1].includes("-->"))){let h=`Cue identifier needs to be followed by timestamp (cue #${E})`;throw new ParserError(h)}R.length>1&&R[1].includes("-->")&&(C=R.shift());let L="string"==typeof R[0]&&R[0].split(" --> ");if(2!==L.length||(A=L[0],!g.test(A))||(b=L[1],!g.test(b)))throw new ParserError(`Invalid cue timestamp (cue #${E})`);if(k=parseTimestamp(L[0]),S=parseTimestamp(L[1]),_){if(k>S)throw new ParserError(`Start timestamp greater than end (cue #${E})`);if(S<=k)throw new ParserError(`End must be greater than start (cue #${E})`)}if(!_&&S<k)throw new ParserError(`End must be greater or equal to start when not strict (cue #${E})`);return w=L[1].replace(g,"").trim(),R.shift(),!!(N=R.join("\n"))&&{identifier:C,start:k,end:S,text:N,styles:w}}(h,A,E)}catch(h){return _.push(h),null}}).filter(Boolean);return{cues:A,errors:_}}(b,A);if(A&&w.length>0)throw w[0];let R=_?function(h){let g={};return h.slice(1).forEach(h=>{let E=h.indexOf(":"),_=h.slice(0,E).trim(),A=h.slice(E+1).trim();g[_]=A}),Object.keys(g).length>0?g:null}(k):null,L={valid:0===w.length,strict:A,cues:N,errors:w};return _&&(L.meta=R),L}}},7094:function(h,g,E){"use strict";let _=E(4579).parse;h.exports={segment:function(h,g){g=g||10;let E=_(h),A=[],b=[],C=null,k=0,S=0;return E.cues.forEach((h,_)=>{let N=0===_,w=_===E.cues.length-1,R=h.start,L=h.end,P=w?1/0:E.cues[_+1].start,z=N?L:L-R,G=N?0:R-E.cues[_-1].end;k=k+z+G,A.length,C&&(b.push(C),k+=C.end-S,C=null),b.push(h);let $=P-L<g&&G<g&&k>g;if(function(h,g,E,_){return(_<=g||_+(g-_%g)+h<E)&&E-h>=g}(S,g,P,G)){var j,W,Q,Z;let h;let E=(j=g,W=k,Q=S,h=j,W>j&&(h=(Z=W-j)+(j-Z%j)),h=w?parseFloat((L-Q).toFixed(2)):Math.round(h));A.push({duration:E,cues:b}),S+=E,k=0,b=[]}else $=!1;$&&(C=h)}),A}}},4887:function(h,g){!function(h){"use strict";function t(h){return null==h}function r(h){throw Error("Argument "+h+" is empty.")}function e(h){return"function"==typeof h&&"getType"in h}function i(h){throw Error("Argument "+h+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function o(h,g){if(null==h)throw Error("Argument contains array with empty element at index "+g);if(null==h.getType)throw Error("Argument contains array with invalid element at index "+g+', it should be an action-creator instance from "typesafe-actions"')}function u(h){return"string"==typeof h||"symbol"==typeof h}function c(h){throw Error("Argument "+h+" is invalid, it should be an action type of type: string | symbol")}function f(h,g){if(null==h)throw Error("Argument contains array with empty element at index "+g);if("string"!=typeof h&&"symbol"!=typeof h)throw Error("Argument contains array with invalid element at index "+g+", it should be of type: string | symbol")}function s(h,g,E,_){return t(h)&&r(1),u(h)||i(1),{type:h,payload:g,meta:E,error:_}}function y(h,g){return t(h)&&r(1),u(h)||c(1),Object.assign(function(){var E=null!=g?g.apply(void 0,arguments):void 0;return Object.assign({type:h},E)},{getType:function(){return h},toString:function(){return h}})}function l(h,g,E){return t(h)&&r(1),u(h)||c(1),function(){return y(h,function(){var h=arguments.length<=0?void 0:arguments[0],_=arguments.length<=1?void 0:arguments[1];return null==g&&null==E||(h=null!=g?g.apply(void 0,arguments):void 0,_=null!=E?E.apply(void 0,arguments):void 0),Object.assign({},void 0!==h&&{payload:h},{},void 0!==_&&{meta:_})})}}function p(h){return t(h)&&r(1),e(h)||i(1),h.getType()}function d(h,g){return t(h)&&r(1),u(h)||c(1),Object.assign(null!=g?g(h):function(){return{type:h}},{getType:function(){return h},toString:function(){return h}})}h.action=s,h.createAction=l,h.createAsyncAction=function(h,g,E,_){return function(){var A=[h,g,E,_].map(function(h,g){return Array.isArray(h)?l(h[0],h[1],h[2])():"string"==typeof h||"symbol"==typeof h?l(h)():void(g<3&&function(h){throw Error("Argument "+h+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(g))});return{request:A[0],success:A[1],failure:A[2],cancel:A[3]}}},h.createCustomAction=y,h.createReducer=function n(h,g){void 0===g&&(g={});var E=Object.assign({},g),o=function(g,_){var A=Array.isArray(g)?g:[g],b={};return A.map(function(h,g){return e(h)?p(h):u(h)?h:function(h){throw Error("Argument "+h+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(g+1)}).forEach(function(h){return b[h]=_}),n(h,Object.assign({},E,{},b))};return Object.assign(function(g,_){if(void 0===g&&(g=h),E.hasOwnProperty(_.type)){var A=E[_.type];if("function"!=typeof A)throw Error('Reducer under "'+_.type+'" key is not a valid reducer');return A(g,_)}return g},{handlers:Object.assign({},E),handleAction:o,handleType:o})},h.deprecated={createAction:function(h,g){return Object.assign(null==g?function(){return s(h)}:g(s.bind(null,h)),{getType:function(){return h},toString:function(){return h}})},createCustomAction:d,createStandardAction:function(h){return t(h)&&r(1),u(h)||c(1),Object.assign(function(){return d(h,function(h){return function(g,E){return{type:h,payload:g,meta:E}}})},{map:function(g){return d(h,function(h){return function(E,_){return Object.assign(g(E,_),{type:h})}})}})}},h.getType=p,h.isActionOf=function(h,g){t(h)&&r(1);var E=Array.isArray(h)?h:[h];E.forEach(o);var u=function(h){return E.some(function(g){return h.type===g.getType()})};return void 0===g?u:u(g)},h.isOfType=function(h,g){t(h)&&r(1);var E=Array.isArray(h)?h:[h];E.forEach(f);var o=function(h){return E.includes(h.type)};return void 0===g?o:o(g)}}(g)},5029:function(h,g,E){"use strict";let _,A;E.r(g),E.d(g,{Image:function(){return le},Primitives:function(){return eK.default},Scroll:function(){return Ft},Slider:function(){return ol.default},Viewer:function(){return ba},default:function(){return lP}});var b,C,k,S,N,w,R,L,P,z,G,$,j,W,Q,Z,et,er,ei,es,el,ec,eu,ed,ep,eh,ef,em,eg,eE,eT,e_,eA,ey,ev,eb,ex,eC,eI={};E.r(eI),E.d(eI,{boolean:function(){return ny},booleanish:function(){return nv},commaOrSpaceSeparated:function(){return nk},commaSeparated:function(){return nI},number:function(){return nx},overloadedBoolean:function(){return nb},spaceSeparated:function(){return nC}});var ek={};E.r(ek),E.d(ek,{attentionMarkers:function(){return ai},contentInitial:function(){return i9},disable:function(){return aa},document:function(){return i8},flow:function(){return ae},flowInitial:function(){return i7},insideSpan:function(){return ar},string:function(){return at},text:function(){return an}});var eS=E(9203),eN=E(4511),ew=E(6744),eO=E(7294);let eR="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var eD={randomUUID:eR};let eL=new Uint8Array(16),eP=[];for(let h=0;h<256;++h)eP.push((h+256).toString(16).slice(1));var esm_browser_v4=function(h,g,E){if(eD.randomUUID&&!g&&!h)return eD.randomUUID();h=h||{};let A=h.random||(h.rng||function(){if(!_&&!(_="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(eL)})();if(A[6]=15&A[6]|64,A[8]=63&A[8]|128,g){E=E||0;for(let h=0;h<16;++h)g[E+h]=A[h];return g}return function(h,g=0){return eP[h[g+0]]+eP[h[g+1]]+eP[h[g+2]]+eP[h[g+3]]+"-"+eP[h[g+4]]+eP[h[g+5]]+"-"+eP[h[g+6]]+eP[h[g+7]]+"-"+eP[h[g+8]]+eP[h[g+9]]+"-"+eP[h[g+10]]+eP[h[g+11]]+eP[h[g+12]]+eP[h[g+13]]+eP[h[g+14]]+eP[h[g+15]]}(A)};let eM=window.OpenSeadragon;if(!eM&&!(eM=eS))throw Error("OpenSeadragon is missing.");let eF="http://www.w3.org/2000/svg";eM.Viewer&&(eM.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new y(this)),this._svgOverlayInfo});let y=function(h){let g=this;this._viewer=h,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(eF,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(eF,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){g.resize()}),this._viewer.addHandler("open",function(){g.resize()}),this._viewer.addHandler("rotate",function(){g.resize()}),this._viewer.addHandler("flip",function(){g.resize()}),this._viewer.addHandler("resize",function(){g.resize()}),this.resize()};y.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let h=this._viewer.viewport.pixelFromPoint(new eM.Point(0,0),!0),g=this._viewer.viewport.getZoom(!0),E=this._viewer.viewport.getRotation(),_=this._viewer.viewport.getFlip(),A=this._viewer.viewport._containerInnerSize.x,b=A*g,C=b;_&&(b=-b,h.x=-h.x+A),this._node.setAttribute("transform","translate("+h.x+","+h.y+") scale("+b+","+C+") rotate("+E+")")},onClick:function(h,g){new eM.MouseTracker({element:h,clickHandler:g}).setTracking(!0)}};let M=h=>fetch(`${h.replace(/\/$/,"")}/info.json`).then(h=>h.json()).then(h=>h).catch(g=>{console.error(`The IIIF tilesource ${h.replace(/\/$/,"")}/info.json failed to load: ${g}`)}),B=h=>{let g,E;return Array.isArray(h)&&(g=h[0])&&(E="@id"in g?g["@id"]:g.id),E};var eB=((b=eB||{}).TiledImage="tiledImage",b.SimpleImage="simpleImage",b);let O=h=>{let g=Array.isArray(null==h?void 0:h.service)&&(null==h?void 0:h.service.length)>0,E=g?B(null==h?void 0:h.service):null==h?void 0:h.id,_=g?eB.TiledImage:eB.SimpleImage;return{uri:E,imageType:_}},F=(h,g)=>{let E=g?eB.TiledImage:eB.SimpleImage;return{uri:h,imageType:E}},{styled:eH,css:eU,keyframes:ez,createTheme:eG}=(0,ew.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:{xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"}}),e$=eH("div",{display:"flex",flexDirection:"column",alignItems:"center"}),ej=eH("p",{fontWeight:"bold",fontSize:"x-large"}),eV=eH("span",{fontSize:"medium"}),T=({error:h})=>{let{message:g}=h;return eO.createElement(e$,{role:"alert"},eO.createElement(ej,{"data-testid":"headline"},"Something went wrong"),g&&eO.createElement(eV,null,`Error message: ${g}`," "))},eq=eH("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),eW=eH("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),eY=eH("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${eq}`]:{display:"block"}},false:{[`${eq}`]:{display:"none"}}}}}),eQ=eH("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),m=({className:h,id:g,label:E,children:_})=>{let A=E.toLowerCase().replace(/\s/g,"-");return eO.createElement(eQ,{id:g,className:h,"data-testid":"openseadragon-button","data-button":A},eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${g}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",{id:`${g}-svg-title`},E),_))},eX=eH("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),V=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),D=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),U=()=>eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),X=()=>eO.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),image_$=()=>eO.createElement(eO.Fragment,null,eO.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),eO.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),Y=({_cloverViewerHasPlaceholder:h,config:g})=>eO.createElement(eX,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:h},g.showZoomControl&&eO.createElement(eO.Fragment,null,eO.createElement(m,{id:g.zoomInButton,label:"zoom in"},eO.createElement(V,null)),eO.createElement(m,{id:g.zoomOutButton,label:"zoom out"},eO.createElement(D,null))),g.showFullPageControl&&eO.createElement(m,{id:g.fullPageButton,label:"full page"},eO.createElement(U,null)),g.showRotationControl&&eO.createElement(eO.Fragment,null,eO.createElement(m,{id:g.rotateRightButton,label:"rotate right"},eO.createElement(image_$,null)),eO.createElement(m,{id:g.rotateLeftButton,label:"rotate left"},eO.createElement(image_$,null))),g.showHomeControl&&eO.createElement(m,{id:g.homeButton,label:"reset"},eO.createElement(X,null))),q=({ariaLabel:h,config:g,uri:E,_cloverViewerHasPlaceholder:_,imageType:A,openSeadragonCallback:b})=>{let[C,k]=(0,eO.useState)(),[S,N]=(0,eO.useState)(),w=(0,eO.useRef)(!1);return(0,eO.useEffect)(()=>(w.current||(w.current=!0,S||N(eS(g))),()=>null==S?void 0:S.destroy()),[]),(0,eO.useEffect)(()=>{S&&b&&b(S)},[S,b]),(0,eO.useEffect)(()=>{S&&E!==C&&(null==S||S.forceRedraw(),k(E))},[S,C,E]),(0,eO.useEffect)(()=>{if(C&&S)switch(A){case"simpleImage":null==S||S.addSimpleImage({url:C});break;case"tiledImage":M(C).then(h=>{try{if(!h)throw Error(`No tile source found for ${C}`);null==S||S.addTiledImage({tileSource:h})}catch(h){console.error(h)}});break;default:null==S||S.close(),console.warn(`Unable to render ${C} in OpenSeadragon as type: "${A}"`)}},[A,C]),eO.createElement(eY,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":g.id,hasNavigator:g.showNavigator},eO.createElement(Y,{_cloverViewerHasPlaceholder:_,config:g}),g.showNavigator&&eO.createElement(eq,{id:g.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),eO.createElement(eW,{id:g.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...h&&{"aria-label":h}}))},J=(h,g="none")=>{if(!h)return null;if("string"==typeof h)return[h];if(!h[g]){let g=Object.getOwnPropertyNames(h);if(g.length>0)return h[g[0]]}return h[g]&&Array.isArray(h[g])?h[g]:null},K=(h,g="none",E=", ")=>{let _=J(h,g);return Array.isArray(_)?_.join(`${E}`):_},le=({_cloverViewerHasPlaceholder:h=!1,body:g,instanceId:E,isTiledImage:_=!1,label:A,src:b="",openSeadragonCallback:C,openSeadragonConfig:k={}})=>{let S=E||esm_browser_v4(),N="string"==typeof A?A:K(A),w={id:`openseadragon-${S}`,navigatorId:`openseadragon-navigator-${S}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${S}`,homeButton:`reset-${S}`,rotateLeftButton:`rotateLeft-${S}`,rotateRightButton:`rotateRight-${S}`,zoomInButton:`zoomIn-${S}`,zoomOutButton:`zoomOut-${S}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...k},{imageType:R,uri:L}=g?O(g):F(b,_);return L?eO.createElement(eN.SV,{FallbackComponent:T},eO.createElement(q,{_cloverViewerHasPlaceholder:h,ariaLabel:N,config:w,imageType:R,key:S,uri:L,openSeadragonCallback:C})):null};var eK=E(1830),eZ=Object.defineProperty,__defNormalProp=(h,g,E)=>g in h?eZ(h,g,{enumerable:!0,configurable:!0,writable:!0,value:E}):h[g]=E,__publicField=(h,g,E)=>(__defNormalProp(h,"symbol"!=typeof g?g+"":g,E),E);let eJ=[];Object.freeze(eJ);let e0={id:"https://iiif-parser/annotation-page",type:"AnnotationPage",behavior:eJ,motivation:null,label:null,thumbnail:eJ,summary:null,requiredStatement:null,metadata:eJ,rights:null,provider:eJ,items:eJ,seeAlso:eJ,homepage:eJ,logo:eJ,rendering:eJ,service:eJ},e1={id:"https://iiif-parser/empty-canvas",type:"Canvas",label:null,behavior:eJ,motivation:null,thumbnail:eJ,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:eJ,rights:null,navDate:null,provider:eJ,items:eJ,annotations:eJ,seeAlso:eJ,homepage:eJ,logo:eJ,partOf:eJ,rendering:eJ,service:eJ,duration:0,height:0,width:0},e2={id:"https://iiif-parser/empty-collection",type:"Collection",label:null,viewingDirection:"left-to-right",behavior:eJ,motivation:null,thumbnail:eJ,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:eJ,rights:null,navDate:null,provider:eJ,items:eJ,annotations:eJ,seeAlso:eJ,homepage:eJ,logo:eJ,partOf:eJ,rendering:eJ,service:eJ,services:eJ},e3={id:"https://iiif-parser/empty-manifest",type:"Manifest",annotations:eJ,behavior:eJ,homepage:eJ,items:eJ,label:null,logo:eJ,metadata:eJ,motivation:null,navDate:null,provider:eJ,partOf:eJ,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:eJ,requiredStatement:null,rights:null,seeAlso:eJ,service:eJ,services:eJ,start:null,structures:eJ,summary:null,thumbnail:eJ,viewingDirection:"left-to-right"},e4={id:"https://iiif-parser/empty-canvas",type:"Range",label:null,behavior:eJ,motivation:null,thumbnail:eJ,posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:eJ,rights:null,navDate:null,provider:eJ,items:eJ,annotations:eJ,seeAlso:eJ,homepage:eJ,logo:eJ,partOf:eJ,rendering:eJ,service:eJ,start:null,supplementary:null,viewingDirection:"left-to-right"},e5={id:"https://iiif-parser/empty-agent",type:"Agent",label:{},logo:eJ,seeAlso:eJ,homepage:eJ};function ensureArray$1(h){return Array.isArray(h)?h:[h]}let e6=["Collection","Manifest","Canvas","AnnotationPage","AnnotationCollection","Annotation","ContentResource","Range","Service","Selector","Agent"];let Traverse$1=class Traverse$1{constructor(h,g={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],...h},this.options={allowUndefinedReturn:!1,...g}}static all(h){return new Traverse$1({collection:[h],manifest:[h],canvas:[h],annotationCollection:[h],annotationPage:[h],annotation:[h],contentResource:[h],choice:[h],range:[h],service:[h]})}traverseDescriptive(h){return h.thumbnail&&(h.thumbnail=h.thumbnail.map(h=>this.traverseType(h,this.traversals.contentResource))),h.provider&&(h.provider=h.provider.map(h=>this.traverseAgent(h))),h}traverseLinking(h){return h.seeAlso&&(h.seeAlso=h.seeAlso.map(h=>this.traverseType(h,this.traversals.contentResource))),h.service&&(h.service=ensureArray$1(h.service).map(h=>this.traverseType(h,this.traversals.service))),h.services&&(h.services=h.services.map(h=>this.traverseType(h,this.traversals.service))),h.logo&&(h.logo=h.logo.map(h=>this.traverseType(h,this.traversals.contentResource))),h.homepage&&(h.homepage=h.homepage.map(h=>this.traverseType(h,this.traversals.contentResource))),h.partOf&&(h.partOf=h.partOf.map(h=>"string"!=typeof h&&h.type?"Canvas"===h.type?this.traverseType(h,this.traversals.canvas):"AnnotationCollection"===h.type?this.traverseType(h,this.traversals.annotationCollection):"Collection"===h.type?this.traverseType(h,this.traversals.collection):this.traverseType(h,this.traversals.contentResource):this.traverseType(h,this.traversals.contentResource))),h.start&&(h.start=h.start?this.traverseType(h.start,this.traversals.canvas):null),h.rendering&&(h.rendering=h.rendering.map(h=>this.traverseType(h,this.traversals.contentResource))),h.supplementary&&(h.supplementary=h.supplementary.map(h=>this.traverseType(h,this.traversals.contentResource))),h}traverseCollectionItems(h){return h.items&&h.items.map(h=>"Collection"===h.type?this.traverseCollection(h):this.traverseManifest(h)),h}traverseCollection(h){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(h))))),this.traversals.collection)}traverseManifestItems(h){return h.items&&(h.items=h.items.map(h=>this.traverseCanvas(h))),h}traverseManifestStructures(h){return h.structures&&(h.structures=h.structures.map(h=>this.traverseRange(h))),h}traverseManifest(h){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(h)))))),this.traversals.manifest)}traverseCanvasItems(h){return h.items=(h.items||[]).map(h=>this.traverseAnnotationPage(h)),h}traverseInlineAnnotationPages(h){return"string"!=typeof h&&h&&h.annotations&&(h.annotations=h.annotations.map(h=>this.traverseAnnotationPage(h))),h}traverseCanvas(h){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(h))))),this.traversals.canvas)}traverseAnnotationPageItems(h){return h.items&&(h.items=h.items.map(h=>this.traverseAnnotation(h))),h}traverseAnnotationPage(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(h))),this.traversals.annotationPage)}traverseAnnotationBody(h){return Array.isArray(h.body)?h.body=h.body.map(h=>this.traverseContentResource(h)):h.body&&(h.body=this.traverseContentResource(h.body)),h}traversePosterCanvas(h){return h.posterCanvas&&(h.posterCanvas=this.traverseCanvas(h.posterCanvas)),h.placeholderCanvas&&(h.placeholderCanvas=this.traverseCanvas(h.placeholderCanvas)),h.accompanyingCanvas&&(h.accompanyingCanvas=this.traverseCanvas(h.accompanyingCanvas)),h}traverseAnnotation(h){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(h)),this.traversals.annotation)}traverseContentResourceLinking(h){return"string"!=typeof h&&h&&h&&h.service&&(h.service=ensureArray$1(h.service||[]).map(h=>this.traverseType(h,this.traversals.service))),h}traverseContentResource(h){return"Choice"===h.type&&(h.items=h.items.map(h=>this.traverseContentResource(h))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(h)),this.traversals.contentResource)}traverseRangeRanges(h){return h.items&&(h.items=h.items.map(h=>"string"==typeof h?this.traverseCanvas({id:h,type:"Canvas"}):"Manifest"===h.type?this.traverseManifest(h):this.traverseRange(h))),h}traverseRange(h){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(h)))),this.traversals.range)}traverseAgent(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(h)),this.traversals.agent)}traverseType(h,g){return g.reduce((h,g)=>{let E=g(h);return void 0!==E||this.options.allowUndefinedReturn?E:h},h)}traverseService(h){return this.traverseType(h,this.traversals.service)}traverseUnknown(h){let g=function(h){if(null==h)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(h))throw Error("Array is not a valid entity");if("object"!=typeof h)throw Error(`${typeof h} is not a valid entity`);if("string"==typeof h.type){let g=e6.indexOf(h.type);if(-1!==g)return e6[g]}if(h.profile)return"Service";throw Error("Resource type is not known")}(h);switch(g){case"Collection":return this.traverseCollection(h);case"Manifest":return this.traverseManifest(h);case"Canvas":return this.traverseCanvas(h);case"AnnotationPage":return this.traverseAnnotationPage(h);case"Annotation":return this.traverseAnnotation(h);case"ContentResource":return this.traverseContentResource(h);case"Range":return this.traverseRange(h);case"Service":return this.traverseService(h);case"Agent":return this.traverseAgent(h);default:throw Error(`Unknown or unsupported resource type of ${g}`)}}};let e8=["sc:Collection","sc:Manifest","sc:Canvas","sc:AnnotationList","oa:Annotation","sc:Range","sc:Layer","sc:Sequence","oa:Choice","Service","ContentResource"];let Traverse=class Traverse{constructor(h,g={}){__publicField(this,"traversals"),__publicField(this,"options"),this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...h},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...g}}static all(h){return new Traverse({collection:[h],manifest:[h],canvas:[h],annotationList:[h],sequence:[h],annotation:[h],contentResource:[h],choice:[h],range:[h],service:[h],layer:[h]})}traverseCollection(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(h))),this.traversals.collection)}traverseCollectionItems(h){if(this.options.mergeMemberProperties){let g=[...(h.manifests||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Manifest"}:h),...(h.collections||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Collection"}:h),...h.members||[]];delete h.collections,delete h.manifests,h.members=g}return h.manifests&&(h.manifests=h.manifests.map(h=>this.traverseManifest("string"==typeof h?{"@id":h,"@type":"sc:Manifest"}:h))),h.collections&&(h.collections=h.collections.map(h=>this.traverseCollection("string"==typeof h?{"@id":h,"@type":"sc:Collection"}:h))),h.members&&(h.members=h.members.map(h=>"string"==typeof h?h:this.traverseUnknown(h))),h}traverseManifest(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(h))),this.traversals.manifest)}traverseManifestItems(h){return h.sequences&&(h.sequences=h.sequences.map(h=>this.traverseSequence(h))),h.structures&&(h.structures=h.structures.map(h=>this.traverseRange(h))),h}traverseSequence(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(h))),this.traversals.sequence)}traverseSequenceItems(h){return h.canvases&&(h.canvases=h.canvases.map(h=>this.traverseCanvas(h))),h}traverseCanvas(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(h))),this.traversals.canvas)}traverseCanvasItems(h){return h.images&&(h.images=h.images.map(h=>this.traverseAnnotation(h))),h.otherContent&&(h.otherContent=h.otherContent.map(h=>this.traverseAnnotationList(h))),h}traverseRange(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(h))),this.traversals.range)}traverseRangeItems(h){if(this.options.mergeMemberProperties){let g=[...(h.ranges||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Range"}:h),...(h.canvases||[]).map(h=>"string"==typeof h?{"@id":h,"@type":"sc:Canvas"}:h),...h.members||[]];delete h.ranges,delete h.canvases,h.members=g.length?g.map(h=>this.traverseUnknown(h)):void 0}return h}traverseAnnotationList(h){let g="string"==typeof h?{"@id":h,"@type":"sc:AnnotationList"}:h;return this.traverseType(this.traverseDescriptive(this.traverseAnnotationListItems(g)),this.traversals.annotationList)}traverseAnnotationListItems(h){return h.resources&&(h.resources=h.resources.map(h=>this.traverseAnnotation(h))),h}traverseAnnotation(h){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(h))),this.traversals.annotation)}traverseAnnotationItems(h){return h.resource&&(Array.isArray(h.resource)?h.resource=h.resource.map(h=>this.traverseContentResource(h)):h.resource=this.traverseContentResource(h.resource)),h.on,h}traverseLayer(h){return this.traverseType(this.traverseLinking(this.traverseLayerItems(h)),this.traversals.layer)}traverseLayerItems(h){return h.otherContent&&(h.otherContent=h.otherContent.map(h=>this.traverseAnnotationList(h))),h}traverseChoice(h){return this.traverseType(this.traverseChoiceItems(h),this.traversals.choice)}traverseChoiceItems(h){return h.default&&"rdf:nil"!==h.default&&(h.default=this.traverseContentResource(h.default)),h.item&&"rdf:nil"!==h.item&&(h.item=h.item.map(h=>this.traverseContentResource(h))),h}traverseService(h){return this.traverseType(this.traverseLinking(h),this.traversals.service)}traverseContentResource(h){return"oa:Choice"===h["@type"]?this.traverseChoice(h):this.traverseType(this.traverseDescriptive(this.traverseLinking(h)),this.traversals.contentResource)}traverseUnknown(h){if(!h["@type"]||"string"==typeof h)return h;switch(function(h){if(null==h)throw Error("Null or undefined is not a valid entity.");if(Array.isArray(h))throw Error("Array is not a valid entity");if("object"!=typeof h)throw Error(`${typeof h} is not a valid entity`);if("string"==typeof h["@type"]){let g=e8.indexOf(h["@type"]);if(-1!==g)return e8[g]}if(h.profile)return"Service";if(h.format||h["@type"])return"ContentResource";throw Error("Resource type is not known")}(h)){case"sc:Collection":return this.traverseCollection(h);case"sc:Manifest":return this.traverseManifest(h);case"sc:Canvas":return this.traverseCanvas(h);case"sc:Sequence":return this.traverseSequence(h);case"sc:Range":return this.traverseRange(h);case"oa:Annotation":return this.traverseAnnotation(h);case"sc:AnnotationList":return this.traverseAnnotationList(h);case"sc:Layer":return this.traverseLayer(h);case"Service":return this.traverseService(h);case"oa:Choice":return this.traverseChoice(h);case"ContentResource":return this.traverseContentResource(h)}return h.profile?this.traverseService(h):h}traverseImageResource(h){let g=Array.isArray(h),E=Array.isArray(h)?h:[h],_=[];for(let h of E)"string"==typeof h?_.push(this.traverseContentResource({"@id":h,"@type":"dctypes:Image"})):_.push(this.traverseContentResource(h));return g||this.options.convertPropsToArray?_:_[0]}traverseDescriptive(h){return h.thumbnail&&(h.thumbnail=this.traverseImageResource(h.thumbnail)),h.logo&&(h.logo=this.traverseImageResource(h.logo)),h}traverseOneOrMoreServices(h){let g=Array.isArray(h),E=Array.isArray(h)?h:[h],_=[];for(let h of E)_.push(this.traverseService(h));return g||this.options.convertPropsToArray?_:_[0]}traverseLinking(h){return h.related&&(h.related=this.traverseOneOrManyType(h.related,this.traversals.contentResource)),h.rendering&&(h.rendering=this.traverseOneOrManyType(h.rendering,this.traversals.contentResource)),h.service&&(h.service=this.traverseOneOrMoreServices(h.service)),h.seeAlso&&(h.seeAlso=this.traverseOneOrManyType(h.seeAlso,this.traversals.contentResource)),h.within&&("string"==typeof h.within||(h.within=this.traverseOneOrManyType(h.within,this.traversals.contentResource))),h.startCanvas&&("string"==typeof h.startCanvas?h.startCanvas=this.traverseType({"@id":h.startCanvas,"@type":"sc:Canvas"},this.traversals.canvas):h.startCanvas&&this.traverseType(h.startCanvas,this.traversals.canvas)),h.contentLayer&&("string"==typeof h.contentLayer?h.contentLayer=this.traverseLayer({"@id":h.contentLayer,"@type":"sc:Layer"}):h.contentLayer=this.traverseLayer(h.contentLayer)),h}traverseOneOrManyType(h,g){if(!Array.isArray(h)){if(!this.options.convertPropsToArray)return this.traverseType(h,g);h=[h]}return h.map(h=>this.traverseType(h,g))}traverseType(h,g){return g.reduce((h,g)=>{let E=g(h);return void 0!==E||this.options.allowUndefinedReturn?E:h},h)}};let e9="http://library.stanford.edu/iiif/image-api/compliance.html#level1",e7="http://library.stanford.edu/iiif/image-api/compliance.html#level2",tt="http://library.stanford.edu/iiif/image-api/conformance.html#level1",tn="http://library.stanford.edu/iiif/image-api/conformance.html#level2",tr="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",ti="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",ts="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",tl="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",tc="http://iiif.io/api/image/1/level1.json",tu="http://iiif.io/api/image/1/profiles/level1.json",td="http://iiif.io/api/image/1/level2.json",tp="http://iiif.io/api/image/1/profiles/level2.json",th="http://iiif.io/api/image/2/level1.json",tf="http://iiif.io/api/image/2/profiles/level1.json",tm="http://iiif.io/api/image/2/level2.json",tg="http://iiif.io/api/image/2/profiles/level2.json",tE="level1",tT="level2",t_="http://iiif.io/api/image/2/level1",tA="http://iiif.io/api/image/2/level2",ty=[t_,tA,e9,e7,tt,tn,tr,ti,ts,tl,tc,tu,td,tp,th,tf,tm,tg,tE,tT],tv=["http://iiif.io/api/image/2/level0",t_,tA,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",e9,e7,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",tt,tn,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",tr,ti,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",ts,tl,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",tc,tu,td,tp,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",th,tf,tm,tg,"level0",tE,tT],tb={attributionLabel:"Attribution",providerId:"http://example.org/provider",providerName:"Unknown"};function convertLanguageMapping(h,g="none"){if(!h)return{};let E=Array.isArray(h)?h:[h],_={};for(let h of E){if("string"==typeof h){_[g]=_[g]?_[g]:[],_[g].push(h||"");continue}if(!h["@language"]){_[g]=_[g]?_[g]:[],_[g].push(h["@value"]||"");continue}let E=h["@language"];_[E]=_[E]?_[E]:[],_[E].push(h["@value"]||"")}return _}function removePrefix(h){for(let g of["sc","oa","dcterms","dctypes","iiif"])if(h.startsWith(`${g}:`))return h.slice(g.length+1);return h}let tx=["Collection","Manifest","Annotation","AnnotationPage","Range","Service"];function getNewType(h){let g=h["@id"]||h.id,E=h["@type"]||h.type,_=h.profile||void 0,A=h["@context"]||void 0;if(_){let h=function(h){switch(h){case"http://iiif.io/api/image/2/level0.json":case"http://iiif.io/api/image/2/level1.json":case"http://iiif.io/api/image/2/level2.json":return"ImageService2";case"http://iiif.io/api/auth/1/kiosk":case"http://iiif.io/api/auth/1/login":case"http://iiif.io/api/auth/1/clickthrough":case"http://iiif.io/api/auth/1/external":case"http://iiif.io/api/auth/0/kiosk":case"http://iiif.io/api/auth/0/login":case"http://iiif.io/api/auth/0/clickthrough":case"http://iiif.io/api/auth/0/external":return"AuthCookieService1";case"http://iiif.io/api/auth/1/token":case"http://iiif.io/api/auth/0/token":return"AuthTokenService1";case"http://iiif.io/api/auth/1/logout":case"http://iiif.io/api/auth/0/logout":return"AuthLogoutService1";case"http://iiif.io/api/search/1/search":case"http://iiif.io/api/search/0/search":return"SearchService1";case"http://iiif.io/api/search/1/autocomplete":case"http://iiif.io/api/search/0/autocomplete":return"AutoCompleteService1"}}(_);if(h)return h}if(A){let h=function(h){let g=Array.isArray(h)?h:[h];for(let h of g)switch(h){case"http://iiif.io/api/image/2/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2":return"ImageService2";case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":return"ImageService1";case"http://iiif.io/api/annex/openannotation/context.json":return"ImageApiSelector"}}(A);if(h)return h}if(E){if(Array.isArray(E)){if(-1!==E.indexOf("oa:CssStylesheet"))return"CssStylesheet";if(-1!==E.indexOf("cnt:ContentAsText"))return"TextualBody";E=E[0]}for(let h of["sc","oa","dcterms","dctypes","iiif"])if(E.startsWith(`${h}:`)){E=E.slice(h.length+1);break}switch(E){case"Layer":return"AnnotationCollection";case"AnnotationList":return"AnnotationPage";case"cnt:ContentAsText":return"TextualBody"}}if(E&&-1!==tx.indexOf(E))return E;if(h.format){if(h.format.startsWith("image/"))return"Image";if(h.format.startsWith("text/")||"application/pdf"===h.format)return"Text";if(h.format.startsWith("application/"))return"Dataset"}return g&&(g.endsWith(".jpg")||g.endsWith(".png")||g.endsWith(".jpeg"))?"Image":E||"unknown"}let tC=/http(s)?:\/\/(creativecommons.org|rightsstatements.org)[^"'\\<\n]+/gm,tI=["http://iiif.io/api/presentation/2/context.json","http://iiif.io/api/image/2/context.json","http://iiif.io/api/image/1/context.json","http://library.stanford.edu/iiif/image-api/1.1/context.json","http://iiif.io/api/search/1/context.json","http://iiif.io/api/search/0/context.json","http://iiif.io/api/auth/1/context.json","http://iiif.io/api/auth/0/context.json","http://iiif.io/api/annex/openannotation/context.json"];function removeUndefinedProperties(h){for(let g in h)(void 0===h[g]||null===h[g])&&delete h[g];return h}let tk=0;function mintNewIdFromResource(h,g){let E=encodeURI(h.id||h["@id"]||"").trim();return E&&g?`${E}/${g}`:E||(tk++,`http://example.org/${h["@type"]}${g?`/${g}`:""}/${tk}`)}function technicalProperties$2(h){let g;let E=[...h.behavior||[]];return h.viewingHint&&E.push(h.viewingHint),Array.isArray(h.motivation)?g=h.motivation.map(removePrefix):h.motivation&&(g=removePrefix(h.motivation)),{"@context":h["@context"]?function(h){if(h){let g=Array.isArray(h)?h:[h],E=[];for(let h of g)"http://iiif.io/api/presentation/2/context.json"===h&&E.push("http://iiif.io/api/presentation/3/context.json"),-1===tI.indexOf(h)&&E.push(h);if(g.length)return 1===E.length?E[0]:E}}(h["@context"]):void 0,id:(h["@id"]||mintNewIdFromResource(h)).trim(),type:getNewType(h),behavior:E.length?E:void 0,height:h.height?h.height:void 0,width:h.width?h.width:void 0,motivation:g,viewingDirection:h.viewingDirection,profile:h.profile,format:h.format?h.format:void 0,duration:void 0,timeMode:void 0}}function descriptiveProperties$2(h){var g;let[E,_]=function(h,g="Rights/License",E="none"){let _=null,A=[],b=Array.isArray(h)?h:[h];for(let h of b){let b=h?function(h){let g=h.match(tC);return g?g[0]:h}(h):void 0;if(b&&(-1!==b.indexOf("creativecommons.org")||-1!==b.indexOf("rightsstatements.org"))){_=b.startsWith("https://")?`http://${b.slice(8)}`:b;continue}b&&A.push({label:{[E]:[g]},value:{[E]:[b]}})}return[_,A]}(h.license),A=[...h.metadata&&(g=h.metadata)?g.map(h=>({label:convertLanguageMapping(h.label),value:convertLanguageMapping(h.value)})):[],..._];return{rights:E,metadata:A.length?A:void 0,label:h.label?convertLanguageMapping(h.label):void 0,requiredStatement:h.attribution?{label:convertLanguageMapping(tb.attributionLabel),value:convertLanguageMapping(h.attribution)}:void 0,navDate:h.navDate,summary:h.description?convertLanguageMapping(h.description):void 0,thumbnail:h.thumbnail}}function linkingProperties$2(h){let g=h.related?Array.isArray(h.related)?h.related:[h.related]:[],E=h.contentLayer;return{provider:h.logo||g.length?[{id:tb.providerId,type:"Agent",homepage:g.length?[g[0]]:void 0,logo:h.logo?Array.isArray(h.logo)?h.logo:[h.logo]:void 0,label:convertLanguageMapping(tb.providerName)}]:void 0,partOf:function(h){if(!h.within)return;let g=Array.isArray(h.within)?h.within:[h.within],E=[];for(let _ of g)"string"==typeof _?_&&"sc:Manifest"===h["@type"]&&E.push({id:_,type:"Collection"}):_["@id"]&&E.push({id:_["@id"],type:getNewType(_)});return E.length?E:void 0}(h),rendering:h.rendering,seeAlso:h.seeAlso,start:h.startCanvas,service:h.service?ensureArray$1(h.service):void 0,supplementary:E?[E]:void 0}}function upgradeContentResource(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),chars:h.chars,format:h.format?h.format:void 0,language:h.language})}let tS=new Traverse({collection:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),items:h.members})}],manifest:[function(h){let g=[],E=[];for(let _ of h.sequences||[])_.canvases.length&&g.push(..._.canvases),_.behavior&&E.push(..._.behavior);let _=technicalProperties$2(h);return E.length&&(_.behavior?_.behavior.push(...E):_.behavior=E),removeUndefinedProperties({..._,...descriptiveProperties$2(h),...linkingProperties$2(h),items:g,structures:h.structures})}],canvas:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),annotations:h.otherContent&&h.otherContent.length?h.otherContent:void 0,items:h.images&&h.images.length?[{id:mintNewIdFromResource(h,"annotation-page"),type:"AnnotationPage",items:h.images}]:void 0})}],annotationList:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),items:h.resources&&h.resources.length?h.resources:void 0})}],sequence:[function(h){return h.canvases&&0!==h.canvases.length?{canvases:h.canvases,behavior:h.viewingHint?[h.viewingHint]:[]}:{canvases:[],behavior:[]}}],annotation:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),target:function upgradeTarget(h){if(Array.isArray(h)){if(h.length>1)return{type:"List",items:h.map(upgradeTarget)};h=h[0]}if("string"==typeof h)return encodeURI(h).trim();if(!("@type"in h))return encodeURI(h["@id"]).trim();{let g;if("string"==typeof h.full)g=h.full;else if("dctypes:Image"===h.full["@type"])g={id:h.full["@id"],type:"Image"};else if("sc:Canvas"===h.full["@type"])g={id:h.full["@id"],type:"Canvas"};else throw Error(`Unsupported source type on annotation: ${h.full["@type"]}`);return{type:"SpecificResource",source:g,selector:function upgradeSelector(h){let g=(Array.isArray(h["@type"])&&h["@type"].includes("oa:SvgSelector")||"oa:SvgSelector"==h["@type"])&&("chars"in h||"value"in h);if(g)return{type:"SvgSelector",value:"chars"in h?h.chars:h.value};if("oa:FragmentSelector"===h["@type"])return{type:"FragmentSelector",value:h.value};if("oa:Choice"===h["@type"])return[upgradeSelector(h.default),...(Array.isArray(h.item)?h.item:[h.item]).map(upgradeSelector)];if("iiif:ImageApiSelector"==h["@type"])return{type:"ImageApiSelector",region:"region"in h?h.region:void 0,rotation:"rotation"in h?h.rotation:void 0};throw Error(`Unsupported selector type: ${h["@type"]}`)}(h.selector)}}}(h.on),body:Array.isArray(h.resource)?h.resource.map(upgradeContentResource):upgradeContentResource(h.resource)})}],contentResource:[upgradeContentResource],choice:[function(h){let g=[];return h.default&&"rdf:nil"!==h.default&&g.push(h.default),h.item&&"rdf:nil"!==h.item&&g.push(...h.item),{...technicalProperties$2(h),...descriptiveProperties$2(h),items:g}}],range:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h),items:h.members})}],service:[function(h){let{"@id":g,"@type":E,"@context":_,profile:A,...b}=h,C={};return g&&(C["@id"]=g),C["@type"]=getNewType(h),"unknown"===C["@type"]&&(_&&_.length&&(C["@context"]=_),C["@type"]="Service"),A&&(C.profile=function getProfile(h){return Array.isArray(h)?getProfile(h.find(h=>"string"==typeof h)):-1!==tv.indexOf(h)?"level2":-1!==ty.indexOf(h)?"level1":"string"==typeof h?h:void 0}(A)),removeUndefinedProperties({...C,...b})}],layer:[function(h){return removeUndefinedProperties({...technicalProperties$2(h),...descriptiveProperties$2(h),...linkingProperties$2(h)})}]});function getResource(h,g){if("string"==typeof h)return{id:h,type:g};if(!h.id)throw Error(`Invalid resource does not have an ID (${g})`);return h}function addMissingIdToContentResource(h){return g=>"string"==typeof g?{id:g,type:h}:g.id?g.type?g:{type:h,...g}:{id:`vault://${function(h){let g=JSON.stringify(h),E=5381,_=g.length;for(;_;)E=33*E^g.charCodeAt(--_);let A=E>>>0,b=A.toString(16);return b.length%2?"0"+b:b}(g)}`,type:h,...g}}function ensureDefaultFields(h){return g=>({...h,...g})}function ensureArray(h){return Array.isArray(h)?h:[h]}function ensureArrayOnAnnotation(h){return h.body&&(h.body=ensureArray(h.body)),h.seeAlso&&(h.seeAlso=ensureArray(h.seeAlso)),h.body&&(h.body=ensureArray(h.body)),h.audience&&(h.audience=ensureArray(h.audience)),h.accessibility&&(h.accessibility=ensureArray(h.accessibility)),h.motivation&&(h.motivation=ensureArray(h.motivation)),h}let tN="__$UNSET$__",tw="__$UNWRAP$__";function languageString2to3(h){if(!h)return;let g=Object.keys(h);if(0!==g.length){if(1===g.length){let E=g[0];if(!E)return"";let _=(h[E]||[]).join("");return"@none"===E||"none"===E||"en"===E?_:{"@language":E,"@value":_}}return g.map(g=>({"@language":g,"@value":(h[g]||[]).join("")}))}}function unNestArray(h,g=!1){return h?h.length>1&&!g?h:h[0]||void 0:void 0}function convertService(h){if(h){if("string"==typeof h)return{"@id":h};if("@id"in h){let g={...h};return delete g["@type"],g}return{"@context":"http://iiif.io/api/image/2/context.json","@id":h.id,profile:`http://iiif.io/api/image/2/profiles/${h.profile}.json`}}}function technicalProperties$1(h,g){return[["@id",h.id],["@type",g],["format",h.format],["height",h.height],["width",h.width],["viewingDirection","left-to-right"!==h.viewingDirection?h.viewingDirection:void 0]]}function*descriptiveProperties$1(h){let g=h.provider?yield h.provider[0]:void 0;return[["label",languageString2to3(h.label)],["metadata",h.metadata&&h.metadata.length?h.metadata.map(h=>({label:languageString2to3(h.label)||"",value:languageString2to3(h.value)||""})):void 0],["description",languageString2to3(h.summary)],["thumbnail",unNestArray((yield h.thumbnail))],["navDate",h.navDate],["logo",g?unNestArray(g.logo):void 0],["homepage",g?g.homepage:void 0],["attribution",h.requiredStatement?languageString2to3(h.requiredStatement.value):void 0]]}function*linkingProperties$1(h){return[["seeAlso",unNestArray((yield h.seeAlso))],["service",unNestArray((h.service||[]).map(convertService))],["rendering",unNestArray((yield h.rendering))],["startCanvas",h.start?h.start.id:void 0]]}let tO={Manifest:function*(h){return[...technicalProperties$1(h,"sc:Manifest"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["sequences",[{"@id":`${h.id}/sequence0`,"@type":"sc:Sequence",canvases:yield h.items}]],["structures",(yield h.structures)]]},Canvas:function*(h){let g=yield h.items,E=g[0];return[...technicalProperties$1(h,"sc:Canvas"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["images",E?[E.resources]:void 0],["annotations",h.annotations&&h.annotations.length?unNestArray((yield h.annotations)):void 0]]},AnnotationPage:function*(h){return[...technicalProperties$1(h,"sc:AnnotationList"),...yield*descriptiveProperties$1(h),["resources",h.items&&h.items.length?unNestArray((yield h.items)):void 0]]},Annotation:function*(h){return[["@id",h.id],["@type","oa:Annotation"],["motivation","sc:painting"],["on",function parseCanvasTarget(h){return Array.isArray(h)?h.map(h=>parseCanvasTarget(h)):"string"==typeof h?h:h.type&&"Canvas"===h.type?h.id:h}(h.target)],["resource",unNestArray((yield h.body),!0)]]},ContentResource:function*(h){return"Image"===h.type?[...technicalProperties$1(h,"dctypes:Image"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h)]:[...technicalProperties$1(h,void 0),...yield*descriptiveProperties$1(h)]},AnnotationCollection:function*(h){return[["@id",h.id],["@type","sc:Layer"],["label",languageString2to3(h.label)]]},Collection:function*(h){return[...technicalProperties$1(h,"sc:Collection"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["members",(yield*h.items)]]},Range:function*(h){let g=[],E=[];if(h.items)for(let _ of h.items){let A=yield _;g.push({"@id":_.id,"@type":_.type,label:A?A.label:void 0,within:h.id}),"Canvas"===_.type&&E.push(_.id)}return[...technicalProperties$1(h,"sc:Range"),...yield*descriptiveProperties$1(h),...yield*linkingProperties$1(h),["canvases",E.length===g.length?E:void 0],["members",E.length!==g.length?g:void 0]]}};function technicalProperties(h){var g;return[["id",(null==(g=h.id)?void 0:g.startsWith("vault://"))?void 0:h.id],["type",h.type],["format",h.format],["profile",h.profile],["height",h.height],["width",h.width],["duration",h.duration||void 0],["viewingDirection","left-to-right"!==h.viewingDirection?h.viewingDirection:void 0],["behavior",h.behavior&&h.behavior.length?h.behavior:void 0],["timeMode",h.timeMode],["motivation",Array.isArray(h.motivation)?h.motivation[0]:h.motivation]]}function filterEmpty(h){if(h&&0!==h.length)return h}function service2compat(h){if(h&&h.type&&"ImageService2"===h.type){let{id:g,type:E,profile:_,...A}=h,b="string"==typeof _?_:Array.isArray(_)?_.find(h=>"string"==typeof h):"";return{"@id":g,"@type":E,profile:b?b.startsWith("http")?b:`http://iiif.io/api/image/2/${b}.json`:"http://iiif.io/api/image/2/level0.json",...A}}return h}function filterService2Compat(h){if(h&&0!==h.length)return h.map(service2compat)}function*descriptiveProperties(h){return[["label",h.label],["metadata",filterEmpty(h.metadata)],["summary",h.summary],["requiredStatement",h.requiredStatement],["rights",h.rights],["navDate",h.navDate],["language",h.language],["thumbnail",filterEmpty((yield h.thumbnail))],["placeholderCanvas",(yield h.placeholderCanvas)],["accompanyingCanvas",(yield h.accompanyingCanvas)],["provider",filterEmpty((yield h.provider))]]}function*linkingProperties(h){return[["seeAlso",filterEmpty((yield h.seeAlso))],["service",filterService2Compat(h.service)],["services",filterService2Compat(h.services)],["rendering",filterEmpty((yield h.rendering))],["supplementary",filterEmpty((yield h.supplementary))],["homepage",filterEmpty((yield h.homepage))],["logo",filterEmpty((yield h.logo))],["partOf",filterEmpty((yield h.partOf))],["start",h.start]]}let tR={Manifest:function*(h,g,{isTopLevel:E}){return E?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",(yield h.items)],["structures",filterEmpty((yield h.structures))],["annotations",filterEmpty((yield h.annotations))]]:[...technicalProperties(h),...yield*descriptiveProperties(h)]},Canvas:function*(h){return[...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",(yield h.items)],["annotations",filterEmpty((yield h.annotations))]]},Agent:function*(h){return[["id",h.id],["type","Agent"],["label",h.label],...yield*linkingProperties(h)]},AnnotationPage:function*(h){let g=Object.entries(h).map(([h,g])=>[h,Array.isArray(g)?filterEmpty(g):g]).filter(([h,g])=>"items"!==h);return[...g,...yield*linkingProperties(h),["items",(yield h.items)]]},Service:function*(h){return[[tw,service2compat(h)]]},Annotation:function*(h){let g=Object.entries(h).map(([h,g])=>"motivation"===h?[h,Array.isArray(g)?g[0]:g]:[h,Array.isArray(g)?filterEmpty(g):g]).filter(([h])=>"body"!==h),E=yield h.body;return[...g,["body",1===E.length?E[0]:E]]},ContentResource:function*(h){return[...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["annotations",filterEmpty((yield h.annotations))],["items",filterEmpty((yield h.items))]]},AnnotationCollection:function*(h){return[["id",h.id],["type","AnnotationCollection"],["label",h.label]]},Collection:function*(h,g,{isTopLevel:E}){return E?[["@context","http://iiif.io/api/presentation/3/context.json"],...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",filterEmpty((yield h.items))]]:[...technicalProperties(h),...yield*descriptiveProperties(h)]},Range:function*(h){let g=[];for(let E of h.items)"Range"===E.type?g.push((yield E)):g.push(E);return[...technicalProperties(h),...yield*descriptiveProperties(h),...yield*linkingProperties(h),["items",g],["annotations",filterEmpty((yield h.annotations))]]}};var tD=E(4887);function _typeof(h){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(h)}function ownKeys(h,g){var E=Object.keys(h);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(h);g&&(_=_.filter(function(g){return Object.getOwnPropertyDescriptor(h,g).enumerable})),E.push.apply(E,_)}return E}function _objectSpread2(h){for(var g=1;g<arguments.length;g++){var E=null!=arguments[g]?arguments[g]:{};g%2?ownKeys(Object(E),!0).forEach(function(g){!function(h,g,E){var _;_=function(h,g){if("object"!==_typeof(h)||null===h)return h;var E=h[Symbol.toPrimitive];if(void 0!==E){var _=E.call(h,g||"default");if("object"!==_typeof(_))return _;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(h)}(g,"string"),(g="symbol"===_typeof(_)?_:String(_))in h?Object.defineProperty(h,g,{value:E,enumerable:!0,configurable:!0,writable:!0}):h[g]=E}(h,g,E[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(E)):ownKeys(Object(E)).forEach(function(g){Object.defineProperty(h,g,Object.getOwnPropertyDescriptor(E,g))})}return h}function formatProdErrorMessage(h){return"Minified Redux error #"+h+"; visit https://redux.js.org/Errors?code="+h+" for the full message or use the non-minified dev environment for full errors. "}var tL="function"==typeof Symbol&&Symbol.observable||"@@observable",randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},tP={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function combineReducers(h){for(var g,E=Object.keys(h),_={},A=0;A<E.length;A++){var b=E[A];"function"==typeof h[b]&&(_[b]=h[b])}var C=Object.keys(_);try{!function(h){Object.keys(h).forEach(function(g){var E=h[g];if(void 0===E(void 0,{type:tP.INIT}))throw Error(formatProdErrorMessage(12));if(void 0===E(void 0,{type:tP.PROBE_UNKNOWN_ACTION()}))throw Error(formatProdErrorMessage(13))})}(_)}catch(h){g=h}return function(h,E){if(void 0===h&&(h={}),g)throw g;for(var A=!1,b={},k=0;k<C.length;k++){var S=C[k],N=_[S],w=h[S],R=N(w,E);if(void 0===R)throw E&&E.type,Error(formatProdErrorMessage(14));b[S]=R,A=A||R!==w}return(A=A||C.length!==Object.keys(h).length)?b:h}}function compose(){for(var h=arguments.length,g=Array(h),E=0;E<h;E++)g[E]=arguments[E];return 0===g.length?function(h){return h}:1===g.length?g[0]:g.reduce(function(h,g){return function(){return h(g.apply(void 0,arguments))}})}function applyMiddleware(){for(var h=arguments.length,g=Array(h),E=0;E<h;E++)g[E]=arguments[E];return function(h){return function(){var E=h.apply(void 0,arguments),_dispatch=function(){throw Error(formatProdErrorMessage(15))},_={getState:E.getState,dispatch:function(){return _dispatch.apply(void 0,arguments)}},A=g.map(function(h){return h(_)});return _dispatch=compose.apply(void 0,A)(E.dispatch),_objectSpread2(_objectSpread2({},E),{},{dispatch:_dispatch})}}}let tM="@iiif/IMPORT_ENTITIES",tF="@iiif/MODIFY_ENTITY_FIELD",tB="@iiif/REORDER_ENTITY_FIELD",tH="@iiif/ADD_REFERENCE",tU="@iiif/REMOVE_REFERENCE",tz=(0,tD.createAction)(tM)(),tG=(0,tD.createAction)(tF)(),t$=(0,tD.createAction)(tB)(),tj=(0,tD.createAction)(tH)(),tV=(0,tD.createAction)(tU)(),tq={importEntities:tz,modifyEntityField:tG,reorderEntityField:t$,addReference:tj,removeReference:tV},tW="@iiif/ADD_MAPPING",tY="@iiif/ADD_MAPPINGS",tQ=(0,tD.createAction)(tW)(),tX=(0,tD.createAction)(tY)(),tK="@iiif/SET_META_VALUE",tZ="@iiif/SET_META_VALUE_DYNAMIC",tJ="@iiif/UNSET_META_VALUE",t0=(0,tD.createAction)(tK)(),t1=(0,tD.createAction)(tZ)(),t2=(0,tD.createAction)(tJ)(),t3={setMetaValue:t0,setMetaValueDynamic:t1,unsetMetaValue:t2},t4="RESOURCE_ERROR",t5="RESOURCE_LOADING",t6="RESOURCE_READY",t8="@iiif/REQUEST_RESOURCE",t9="@iiif/REQUEST_ERROR",t7="@iiif/REQUEST_MISMATCH",ne="@iiif/REQUEST_COMPLETE",nt="@iiif/REQUEST_OFFLINE_RESOURCE",nn=(0,tD.createAction)(t8)(),nr=(0,tD.createAction)(t9)(),ni=(0,tD.createAction)(t7)(),ns=(0,tD.createAction)(ne)();(0,tD.createAction)(nt)();let nl="@iiif/BATCH",nc="@iiif/BATCH_IMPORT",nu=(0,tD.createAction)(nl)();(0,tD.createAction)(nc)();let actionListFromResource=(h,g)=>{let{entities:E,resource:_,mapping:A}=function(h){let g=h&&h["@context"]&&("http://iiif.io/api/presentation/2/context.json"===h["@context"]||-1!==h["@context"].indexOf("http://iiif.io/api/presentation/2/context.json")||"http://www.shared-canvas.org/ns/context.json"===h["@context"])||"http://iiif.io/api/image/2/context.json"===h["@context"]?tS.traverseUnknown(h):h,E={Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}},_={},addToEntities=(h,g)=>{let _=E[h]?E[h]:{};return E=>{let A=getResource(E,g||h);return A&&A.id&&h?(_[A.id]=_[A.id]?function(h,g){if("string"==typeof h)return h;if(g.id!==h.id||g.type!==h.type)throw Error("Can only merge entities with identical identifiers and type!");return function merge(h,g){if(!g)return h;if(Array.isArray(h)){if(!Array.isArray(g))throw Error("Cannot merge array with non-array");let E=[...h];for(let _ of g)if(null!=_){if(Array.isArray(_))E.push(_);else if("object"==typeof _&&_.id&&_.type){let h=E.findIndex(h=>h.id===_.id&&h.type===_.type);h>=0&&(E[h]=merge(E[h],_))}else -1===h.indexOf(_)&&E.push(_)}return E}if("object"==typeof h){if(Array.isArray(g)||"object"!=typeof g)throw Error("Cannot merge object with non-object");let E={...h};for(let[h,_]of Object.entries(g)){let g=E[h];g!==eJ&&g?E[h]=merge(g,_):E[h]=_}return E}return h||g}({...h},g)}(_[A.id],A):Object.assign({},A),{id:A.id,type:"ContentResource"===h?h:A.type}):A}},addToMapping=(h,g)=>E=>{let{id:A,type:b}=getResource(E,g||h);if(void 0===A)throw Error("Found invalid entity without an ID.");return"ContentResource"===h?_[A]=h:_[A]=b,E},A=new Traverse$1({collection:[ensureDefaultFields(e2),addToMapping("Collection"),addToEntities("Collection")],manifest:[ensureDefaultFields(e3),addToMapping("Manifest"),addToEntities("Manifest")],canvas:[ensureDefaultFields(e1),addToMapping("Canvas"),addToEntities("Canvas")],annotationPage:[addMissingIdToContentResource("AnnotationPage"),ensureDefaultFields(e0),addToMapping("AnnotationPage"),addToEntities("AnnotationPage")],annotation:[addMissingIdToContentResource("Annotation"),ensureArrayOnAnnotation,addToMapping("Annotation"),addToEntities("Annotation")],contentResource:[addMissingIdToContentResource("ContentResource"),addToMapping("ContentResource"),addToEntities("ContentResource")],range:[ensureDefaultFields(e4),addToMapping("Range","Canvas"),addToEntities("Range","Canvas")],agent:[ensureDefaultFields(e5),addToMapping("Agent"),addToEntities("Agent")]}),b=A.traverseUnknown(g);return{entities:E,resource:b,mapping:_}}(g);if(void 0===_.id)return[nr({id:h,message:"ID is not defined in resource."})];let b=[tz({entities:E}),tX({mapping:A})];return _.id!==h&&(b.push(tQ({id:h,type:_.type})),b.push(ni({requestId:h,actualId:_.id}))),b.push(ns({id:h})),b},nd=Number.isNaN||function(h){return"number"==typeof h&&h!=h};function areInputsEqual(h,g){if(!Array.isArray(h)||!Array.isArray(g))return h===g;if(h.length!==g.length)return!1;for(let A=0;A<h.length;A++){var E,_;if(!((E=h[A])===(_=g[A])||nd(E)&&nd(_)))return!1}return!0}function esm_resolveIfExists(h,g){let E=h.iiif.requests[g],_=h.iiif.mapping[g];if(_&&h.iiif.entities[_][E.resourceUri])return h.iiif.entities[_][E.resourceUri]}function createFetchHelper(h,g,{waitTimeout:E=30}={}){return async(_,A)=>{let b=h.getState(),C=b.iiif.requests[_];if(C)switch(C.loadingState){case t4:break;case t5:{let g;let A=!1;try{let b=await Promise.race([new Promise((E,b)=>{A||(g=h.subscribe(()=>{let g=h.getState();if(g.iiif.requests[_].loadingState===t4){b();return}if(g.iiif.requests[_].loadingState===t6){let h=esm_resolveIfExists(g,_);h?E(h):b()}}))}),new Promise((h,g)=>setTimeout(()=>{A=!0,g()},60*E))]);if(g&&g(),b)return b}catch(h){g&&g()}break}case t6:{let h=esm_resolveIfExists(b,_);if(h)return h}}h.dispatch(nn({id:_}));try{let E=await g(_,A);E.id||E["@id"]||(E["@type"]&&(E["@id"]=_),E.id=_);let b=actionListFromResource(_,E);return h.dispatch(nu({actions:b})),esm_resolveIfExists(h.getState(),_)}catch(g){throw h.dispatch(nr({id:_,message:g.toString()})),g}}}function esm_getDefaultEntities(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function isReferenceList(h,g,E,_){return!(!h[E]||!h[E][g]||!h[E][g][_]||!Array.isArray(h[E][g][_]))}let np=combineReducers({mapping:(h={},g)=>{switch(g.type){case tW:return{...h,[g.payload.id]:g.payload.type};case tY:return{...h,...g.payload.mapping};default:return h}},entities:(h=esm_getDefaultEntities(),g)=>{switch(g.type){case tF:{if(!h[g.payload.type]||!h[g.payload.type][g.payload.id])return h;let E=h[g.payload.type][g.payload.id];if("string"==typeof E)return h;return{...h,[g.payload.type]:{...h[g.payload.type],[g.payload.id]:{...E,[g.payload.key]:g.payload.value}}}}case tB:{if(!isReferenceList(h,g.payload.id,g.payload.type,g.payload.key))return h;let E=h[g.payload.type][g.payload.id];if("string"==typeof E)return h;let _=Array.from(E[g.payload.key]),[A]=_.splice(g.payload.startIndex,1);return _.splice(g.payload.endIndex,0,A),{...h,[g.payload.type]:{...h[g.payload.type],[g.payload.id]:{...E,[g.payload.key]:_}}}}case tM:{let E=Object.keys(g.payload.entities),_={...h};for(let A of E){let E=g.payload.entities[A],b={...h[A]||{}},C=!1,k=Object.keys(E||{})||[];if(E&&k){for(let g of k)C=!0,b[g]=h[A][g]?function(h,g){let E={},_=[];for(let[A,b]of Object.entries(h||{})){_.push(A);let h=(g||{})[A];if(!h||0===h.length){E[A]=b;continue}E[A]=h}for(let[h,A]of Object.entries(g||{}))-1===_.indexOf(h)&&(E[h]=A);return E}(h[A][g],E[g]):E[g];C&&(_[A]=b)}}return _}case tH:{if(!isReferenceList(h,g.payload.id,g.payload.type,g.payload.key))return h;let E=h[g.payload.type][g.payload.id],_=Array.from(E[g.payload.key]);return _.splice(g.payload.index||_.length+1,0,g.payload.reference),{...h,[g.payload.type]:{...h[g.payload.type],[g.payload.id]:{...E,[g.payload.key]:_}}}}case tU:{if(!isReferenceList(h,g.payload.id,g.payload.type,g.payload.key))return h;let E=h[g.payload.type][g.payload.id],_=Array.from(E[g.payload.key]),A=g.payload.index||_.findIndex(h=>h&&h.id===g.payload.reference.id);if(-1===A||_[A]?.id!==g.payload.reference.id)return h;return _.splice(A,1),{...h,[g.payload.type]:{...h[g.payload.type],[g.payload.id]:{...E,[g.payload.key]:_}}}}default:return h}},requests:(h={},g)=>{switch(g.type){case t8:case nt:return{...h,[g.payload.id]:{requestUri:g.payload.id,loadingState:t5,uriMismatch:!1,resourceUri:g.payload.id}};case t7:return{...h,[g.payload.requestId]:{...h[g.payload.requestId]||{},uriMismatch:!0,resourceUri:g.payload.actualId},[g.payload.actualId]:{requestUri:g.payload.requestId,loadingState:h[g.payload.requestId].loadingState,uriMismatch:!0,resourceUri:g.payload.actualId}};case t9:return{...h,[g.payload.id]:{...h[g.payload.id]||{},loadingState:t4,error:g.payload.message}};case ne:return{...h,[g.payload.id]:{...h[g.payload.id]||{},loadingState:t6,error:void 0}}}return h},meta:(h={},g)=>{let{id:E,updateValue:_,value:A,meta:b,key:C}=g&&g.payload||{};switch(g.type){case tK:return{...h,[E]:{...h[E]||{},[b]:{...h[E]&&h[E][b]||{},[C]:A}}};case tZ:return{...h,[E]:{...h[E]||{},[b]:{...h[E]&&h[E][b]||{},[C]:_(h[E]&&h[E][b]?h[E][b][C]:void 0)}}};case tJ:if(h[E]&&h[E][b]&&h[E][b][C])return{...h,[E]:{...h[E]||{},[b]:{...h[E]&&h[E][b]||{},[C]:void 0}}};return h;default:return h}}}),nh="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose;let Vault=class Vault{options;store;emitter;isBatching=!1;batchQueue=[];remoteFetcher;staticFetcher;constructor(h,g){var E;this.options=Object.assign({reducers:{},middleware:[],defaultState:{},customFetcher:this.defaultFetcher,enableDevtools:!0},h||{}),this.store=g||function(h={}){let{enableDevtools:g=!0,iiifStoreName:E="iiif",defaultState:_={},extraMiddleware:A=[],customReducers:b={}}=h,C=combineReducers({[E]:np,...b}),k=function createStore(h,g,E){if("function"==typeof g&&"function"==typeof E||"function"==typeof E&&"function"==typeof arguments[3])throw Error(formatProdErrorMessage(0));if("function"==typeof g&&void 0===E&&(E=g,g=void 0),void 0!==E){if("function"!=typeof E)throw Error(formatProdErrorMessage(1));return E(createStore)(h,g)}if("function"!=typeof h)throw Error(formatProdErrorMessage(2));var _,A=h,b=g,C=[],k=C,S=!1;function ensureCanMutateNextListeners(){k===C&&(k=C.slice())}function getState(){if(S)throw Error(formatProdErrorMessage(3));return b}function subscribe(h){if("function"!=typeof h)throw Error(formatProdErrorMessage(4));if(S)throw Error(formatProdErrorMessage(5));var g=!0;return ensureCanMutateNextListeners(),k.push(h),function(){if(g){if(S)throw Error(formatProdErrorMessage(6));g=!1,ensureCanMutateNextListeners();var E=k.indexOf(h);k.splice(E,1),C=null}}}function dispatch(h){if(!function(h){if("object"!=typeof h||null===h)return!1;for(var g=h;null!==Object.getPrototypeOf(g);)g=Object.getPrototypeOf(g);return Object.getPrototypeOf(h)===g}(h))throw Error(formatProdErrorMessage(7));if(void 0===h.type)throw Error(formatProdErrorMessage(8));if(S)throw Error(formatProdErrorMessage(9));try{S=!0,b=A(b,h)}finally{S=!1}for(var g=C=k,E=0;E<g.length;E++)(0,g[E])();return h}return dispatch({type:tP.INIT}),(_={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:function(h){if("function"!=typeof h)throw Error(formatProdErrorMessage(10));A=h,dispatch({type:tP.REPLACE})}})[tL]=function(){var h;return(h={subscribe:function(h){if("object"!=typeof h||null===h)throw Error(formatProdErrorMessage(11));function observeState(){h.next&&h.next(getState())}return observeState(),{unsubscribe:subscribe(observeState)}}})[tL]=function(){return this},h},_}((h,g)=>g&&g.type===nl?g.payload.actions.reduce(C,h):g&&g.type===nc?g.payload.state:C(h,g),_,g?nh(applyMiddleware(...A)):compose(applyMiddleware(...A)));return k}({customReducers:this.options.reducers,extraMiddleware:[...this.options.middleware,this.middleware],defaultState:this.options.defaultState,enableDevtools:this.options.enableDevtools}),this.emitter={all:E=E||new Map,on:function(h,g){var _=E.get(h);_?_.push(g):E.set(h,[g])},off:function(h,g){var _=E.get(h);_&&(g?_.splice(_.indexOf(g)>>>0,1):E.set(h,[]))},emit:function(h,g){var _=E.get(h);_&&_.slice().map(function(h){h(g)}),(_=E.get("*"))&&_.slice().map(function(E){E(h,g)})}},this.remoteFetcher=createFetchHelper(this.store,this.options.customFetcher),this.staticFetcher=createFetchHelper(this.store,(h,g)=>g)}defaultFetcher=h=>fetch(h).then(h=>h.json());batch(h){this.isBatching=!0;try{h(this),this.store.dispatch(nu({actions:this.batchQueue}))}catch(h){throw this.batchQueue=[],this.isBatching=!1,h}this.batchQueue=[],this.isBatching=!1}async asyncBatch(h){this.isBatching=!0;try{await h(this),this.store.dispatch(nu({actions:this.batchQueue}))}catch(h){throw this.batchQueue=[],this.isBatching=!1,h}this.batchQueue=[],this.isBatching=!1}modifyEntityField(h,g,E){this.dispatch(tq.modifyEntityField({id:h.id,type:h.type,key:g,value:E}))}dispatch(h){this.isBatching?this.batchQueue.push(h):this.store.dispatch(h)}middleware=h=>g=>E=>{if(E.type===nl){for(let g of E.payload.actions)this.emitter.emit(g.type,{realAction:g,state:h.getState()});let _=g(E);for(let h of E.payload.actions)this.emitter.emit(`after:${E.type}`,{action:E,state:_});return _}this.emitter.emit(E.type,{action:E,state:h.getState()});let _=g(E);return this.emitter.emit(`after:${E.type}`,{action:E,state:_}),_};serialize(h,g){return function(h,g,E){if(!g.type||!g.id)throw Error("Unknown entity");if(!E[g.type])throw Error(`Serializer not found for ${g.type}`);return function flatten(_){let A=E[_.type];if(!A)return tN;let b=function(h,g){let E=h.requests[g],_=h.mapping[g];if(_&&(!E||!E.resourceUri||h.entities[_][E.resourceUri]))return h.entities[_][E?E.resourceUri:g]}(h,_.id)||(_.id&&_.type?_:null);if(!b)return tN;let C=A(b,h,{isTopLevel:g.id===_.id}),k=C.next();for(;!k.done;){let h=k.value,g=tN;if(h){if(Array.isArray(h)){let E=[];for(let g of h)E.push(flatten(g));g=E}else g=flatten(h)}k=C.next(g)}return k.value===tN?tN:function(h){let g={};for(let[E,_]of h){if(E===tw&&_!==tN)return _;_!==tN&&null!=_&&(g[E]=_)}return g}(k.value)}(g)}(this.getState().iiif,h,g)}toPresentation2(h){return this.serialize(h,tO)}toPresentation3(h){return this.serialize(h,tR)}hydrate(h,g){return this.get(h,g,{skipSelfReturn:!1})}get(h,g,E={}){"string"!=typeof g&&(E=g||{},g=void 0);let{skipSelfReturn:_=!0}=E||{};if(Array.isArray(h))return h.map(h=>this.get(h,E));let A=this.getState();if("string"==typeof h){let E=g||A.iiif.mapping[h];if(!E)return _?null:{id:h,type:"unknown"};h={id:h,type:E}}let b=g||h.type,C=h.id,k=A.iiif.entities[b];if(!k){let g=A.iiif.requests[C];return g&&g.resourceUri!==C?this.get(g.resourceUri,E):_?null:h}return k[h.id]||(_?null:h)}select(h){return h(this.getState())}getStore(){return this.store}getState(){return this.store.getState()}loadManifest(h,g){let E="string"==typeof h?h:h.id;return this.load(E,g)}loadCollection(h,g){let E="string"==typeof h?h:h.id;return this.load(E,g)}load(h,g){let E="string"==typeof h?h:h.id;return g?this.staticFetcher(E,g):this.remoteFetcher(E)}areInputsEqual(h,g){return areInputsEqual(h,g)}subscribe(h,g,E){void 0===E&&(void 0===g||!1===g||!0===g)&&(E=g,g=h,h=h=>h);let _=E?null:h(this.store.getState());return E||g(_,this),this.store.subscribe(()=>{let E=this.store.getState(),A=h(E);_===A||areInputsEqual(_,A)||g(A,this),_=A})}async ensureLoaded(h){let g="string"==typeof h?h:h.id;this.requestStatus(g)||await this.load(g)}requestStatus(h){return this.select(g=>g.iiif.requests[h])}getResourceMeta(h,g){let E=this.getState().iiif.meta[h];return E?g?E[g]:E:void 0}setMetaValue([h,g,E],_){this.dispatch("function"==typeof _?t3.setMetaValueDynamic({id:h,meta:g,key:E,updateValue:_}):t3.setMetaValue({id:h,meta:g,key:E,value:_}))}};var nf=E(1036),nm=E(3041);let ng="object"==typeof self?self:globalThis,deserializer=(h,g)=>{let as=(g,E)=>(h.set(E,g),g),unpair=E=>{if(h.has(E))return h.get(E);let[_,A]=g[E];switch(_){case 0:case -1:return as(A,E);case 1:{let h=as([],E);for(let g of A)h.push(unpair(g));return h}case 2:{let h=as({},E);for(let[g,E]of A)h[unpair(g)]=unpair(E);return h}case 3:return as(new Date(A),E);case 4:{let{source:h,flags:g}=A;return as(new RegExp(h,g),E)}case 5:{let h=as(new Map,E);for(let[g,E]of A)h.set(unpair(g),unpair(E));return h}case 6:{let h=as(new Set,E);for(let g of A)h.add(unpair(g));return h}case 7:{let{name:h,message:g}=A;return as(new ng[h](g),E)}case 8:return as(BigInt(A),E);case"BigInt":return as(Object(BigInt(A)),E)}return as(new ng[_](A),E)};return unpair},deserialize=h=>deserializer(new Map,h)(0),{toString:nE}={},{keys:nT}=Object,typeOf=h=>{let g=typeof h;if("object"!==g||!h)return[0,g];let E=nE.call(h).slice(8,-1);switch(E){case"Array":return[1,""];case"Object":return[2,""];case"Date":return[3,""];case"RegExp":return[4,""];case"Map":return[5,""];case"Set":return[6,""]}return E.includes("Array")?[1,E]:E.includes("Error")?[7,E]:[2,E]},shouldSkip=([h,g])=>0===h&&("function"===g||"symbol"===g),serializer=(h,g,E,_)=>{let as=(h,g)=>{let A=_.push(h)-1;return E.set(g,A),A},pair=_=>{if(E.has(_))return E.get(_);let[A,b]=typeOf(_);switch(A){case 0:{let g=_;switch(b){case"bigint":A=8,g=_.toString();break;case"function":case"symbol":if(h)throw TypeError("unable to serialize "+b);g=null;break;case"undefined":return as([-1],_)}return as([A,g],_)}case 1:{if(b)return as([b,[..._]],_);let h=[],g=as([A,h],_);for(let g of _)h.push(pair(g));return g}case 2:{if(b)switch(b){case"BigInt":return as([b,_.toString()],_);case"Boolean":case"Number":case"String":return as([b,_.valueOf()],_)}if(g&&"toJSON"in _)return pair(_.toJSON());let E=[],C=as([A,E],_);for(let g of nT(_))(h||!shouldSkip(typeOf(_[g])))&&E.push([pair(g),pair(_[g])]);return C}case 3:return as([A,_.toISOString()],_);case 4:{let{source:h,flags:g}=_;return as([A,{source:h,flags:g}],_)}case 5:{let g=[],E=as([A,g],_);for(let[E,A]of _)(h||!(shouldSkip(typeOf(E))||shouldSkip(typeOf(A))))&&g.push([pair(E),pair(A)]);return E}case 6:{let g=[],E=as([A,g],_);for(let E of _)(h||!shouldSkip(typeOf(E)))&&g.push(pair(E));return E}}let{message:C}=_;return as([A,{name:b,message:C}],_)};return pair},serialize_serialize=(h,{json:g,lossy:E}={})=>{let _=[];return serializer(!(g||E),!!g,new Map,_)(h),_};var n_="function"==typeof structuredClone?(h,g)=>g&&("json"in g||"lossy"in g)?deserialize(serialize_serialize(h,g)):structuredClone(h):(h,g)=>deserialize(serialize_serialize(h,g));let Schema=class Schema{constructor(h,g,E){this.property=h,this.normal=g,E&&(this.space=E)}};function merge_merge(h,g){let E={},_={},A=-1;for(;++A<h.length;)Object.assign(E,h[A].property),Object.assign(_,h[A].normal);return new Schema(E,_,g)}function normalize_normalize(h){return h.toLowerCase()}Schema.prototype.property={},Schema.prototype.normal={},Schema.prototype.space=null;let Info=class Info{constructor(h,g){this.property=h,this.attribute=g}};Info.prototype.space=null,Info.prototype.boolean=!1,Info.prototype.booleanish=!1,Info.prototype.overloadedBoolean=!1,Info.prototype.number=!1,Info.prototype.commaSeparated=!1,Info.prototype.spaceSeparated=!1,Info.prototype.commaOrSpaceSeparated=!1,Info.prototype.mustUseProperty=!1,Info.prototype.defined=!1;let nA=0,ny=increment(),nv=increment(),nb=increment(),nx=increment(),nC=increment(),nI=increment(),nk=increment();function increment(){return 2**++nA}let nS=Object.keys(eI);let DefinedInfo=class DefinedInfo extends Info{constructor(h,g,E,_){var A,b;let C=-1;if(super(h,g),_&&(this.space=_),"number"==typeof E)for(;++C<nS.length;){let h=nS[C];A=nS[C],(b=(E&eI[h])===eI[h])&&(this[A]=b)}}};DefinedInfo.prototype.defined=!0;let nN={}.hasOwnProperty;function create(h){let g;let E={},_={};for(g in h.properties)if(nN.call(h.properties,g)){let A=h.properties[g],b=new DefinedInfo(g,h.transform(h.attributes||{},g),A,h.space);h.mustUseProperty&&h.mustUseProperty.includes(g)&&(b.mustUseProperty=!0),E[g]=b,_[normalize_normalize(g)]=g,_[normalize_normalize(b.attribute)]=g}return new Schema(E,_,h.space)}let nw=create({space:"xlink",transform:(h,g)=>"xlink:"+g.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),nO=create({space:"xml",transform:(h,g)=>"xml:"+g.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function caseSensitiveTransform(h,g){return g in h?h[g]:g}function caseInsensitiveTransform(h,g){return caseSensitiveTransform(h,g.toLowerCase())}let nR=create({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:caseInsensitiveTransform,properties:{xmlns:null,xmlnsXLink:null}}),nD=create({transform:(h,g)=>"role"===g?g:"aria-"+g.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:nv,ariaAutoComplete:null,ariaBusy:nv,ariaChecked:nv,ariaColCount:nx,ariaColIndex:nx,ariaColSpan:nx,ariaControls:nC,ariaCurrent:null,ariaDescribedBy:nC,ariaDetails:null,ariaDisabled:nv,ariaDropEffect:nC,ariaErrorMessage:null,ariaExpanded:nv,ariaFlowTo:nC,ariaGrabbed:nv,ariaHasPopup:null,ariaHidden:nv,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:nC,ariaLevel:nx,ariaLive:null,ariaModal:nv,ariaMultiLine:nv,ariaMultiSelectable:nv,ariaOrientation:null,ariaOwns:nC,ariaPlaceholder:null,ariaPosInSet:nx,ariaPressed:nv,ariaReadOnly:nv,ariaRelevant:null,ariaRequired:nv,ariaRoleDescription:nC,ariaRowCount:nx,ariaRowIndex:nx,ariaRowSpan:nx,ariaSelected:nv,ariaSetSize:nx,ariaSort:null,ariaValueMax:nx,ariaValueMin:nx,ariaValueNow:nx,ariaValueText:null,role:null}}),nL=create({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:caseInsensitiveTransform,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:nI,acceptCharset:nC,accessKey:nC,action:null,allow:null,allowFullScreen:ny,allowPaymentRequest:ny,allowUserMedia:ny,alt:null,as:null,async:ny,autoCapitalize:null,autoComplete:nC,autoFocus:ny,autoPlay:ny,blocking:nC,capture:ny,charSet:null,checked:ny,cite:null,className:nC,cols:nx,colSpan:null,content:null,contentEditable:nv,controls:ny,controlsList:nC,coords:nx|nI,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ny,defer:ny,dir:null,dirName:null,disabled:ny,download:nb,draggable:nv,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ny,formTarget:null,headers:nC,height:nx,hidden:ny,high:nx,href:null,hrefLang:null,htmlFor:nC,httpEquiv:nC,id:null,imageSizes:null,imageSrcSet:null,inert:ny,inputMode:null,integrity:null,is:null,isMap:ny,itemId:null,itemProp:nC,itemRef:nC,itemScope:ny,itemType:nC,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ny,low:nx,manifest:null,max:null,maxLength:nx,media:null,method:null,min:null,minLength:nx,multiple:ny,muted:ny,name:null,nonce:null,noModule:ny,noValidate:ny,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ny,optimum:nx,pattern:null,ping:nC,placeholder:null,playsInline:ny,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ny,referrerPolicy:null,rel:nC,required:ny,reversed:ny,rows:nx,rowSpan:nx,sandbox:nC,scope:null,scoped:ny,seamless:ny,selected:ny,shape:null,size:nx,sizes:null,slot:null,span:nx,spellCheck:nv,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nx,step:null,style:null,tabIndex:nx,target:null,title:null,translate:null,type:null,typeMustMatch:ny,useMap:null,value:nv,width:nx,wrap:null,align:null,aLink:null,archive:nC,axis:null,background:null,bgColor:null,border:nx,borderColor:null,bottomMargin:nx,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ny,declare:ny,event:null,face:null,frame:null,frameBorder:null,hSpace:nx,leftMargin:nx,link:null,longDesc:null,lowSrc:null,marginHeight:nx,marginWidth:nx,noResize:ny,noHref:ny,noShade:ny,noWrap:ny,object:null,profile:null,prompt:null,rev:null,rightMargin:nx,rules:null,scheme:null,scrolling:nv,standby:null,summary:null,text:null,topMargin:nx,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nx,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ny,disableRemotePlayback:ny,prefix:null,property:null,results:nx,security:null,unselectable:null}}),nP=create({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:caseSensitiveTransform,properties:{about:nk,accentHeight:nx,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nx,amplitude:nx,arabicForm:null,ascent:nx,attributeName:null,attributeType:null,azimuth:nx,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nx,by:null,calcMode:null,capHeight:nx,className:nC,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nx,diffuseConstant:nx,direction:null,display:null,dur:null,divisor:nx,dominantBaseline:null,download:ny,dx:null,dy:null,edgeMode:null,editable:null,elevation:nx,enableBackground:null,end:null,event:null,exponent:nx,externalResourcesRequired:null,fill:null,fillOpacity:nx,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:nI,g2:nI,glyphName:nI,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nx,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nx,horizOriginX:nx,horizOriginY:nx,id:null,ideographic:nx,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nx,k:nx,k1:nx,k2:nx,k3:nx,k4:nx,kernelMatrix:nk,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nx,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nx,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nx,overlineThickness:nx,paintOrder:null,panose1:null,path:null,pathLength:nx,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:nC,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nx,pointsAtY:nx,pointsAtZ:nx,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nk,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nk,rev:nk,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nk,requiredFeatures:nk,requiredFonts:nk,requiredFormats:nk,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nx,specularExponent:nx,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nx,strikethroughThickness:nx,string:null,stroke:null,strokeDashArray:nk,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nx,strokeOpacity:nx,strokeWidth:null,style:null,surfaceScale:nx,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nk,tabIndex:nx,tableValues:null,target:null,targetX:nx,targetY:nx,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nk,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nx,underlineThickness:nx,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nx,values:null,vAlphabetic:nx,vMathematical:nx,vectorEffect:null,vHanging:nx,vIdeographic:nx,version:null,vertAdvY:nx,vertOriginX:nx,vertOriginY:nx,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nx,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),nM=merge_merge([nO,nw,nR,nD,nL],"html"),nF=merge_merge([nO,nw,nR,nD,nP],"svg");function parse(h){let g=[],E=String(h||""),_=E.indexOf(","),A=0,b=!1;for(;!b;){-1===_&&(_=E.length,b=!0);let h=E.slice(A,_).trim();(h||!b)&&g.push(h),A=_+1,_=E.indexOf(",",A)}return g}function comma_separated_tokens_stringify(h,g){let E=g||{},_=""===h[h.length-1]?[...h,""]:h;return _.join((E.padRight?" ":"")+","+(!1===E.padLeft?"":" ")).trim()}let nB=/[#.]/g,nH=/^data[-\w.:]+$/i,nU=/-[a-z]/g,nz=/[A-Z]/g;function find(h,g){let E=normalize_normalize(g),_=g,A=Info;if(E in h.normal)return h.property[h.normal[E]];if(E.length>4&&"data"===E.slice(0,4)&&nH.test(g)){if("-"===g.charAt(4)){let h=g.slice(5).replace(nU,camelcase);_="data"+h.charAt(0).toUpperCase()+h.slice(1)}else{let h=g.slice(4);if(!nU.test(h)){let E=h.replace(nz,kebab);"-"!==E.charAt(0)&&(E="-"+E),g="data"+E}}A=DefinedInfo}return new A(_,g)}function kebab(h){return"-"+h.toLowerCase()}function camelcase(h){return h.charAt(1).toUpperCase()}function space_separated_tokens_parse(h){let g=String(h||"").trim();return g?g.split(/[ \t\n\r\f]+/g):[]}function space_separated_tokens_stringify(h){return h.join(" ").trim()}let nG=new Set(["button","menu","reset","submit"]),n$={}.hasOwnProperty;function createH(h,g,E){let _=E&&function(h){let g={},E=-1;for(;++E<h.length;)g[h[E].toLowerCase()]=h[E];return g}(E);return function(E,A,...b){let C,k=-1;if(null==E)C={type:"root",children:[]},b.unshift(A);else{var S;if((C=function(h,g){let E,_;let A=h||"",b={},C=0;for(;C<A.length;){nB.lastIndex=C;let h=nB.exec(A),g=A.slice(C,h?h.index:A.length);g&&(E?"#"===E?b.id=g:Array.isArray(b.className)?b.className.push(g):b.className=[g]:_=g,C+=g.length),h&&(E=h[0],C++)}return{type:"element",tagName:_||g||"div",properties:b,children:[]}}(E,g)).tagName=C.tagName.toLowerCase(),_&&n$.call(_,C.tagName)&&(C.tagName=_[C.tagName]),S=C.tagName,!(null==A||"object"!=typeof A||Array.isArray(A))&&("input"===S||!A.type||"string"!=typeof A.type||!("children"in A&&Array.isArray(A.children))&&("button"===S?nG.has(A.type.toLowerCase()):!("value"in A)))){let g;for(g in A)n$.call(A,g)&&function(h,g,E,_){let A;let b=find(h,E),C=-1;if(null!=_){if("number"==typeof _){if(Number.isNaN(_))return;A=_}else A="boolean"==typeof _?_:"string"==typeof _?b.spaceSeparated?space_separated_tokens_parse(_):b.commaSeparated?parse(_):b.commaOrSpaceSeparated?space_separated_tokens_parse(parse(_).join(" ")):parsePrimitive(b,b.property,_):Array.isArray(_)?_.concat():"style"===b.property?function(h){let g;let E=[];for(g in h)n$.call(h,g)&&E.push([g,h[g]].join(": "));return E.join("; ")}(_):String(_);if(Array.isArray(A)){let h=[];for(;++C<A.length;){let g=parsePrimitive(b,b.property,A[C]);h[C]=g}A=h}if("className"===b.property&&Array.isArray(g.className)){let h=A;A=g.className.concat(h)}g[b.property]=A}}(h,C.properties,g,A[g])}else b.unshift(A)}for(;++k<b.length;)!function addChild(h,g){let E=-1;if(null==g);else if("string"==typeof g||"number"==typeof g)h.push({type:"text",value:String(g)});else if(Array.isArray(g))for(;++E<g.length;)addChild(h,g[E]);else if("object"==typeof g&&"type"in g)"root"===g.type?addChild(h,g.children):h.push(g);else throw Error("Expected node, nodes, or string, got `"+g+"`")}(C.children,b[k]);return"element"===C.type&&"template"===C.tagName&&(C.content={type:"root",children:C.children},C.children=[]),C}}function parsePrimitive(h,g,E){if("string"==typeof E){if(h.number&&E&&!Number.isNaN(Number(E)))return Number(E);if((h.boolean||h.overloadedBoolean)&&(""===E||normalize_normalize(E)===normalize_normalize(g)))return!0}return E}let nj=createH(nM,"div"),nV=createH(nF,"g",["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]),nq=/\r?\n|\r/g,nW={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nY={}.hasOwnProperty,nQ=Object.prototype;function one(h,g){let E;switch(g.nodeName){case"#comment":return E={type:"comment",value:g.data},patch(h,g,E),E;case"#document":case"#document-fragment":{let _="mode"in g&&("quirks"===g.mode||"limited-quirks"===g.mode);if(E={type:"root",children:lib_all(h,g.childNodes),data:{quirksMode:_}},h.file&&h.location){let g=String(h.file),_=function(h){let g=String(h),E=[];for(nq.lastIndex=0;nq.test(g);)E.push(nq.lastIndex);return E.push(g.length+1),{toPoint:function(h){let g=-1;if("number"==typeof h&&h>-1&&h<E[E.length-1]){for(;++g<E.length;)if(E[g]>h)return{line:g+1,column:h-(g>0?E[g-1]:0)+1,offset:h}}},toOffset:function(h){let g=h&&h.line,_=h&&h.column;if("number"==typeof g&&"number"==typeof _&&!Number.isNaN(g)&&!Number.isNaN(_)&&g-1 in E){let h=(E[g-2]||0)+_-1||0;if(h>-1&&h<E[E.length-1])return h}}}}(g),A=_.toPoint(0),b=_.toPoint(g.length);E.position={start:A,end:b}}return E}case"#documentType":return patch(h,g,E={type:"doctype"}),E;case"#text":return E={type:"text",value:g.value},patch(h,g,E),E;default:return function(h,g){let E=h.schema;h.schema=g.namespaceURI===nW.svg?nF:nM;let _=-1,A={};for(;++_<g.attrs.length;){let h=g.attrs[_],E=(h.prefix?h.prefix+":":"")+h.name;nY.call(nQ,E)||(A[E]=h.value)}let b="svg"===h.schema.space?nV:nj,C=b(g.tagName,A,lib_all(h,g.childNodes));if(patch(h,g,C),"template"===C.tagName){let E=g.sourceCodeLocation,_=E&&E.startTag&&position(E.startTag),A=E&&E.endTag&&position(E.endTag),b=one(h,g.content);_&&A&&h.file&&(b.position={start:_.end,end:A.start}),C.content=b}return h.schema=E,C}(h,g)}}function lib_all(h,g){let E=-1,_=[];for(;++E<g.length;){let A=one(h,g[E]);_.push(A)}return _}function patch(h,g,E){if("sourceCodeLocation"in g&&g.sourceCodeLocation&&h.file){let _=function(h,g,E){let _=position(E);if("element"===g.type){let A=g.children[g.children.length-1];if(_&&!E.endTag&&A&&A.position&&A.position.end&&(_.end=Object.assign({},A.position.end)),h.verbose){let _;let A={};if(E.attrs)for(_ in E.attrs)nY.call(E.attrs,_)&&(A[find(h.schema,_).property]=position(E.attrs[_]));E.startTag;let b=position(E.startTag),C=E.endTag?position(E.endTag):void 0,k={opening:b};C&&(k.closing=C),k.properties=A,g.data={position:k}}}return _}(h,E,g.sourceCodeLocation);_&&(h.location=!0,E.position=_)}}function position(h){let g=point({line:h.startLine,column:h.startCol,offset:h.startOffset}),E=point({line:h.endLine,column:h.endCol,offset:h.endOffset});return g||E?{start:g,end:E}:void 0}function point(h){return h.line&&h.column?h:void 0}let nX={}.hasOwnProperty;function zwitch(h,g){let E=g||{};function one(g,...E){let _=one.invalid,A=one.handlers;if(g&&nX.call(g,h)){let E=String(g[h]);_=nX.call(A,E)?A[E]:one.unknown}if(_)return _.call(this,g,...E)}return one.handlers=E.handlers||{},one.invalid=E.invalid,one.unknown=E.unknown,one}let nK={},nZ={}.hasOwnProperty,nJ=zwitch("type",{handlers:{root:function(h,g){let E={nodeName:"#document",mode:(h.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return E.childNodes=hast_util_to_parse5_lib_all(h.children,E,g),lib_patch(h,E),E},element:function(h,g){let E;let _=g;"element"===h.type&&"svg"===h.tagName.toLowerCase()&&"html"===g.space&&(_=nF);let A=[];if(h.properties){for(E in h.properties)if("children"!==E&&nZ.call(h.properties,E)){let g=function(h,g,E){let _=find(h,g);if(!1===E||null==E||"number"==typeof E&&Number.isNaN(E)||!E&&_.boolean)return;Array.isArray(E)&&(E=_.commaSeparated?comma_separated_tokens_stringify(E):space_separated_tokens_stringify(E));let A={name:_.attribute,value:!0===E?"":String(E)};if(_.space&&"html"!==_.space&&"svg"!==_.space){let h=A.name.indexOf(":");h<0?A.prefix="":(A.name=A.name.slice(h+1),A.prefix=_.attribute.slice(0,h)),A.namespace=nW[_.space]}return A}(_,E,h.properties[E]);g&&A.push(g)}}let b=_.space,C={nodeName:h.tagName,tagName:h.tagName,attrs:A,namespaceURI:nW[b],childNodes:[],parentNode:null};return C.childNodes=hast_util_to_parse5_lib_all(h.children,C,_),lib_patch(h,C),"template"===h.tagName&&h.content&&(C.content=function(h,g){let E={nodeName:"#document-fragment",childNodes:[]};return E.childNodes=hast_util_to_parse5_lib_all(h.children,E,g),lib_patch(h,E),E}(h.content,_)),C},text:function(h){let g={nodeName:"#text",value:h.value,parentNode:null};return lib_patch(h,g),g},comment:function(h){let g={nodeName:"#comment",data:h.value,parentNode:null};return lib_patch(h,g),g},doctype:function(h){let g={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return lib_patch(h,g),g}}});function hast_util_to_parse5_lib_all(h,g,E){let _=-1,A=[];if(h)for(;++_<h.length;){let b=nJ(h[_],E);b.parentNode=g,A.push(b)}return A}function lib_patch(h,g){let E=h.position;E&&E.start&&E.end&&(E.start.offset,E.end.offset,g.sourceCodeLocation={startLine:E.start.line,startCol:E.start.column,startOffset:E.start.offset,endLine:E.end.line,endCol:E.end.column,endOffset:E.end.offset})}let n0=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],n1=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);(C=ei=ei||(ei={}))[C.EOF=-1]="EOF",C[C.NULL=0]="NULL",C[C.TABULATION=9]="TABULATION",C[C.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",C[C.LINE_FEED=10]="LINE_FEED",C[C.FORM_FEED=12]="FORM_FEED",C[C.SPACE=32]="SPACE",C[C.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",C[C.QUOTATION_MARK=34]="QUOTATION_MARK",C[C.NUMBER_SIGN=35]="NUMBER_SIGN",C[C.AMPERSAND=38]="AMPERSAND",C[C.APOSTROPHE=39]="APOSTROPHE",C[C.HYPHEN_MINUS=45]="HYPHEN_MINUS",C[C.SOLIDUS=47]="SOLIDUS",C[C.DIGIT_0=48]="DIGIT_0",C[C.DIGIT_9=57]="DIGIT_9",C[C.SEMICOLON=59]="SEMICOLON",C[C.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",C[C.EQUALS_SIGN=61]="EQUALS_SIGN",C[C.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",C[C.QUESTION_MARK=63]="QUESTION_MARK",C[C.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",C[C.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",C[C.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",C[C.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",C[C.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",C[C.GRAVE_ACCENT=96]="GRAVE_ACCENT",C[C.LATIN_SMALL_A=97]="LATIN_SMALL_A",C[C.LATIN_SMALL_F=102]="LATIN_SMALL_F",C[C.LATIN_SMALL_X=120]="LATIN_SMALL_X",C[C.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",C[C.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER";let n2={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function isSurrogate(h){return h>=55296&&h<=57343}function isControlCodePoint(h){return 32!==h&&10!==h&&13!==h&&9!==h&&12!==h&&h>=1&&h<=31||h>=127&&h<=159}function isUndefinedCodePoint(h){return h>=64976&&h<=65007||n1.has(h)}(k=es=es||(es={})).controlCharacterInInputStream="control-character-in-input-stream",k.noncharacterInInputStream="noncharacter-in-input-stream",k.surrogateInInputStream="surrogate-in-input-stream",k.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",k.endTagWithAttributes="end-tag-with-attributes",k.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",k.unexpectedSolidusInTag="unexpected-solidus-in-tag",k.unexpectedNullCharacter="unexpected-null-character",k.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",k.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",k.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",k.missingEndTagName="missing-end-tag-name",k.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",k.unknownNamedCharacterReference="unknown-named-character-reference",k.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",k.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",k.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",k.eofBeforeTagName="eof-before-tag-name",k.eofInTag="eof-in-tag",k.missingAttributeValue="missing-attribute-value",k.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",k.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",k.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",k.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",k.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",k.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",k.missingDoctypePublicIdentifier="missing-doctype-public-identifier",k.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",k.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",k.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",k.cdataInHtmlContent="cdata-in-html-content",k.incorrectlyOpenedComment="incorrectly-opened-comment",k.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",k.eofInDoctype="eof-in-doctype",k.nestedComment="nested-comment",k.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",k.eofInComment="eof-in-comment",k.incorrectlyClosedComment="incorrectly-closed-comment",k.eofInCdata="eof-in-cdata",k.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",k.nullCharacterReference="null-character-reference",k.surrogateCharacterReference="surrogate-character-reference",k.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",k.controlCharacterReference="control-character-reference",k.noncharacterCharacterReference="noncharacter-character-reference",k.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",k.missingDoctypeName="missing-doctype-name",k.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",k.duplicateAttribute="duplicate-attribute",k.nonConformingDoctype="non-conforming-doctype",k.missingDoctype="missing-doctype",k.misplacedDoctype="misplaced-doctype",k.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",k.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",k.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",k.openElementsLeftAfterEof="open-elements-left-after-eof",k.abandonedHeadElementChild="abandoned-head-element-child",k.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",k.nestedNoscriptInHead="nested-noscript-in-head",k.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text";let Preprocessor=class Preprocessor{constructor(h){this.handler=h,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(h){let{line:g,col:E,offset:_}=this;return{code:h,startLine:g,endLine:g,startCol:E,endCol:E,startOffset:_,endOffset:_}}_err(h){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(h)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(h){if(this.pos!==this.html.length-1){let g=this.html.charCodeAt(this.pos+1);if(g>=56320&&g<=57343)return this.pos++,this._addGap(),(h-55296)*1024+9216+g}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ei.EOF;return this._err(es.surrogateInInputStream),h}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(h,g){this.html.length>0?this.html+=h:this.html=h,this.endOfChunkHit=!1,this.lastChunkWritten=g}insertHtmlAtCurrentPos(h){this.html=this.html.substring(0,this.pos+1)+h+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(h,g){if(this.pos+h.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(g)return this.html.startsWith(h,this.pos);for(let g=0;g<h.length;g++){let E=32|this.html.charCodeAt(this.pos+g);if(E!==h.charCodeAt(g))return!1}return!0}peek(h){let g=this.pos+h;if(g>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ei.EOF;let E=this.html.charCodeAt(g);return E===ei.CARRIAGE_RETURN?ei.LINE_FEED:E}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ei.EOF;let h=this.html.charCodeAt(this.pos);if(h===ei.CARRIAGE_RETURN)return this.isEol=!0,this.skipNextNewLine=!0,ei.LINE_FEED;if(h===ei.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine))return this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance();this.skipNextNewLine=!1,isSurrogate(h)&&(h=this._processSurrogate(h));let g=null===this.handler.onParseError||h>31&&h<127||h===ei.LINE_FEED||h===ei.CARRIAGE_RETURN||h>159&&h<64976;return g||this._checkForProblematicCharacters(h),h}_checkForProblematicCharacters(h){isControlCodePoint(h)?this._err(es.controlCharacterInInputStream):isUndefinedCodePoint(h)&&this._err(es.noncharacterInInputStream)}retreat(h){for(this.pos-=h;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}};function getTokenAttr(h,g){for(let E=h.attrs.length-1;E>=0;E--)if(h.attrs[E].name===g)return h.attrs[E].value;return null}(S=el=el||(el={}))[S.CHARACTER=0]="CHARACTER",S[S.NULL_CHARACTER=1]="NULL_CHARACTER",S[S.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",S[S.START_TAG=3]="START_TAG",S[S.END_TAG=4]="END_TAG",S[S.COMMENT=5]="COMMENT",S[S.DOCTYPE=6]="DOCTYPE",S[S.EOF=7]="EOF",S[S.HIBERNATION=8]="HIBERNATION";var n3=new Uint16Array('<\xd5\x00\x00\x00\x00\x00\x00EMabcfglmnoprstu\\bfms\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcflig\xc6P&cute\xc1reve;iyx}rc\xc2;r;\ud835\udd04rave\xc0pha;acr;d;gp\x9d\xa1on;f;\ud835\udd38plyFunction;ing\xc5cs\xbe\xc3r;\ud835\udc9cign;ilde\xc3ml\xc4aceforsu\xe5\xfb\xfecr\xea\xf2kslash;\xf6\xf8;ed;y;crtause;noullis;a;r;\ud835\udd05pf;\ud835\udd39eve;c\xf2mpeq;HOacdefhilorsucy;PY\xa9cpyute;;italDifferentialD;leys;aeioron;dil\xc7rc;nint;ot;dnilla;terDot;\xf2i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;\ud835\udc9ep;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;\ud835\udd07afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\x00\x00\x00\x00f;\ud835\udd3b;DEot;qual;bleCDLRUVontourIntegra\xeco\x00\x00\xbbnArrow;eoftARTrrow;ightArrow;e\xe5ngLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\x00\x00rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\x00\x00ightVector;eeVector;ector;Bar;ight\x00eeVector;ector;Bar;ee;Arrow;ctr;\ud835\udc9frok;NTacdfglmopqstuxG;H\xd0cute\xc9aiyron;rc\xca;ot;r;\ud835\udd08rave\xc8ement;apcr;ty\x00\x00mallSquare;erySmallSquare;gpon;f;\ud835\udd3csilon;uail;Tilde;librium;cir;m;a;ml\xcbipsts;onentialE;cfiosy;r;\ud835\udd09lled\x00\x00mallSquare;erySmallSquare;\x00\x00\x00f;\ud835\udd3dAll;riertrf;c\xf2JTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;\ud835\udd0a;pf;\ud835\udd3eeaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;\ud835\udca2;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\x00f;izontalLine;ct\xf2rok;mpownHum\xf0qual;EJOacdfgmnostucy;lig;cy;cute\xcdiyrc\xce;ot;r;rave\xcc;apcgr;inaryI;lie\xf3\x00;egrral;section;isibleCTomma;imes;gpton;f;\ud835\udd40a;cr;ilde;\x00cy;l\xcfcfosuiyrc;;r;\ud835\udd0dpf;\ud835\udd41\x00r;\ud835\udca5rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;\ud835\udd0epf;\ud835\udd42cr;\ud835\udca6JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\x00bleBracket;n\x00eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ight\xe1sEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;\ud835\udd0f;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftaright\xe1ight\xe1f;\ud835\udd43erLReftArrow;ightArrow;cht\xf2;rok;;acefiosup;y;dliumSpace;lintrf;r;\ud835\udd10nusPlus;pf;\ud835\udd44c\xf2;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicn\xeberyThi\xeetedGLreaterGreate\xf2essLes\xf3Line;r;\ud835\udd11Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;\ud835\udca9ilde\xd1;Eacdfgmoprstuvlig;cute\xd3iyrc\xd4;blac;r;\ud835\udd12rave\xd2aeicr;ga;cron;pf;\ud835\udd46enCurlyDQoubleQuote;uote;;clr;\ud835\udcaaash\xd8ide\xd5es;ml\xd6erBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;\ud835\udd13i;;usMinus;ipncareplan\xe5f;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;\ud835\udcab;UfosOT"r;\ud835\udd14pf;cr;\ud835\udcacBEacefhiorsuarr;G\xaecnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;r\xbbo;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\x00bleBracket;n\x00eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;\ud835\udd16ortDLRUownArrow\xbbeftArrow\xbbightArrow\xbbpArrow;gma;allCircle;pf;\ud835\udd4a\x00\x00t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;\ud835\udcaear;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th\xe1;;esrset;Equal;et\xbbHRSacfhiorsORN\xdeADE;Hccy;y;bu;;aeyron;dil;;r;\ud835\udd17ei\x00efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;\ud835\udd4bipleDot;ctr;\ud835\udcafrok;\x00\x00\x00\x00\x00\x00\x00crute\xdar;ocir;r\x00y;ve;iyrc\xdb;blac;r;\ud835\udd18rave\xd9acr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;\ud835\udd4cADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;own\xe1erLReftArrow;ightArrow;i;lon;ing;cr;\ud835\udcb0ilde;ml\xdcDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;\ud835\udd19pf;\ud835\udd4dcr;\ud835\udcb1dash;cefosirc;dge;r;\ud835\udd1apf;\ud835\udd4ecr;\ud835\udcb2fiosr;\ud835\udd1b;pf;\ud835\udd4fcr;\ud835\udcb3AIUacfosucy;cy;cy;cute\xddiyrc;;r;\ud835\udd1cpf;\ud835\udd50cr;\ud835\udcb4ml;Hacdefoscy;cute;ayron;;ot;\x00oWidt\xe8a;r;pf;cr;\ud835\udcb5\x00\x00\x00\x00\x00\x00\x00cute\xe1reve;;Ediuy;;rc\xe2te\xb4;lig\xe6;r\xb2;\ud835\udd1erave\xe0epfpsym;\xe8ha;apcclr;g;\x00\x00;adsvnd;;lope;;;elmrsz;e\xbbsd;a;;;;;;;;t;vb;d;pth;\xbb\xb9arr;gpon;f;\ud835\udd52;Eaeiop;cir;;d;s;rox;e\xf1ing\xe5ctyr;\ud835\udcb6;mp;e\xf1ilde\xe3ml\xe4cionin\xf4nt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;ge\xbbrk;tbrk;oy;quo;cmprtaus;eptyv;s\xe9no\xf5ahw;;een;r;\ud835\udd1fgcostuvwaiu\xf0rc;p\xbbdptot;lus;imes;\x00\x00cup;ar;riangleduown;p;plus;e\xe5\xe5arow;akocnklstozenge;riangle;dlrown;eft;ight;k;\x00\x00;;4;ck;eo;q=uiv;t;ptwxf;\ud835\udd53;tom\xbbtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbar\xa6ceior;\ud835\udcb7mi;m;el;bh;sub;l;et\xbbp;Ee;;q\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00cprute;;abcdsnd;rcup;aup;p;ot;;eot;\xeeaeiu\x00s;on;dil\xe7rc;ps;sm;ot;dmnil\xb8ptyv;t\xa2;er\xe4r;\ud835\udd20ceiy;ck;mark\xbb;r;Ecefms;;elq;e\x00\x00rrowlreft;ight;RSacd\xbb;st;irc;ash;nint;id;cir;ubs;uit\xbb\x00on;e;q\xc7\xc6\x00\x00a;t;;fl\xeeemxent\xbbe\xf3\x00;dot;n\xf4fry;\ud835\udd54o\xe4\xa9;sr;aorr;ss;cur;\ud835\udcb8bp;e;;e;dot;delprvwarrlr;;\x00\x00r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\x00\x00re\xe3u\xe3ee;edge;en\xa4earrowlreft\xbbight\xbbe\xe4cionin\xf4nt;lcty;AHabcdefhijlorstuwzr\xf2ar;glrsger;eth;\xf2h;v\xbbarow;a\xe3ayron;;;aogrr;tseq;glm\xb0ta;ptyv;irsht;;\ud835\udd21arlr\xbb\xbbaegsvm;osnd;suit;amma;in;;iode\xf7;ontimes;n\xf8cy;c\x00\x00rn;op;lptuwlar;f;\ud835\udd55;empsq;dot;inus;lus;quare;blebarwedg\xe5\xfanadhownarrow\xf3arpoonlref\xf4igh\xf4karo\xf7\x00\x00rn;op;cotry;\ud835\udcb9;l;rok;drot;i;fahr\xf2a\xf2angle;ciy;grarr;DacdefglmnopqrstuxDoo\xf4csute\xe9ter;aioyron;r;c\xealon;;ot;Drot;;\ud835\udd22;rsave\xe8;dot;;ilsnters;;;dot;apscr;ty;svet\xbbp1;;;gs;p;gpon;f;\ud835\udd56alsr;sl;us;i;lvon\xbb;csuviorc\xbb\x00\x00\xedantgltr\xbbess\xbbaeils;st;v;DD;parsl;Daot;rr;cdir;o\xf4ah;\xf0mrl\xebo;cipl;s\xf4eoctatio\xeenential\xe5\x00\x00\x00\x00\x00\x00\x00llingdotse\xf1y;male;ilrlig;\x00\x00g;ig;;\ud835\udd23lig;lig;fjaltt;ig;ns;of;\x00f;\ud835\udd57ak;v;artint;aocs\x00\x00\xbd;\xbc;;;\x00;;\x00\x00\xbe;;5;\x00;;8;l;wn;cr;\ud835\udcbbEabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan\xf4;cdlc;ot;o;l;;es;r;\ud835\udd24;gmel;cy;;Eaj;;;Eaes;p;prox\xbb;q;qim;pf;\ud835\udd58cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\x00pro\xf8r;qlqles\xf3i\xedenrtneqq;\xc5Aabcefkosyr\xf2ilmrrs\xf0f\xbbil\xf4drcy;;cwir;;ar;irc;alrrts;uit\xbblip;con;r;\ud835\udd25sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;\ud835\udd59bar;cltr;\ud835\udcbdas\xe8rok;bpull;hen\xbb\x00\x00\x00\x00\x00\x00cute\xed;iyrc\xee;cxy;cl\xa1fr;\ud835\udd26rave\xec;inoinnt;t;fin;ta;lig;aopcgtr;elpin\xe5ar\xf4h;f;ed;;cfotare;in;tie;do\xf4;celpal;grer\xf3\xe3arhk;rod;cgpty;on;f;\ud835\udd5aa;uest\xbfcir;\ud835\udcben;Edsv;ot;;v;;ilde;\x00cy;l\xefcfmosuiyrc;;r;\ud835\udd27ath;pf;\ud835\udd5b\x00r;\ud835\udcbfrcy;kcy;acfghjosppa;v;eydil;;r;\ud835\udd28reen;cy;cy;pf;\ud835\udd5ccr;\ud835\udcc0ABEHabcdefghjlmnoprstuvartr\xf2\xf2ail;arr;;g;ar;\x00\x00\x00\x00\x00\x00\x00\x00\x00ute;mptyv;ra\xeebda;g;dl;\xe5;uo\xabr;bfhlpst;fs;s;\xebp;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;ta\xe9arpoonduown\xbbp\xbbeftarrows;ightahsrrow;sarpoon\xf3quigarro\xf7hreetimes;;qslan\xf4;cdgsc;ot;o;r;;es;adegsppro\xf8ot;qgq\xf4gt\xf2\xf4i\xedilrsht;;\ud835\udd29;E;rdu;l;lk;cy;;achtr\xf2orne\xf2ard;ri;iodot;ust;ache\xbbEaes;p;prox\xbb;q;qim;abnoptwznrg;r;r\xebglmreftaright\xe1apsto;ight\xe1parrowlref\xf4ight;aflr;;\ud835\udd5dus;imes;st;\xe1;efnge\xbbar;lt;achmtr\xf2orne\xf2ar;d;;ri;achiqtquo;r;\ud835\udcc1m;eg;;buo;r;rok;<;cdhilqrci;r;re\xe5mes;arr;uest;Piar;;efrdushar;har;enrtneqq;\xc5DacdefhilnopsuDot;clprr\xafet;;ese\xbb;sto;dluow\xeeef\xf4\xf0ker;oymma;;ash;asuredangle\xbbr;\ud835\udd2ao;cdnro\xb5;acds\xf4ir;ot\xb7us;bd;u;p;\xf2\xf0dpels;f;\ud835\udd5ectr;\ud835\udcc2pos\xbb;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptla\xbbute;g;;Eiop;d;s;ro\xf8ur;al;s\x00p\xa0mp;eaeouy\x00;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;ui\xf6eiar;\xedist;sr;\ud835\udd2bEest;qs;qslan\xf4i\xed;r\xbbAapr\xf2rr;ar;;sv;d;cy;AEadestr\xf2;rr;r;;fqstarrro\xf7ightarro\xf7;qslan\xf4;s\xbbi\xed;ri;ei\xe4ptf;\ud835\udd5f\xac;inn;Edv;ot;;;i;v;;aorr;astlle\xecl;;lint;;ceu\xe5;c;e\xf1Aaitr\xf2rr;cw;;ghtarrow\xbbri;echimpqu;ceru\xe5;\ud835\udcc3ort\x00\x00ar\xe1m;e;qsubp\xe5\xe5bcp;Ees;et;eq;qc;e\xf1;Ees;et;eq;qgilr\xeclde\xf1\xe7ianglelreft;e\xf1ight;e\xf1;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00csute\xf3iyr;c\xf4;abioslac;v;old;lig;crir;;\ud835\udd2c\x00\x00\x00n;ave\xf2;bmar;acitr\xf2irr;oss;n\xe5;aeicr;ga;cdnron;;pf;\ud835\udd60aelr;rp;;adiosvr\xf2;efmr;of\xbb\xaa\xbagof;r;lope;;clo\xf2ash\xf8l;ide\xf5es;as;ml\xf6bar;\x00\x00\x00\x00\x00\x00\x00\x00\x00r;ast\xb6;lle\xec\x00\x00m;;y;rcimptnt;od;il;enk;r;\ud835\udd2dimo;v;ma\xf4ne;;tvchfork\xbb;aunckk;h;\xf6s;abcdemstcir;ir;ou;;n\xb1im;wo;ipuntint;f;\ud835\udd61nd\xa3;Eaceinosu;p;u\xe5;c;acensppro\xf8urlye\xf1\xf1aespprox;qq;im;i\xedme;sEas\xf0dfpalslar;ine;urf;;t\xefrel;cir;\ud835\udcc5;ncsp;fiopsur;\ud835\udd2epf;\ud835\udd62rime;cr;\ud835\udcc6aeoteirnion\xf3nt;st;e\xf1\xf4ABHabcdefhilmnoprstuxartr\xf2\xf2ail;ar\xf2ar;cdenqrteu;te;i\xe3mptyv;g;del;;\xe5uo\xbbr;abcfhlpstwp;;fs;;s;\xeb\xf0l;im;l;;aiil;o;nal\xf3abrr\xf2rk;akcek;;es;ldu;;aeuyron;diil;\xec\xe2;clqsa;dhar;uo;rh;acgl;ipsn\xe5ar\xf4t;ilrsht;;\ud835\udd2faordu\xbb;l;;v;gnshtahlrstrrow;ta\xe9arpoonduow\xeep\xbbeftahrrow\xf3arpoon\xf3ightarrows;quigarro\xf7hreetimes;g;ingdotse\xf1ahmr\xf2a\xf2;oust;ache\xbbmid;abptnrg;r;r\xebaflr;;\ud835\udd63us;imes;apr;gt;olint;ar\xf2achqquo;r;\ud835\udcc7buo;rhirre\xe5mes;i;efltri;luhar;;\x00\x00\x00\x00\x00\x00\x00cute;qu\xef;Eaceinpsy;\x00;on;u\xe5;dil;rc;Eas;p;im;olint;i\xed;ot;be;Aacmstxrr;rhr\xeb;ot\xa7i;war;min\xf0nu\xf3\xf1t;r;o\ud835\udd30acoyrp;hycy;;rt\x00\x00i\xe4ara\xec\xadgmma;fv;;deglnprot;;q;E;;E;e;lus;arr;ar\xf2aeitlslsetm\xe9hp;parsl;dle;;e;s;flptcy;;b;ar;f;\ud835\udd64adres;uit\xbbcsuaup;s;p;s;ubp;eset;e\xf1;eset;e\xf1;afr\xbbar\xf2cemtr;\ud835\udcc8tm\xee\xf1i\xecar\xe6arr;fanighteppsilo\xeeh\xe9s\xbbbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acensppro\xf8urlye\xf1\xf1aesppro\xf8q\xf1g;123;Edehlmnps\xb9\xb2\xb3;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr\xeb;owar;lig\xdf\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00get;;r\xebaeyron;dil;;lrec;r;\ud835\udd31eiko\x00e4fa;svym;cnkasppro\xf8im\xbbs\xf0as\xf0rn\xfees\xd7;bd;ar;;eps\xe1;bcfot;ir;;o\ud835\udd65rk;\xe1rime;aipd\xe5adempstngle;dlqrown\xbbeft;e\xf1;ight;e\xf1ot;inus;lus;b;ime;ezium;chtry;\ud835\udcc9;cy;rok;iox\xf4headlreftarro\xf7ightarrow\xbbAHabcdfghlmoprstuwr\xf2ar;crute\xfa\xf2r\x00y;ve;iyrc\xfb;abhr\xf2lac;a\xf2irsht;;\ud835\udd32rave\xf9rlr\xbb\xbblk;ct\x00\x00rn;er\xbbop;ri;alcr;\xa8gpon;f;\ud835\udd66adhlsuown\xe1arpoonlref\xf4igh\xf4i;hl\xbbon\xbbparrows;cit\x00\x00rn;er\xbbop;ng;ri;cr;\ud835\udccadirot;lde;i;f\xbbamr\xf2l\xfcangle;ABDacdeflnoprszr\xf2ar;v;as\xe8nrgrt;eknprstapp\xe1othin\xe7hirop\xf4;h\xefiugm\xe1bpsetneq;q;setneq;q;hret\xe1ianglelreft\xbbight\xbby;ash\xbbelr;bear;q;lip;bta\xf2r;\ud835\udd33tr\xe9subp\xbb\xbbpf;\ud835\udd67ro\xf0tr\xe9cur;\ud835\udccbbpnEe\xbbnEe\xbbigzag;cefoprsirc;dibgar;e;q;erp;r;\ud835\udd34pf;\ud835\udd68;eat\xe8cr;\ud835\udccc\x00\x00\x00\x00\x00\x00\x00tr\xe9r;\ud835\udd35Aar\xf2r\xf2;Aar\xf2r\xf2a\xf0is;dptfl;\ud835\udd69im\xe5Aar\xf2r\xf2cqr;\ud835\udccdptr\xe9acefiosucuyte\xfd;iyrc;;n\xa5r;\ud835\udd36cy;pf;\ud835\udd6acr;\ud835\udccecmy;l\xffacdefhioswcute;ayron;;ot;ettr\xe6a;r;\ud835\udd37cy;grarr;pf;\ud835\udd6bcr;\ud835\udccfjn;j;'.split("").map(h=>h.charCodeAt(0))),n4=new Uint16Array("aglq	\x15\x18\x1b\x0f\x00\x00\x12p;os;t;t;uot;".split("").map(h=>h.charCodeAt(0)));let n5=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),n6=null!==(ec=String.fromCodePoint)&&void 0!==ec?ec:function(h){let g="";return h>65535&&(h-=65536,g+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),g+=String.fromCharCode(h)};function isNumber(h){return h>=eu.ZERO&&h<=eu.NINE}(N=eu||(eu={}))[N.NUM=35]="NUM",N[N.SEMI=59]="SEMI",N[N.EQUALS=61]="EQUALS",N[N.ZERO=48]="ZERO",N[N.NINE=57]="NINE",N[N.LOWER_A=97]="LOWER_A",N[N.LOWER_F=102]="LOWER_F",N[N.LOWER_X=120]="LOWER_X",N[N.LOWER_Z=122]="LOWER_Z",N[N.UPPER_A=65]="UPPER_A",N[N.UPPER_F=70]="UPPER_F",N[N.UPPER_Z=90]="UPPER_Z",(w=ed||(ed={}))[w.VALUE_LENGTH=49152]="VALUE_LENGTH",w[w.BRANCH_LENGTH=16256]="BRANCH_LENGTH",w[w.JUMP_TABLE=127]="JUMP_TABLE",(R=ep||(ep={}))[R.EntityStart=0]="EntityStart",R[R.NumericStart=1]="NumericStart",R[R.NumericDecimal=2]="NumericDecimal",R[R.NumericHex=3]="NumericHex",R[R.NamedEntity=4]="NamedEntity",(L=eh||(eh={}))[L.Legacy=0]="Legacy",L[L.Strict=1]="Strict",L[L.Attribute=2]="Attribute";let EntityDecoder=class EntityDecoder{constructor(h,g,E){this.decodeTree=h,this.emitCodePoint=g,this.errors=E,this.state=ep.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=eh.Strict}startEntity(h){this.decodeMode=h,this.state=ep.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(h,g){switch(this.state){case ep.EntityStart:if(h.charCodeAt(g)===eu.NUM)return this.state=ep.NumericStart,this.consumed+=1,this.stateNumericStart(h,g+1);return this.state=ep.NamedEntity,this.stateNamedEntity(h,g);case ep.NumericStart:return this.stateNumericStart(h,g);case ep.NumericDecimal:return this.stateNumericDecimal(h,g);case ep.NumericHex:return this.stateNumericHex(h,g);case ep.NamedEntity:return this.stateNamedEntity(h,g)}}stateNumericStart(h,g){return g>=h.length?-1:(32|h.charCodeAt(g))===eu.LOWER_X?(this.state=ep.NumericHex,this.consumed+=1,this.stateNumericHex(h,g+1)):(this.state=ep.NumericDecimal,this.stateNumericDecimal(h,g))}addToNumericResult(h,g,E,_){if(g!==E){let A=E-g;this.result=this.result*Math.pow(_,A)+parseInt(h.substr(g,A),_),this.consumed+=A}}stateNumericHex(h,g){let E=g;for(;g<h.length;){var _;let A=h.charCodeAt(g);if(!isNumber(A)&&(!((_=A)>=eu.UPPER_A)||!(_<=eu.UPPER_F))&&(!(_>=eu.LOWER_A)||!(_<=eu.LOWER_F)))return this.addToNumericResult(h,E,g,16),this.emitNumericEntity(A,3);g+=1}return this.addToNumericResult(h,E,g,16),-1}stateNumericDecimal(h,g){let E=g;for(;g<h.length;){let _=h.charCodeAt(g);if(!isNumber(_))return this.addToNumericResult(h,E,g,10),this.emitNumericEntity(_,2);g+=1}return this.addToNumericResult(h,E,g,10),-1}emitNumericEntity(h,g){var E,_,A;if(this.consumed<=g)return null===(E=this.errors)||void 0===E||E.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(h===eu.SEMI)this.consumed+=1;else if(this.decodeMode===eh.Strict)return 0;return this.emitCodePoint((_=this.result)>=55296&&_<=57343||_>1114111?65533:null!==(A=n5.get(_))&&void 0!==A?A:_,this.consumed),this.errors&&(h!==eu.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(h,g){let{decodeTree:E}=this,_=E[this.treeIndex],A=(_&ed.VALUE_LENGTH)>>14;for(;g<h.length;g++,this.excess++){let b=h.charCodeAt(g);if(this.treeIndex=determineBranch(E,_,this.treeIndex+Math.max(1,A),b),this.treeIndex<0)return 0===this.result||this.decodeMode===eh.Attribute&&(0===A||function(h){var g;return h===eu.EQUALS||(g=h)>=eu.UPPER_A&&g<=eu.UPPER_Z||g>=eu.LOWER_A&&g<=eu.LOWER_Z||isNumber(g)}(b))?0:this.emitNotTerminatedNamedEntity();if(0!=(A=((_=E[this.treeIndex])&ed.VALUE_LENGTH)>>14)){if(b===eu.SEMI)return this.emitNamedEntityData(this.treeIndex,A,this.consumed+this.excess);this.decodeMode!==eh.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return -1}emitNotTerminatedNamedEntity(){var h;let{result:g,decodeTree:E}=this,_=(E[g]&ed.VALUE_LENGTH)>>14;return this.emitNamedEntityData(g,_,this.consumed),null===(h=this.errors)||void 0===h||h.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(h,g,E){let{decodeTree:_}=this;return this.emitCodePoint(1===g?_[h]&~ed.VALUE_LENGTH:_[h+1],E),3===g&&this.emitCodePoint(_[h+2],E),E}end(){var h;switch(this.state){case ep.NamedEntity:return 0!==this.result&&(this.decodeMode!==eh.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ep.NumericDecimal:return this.emitNumericEntity(0,2);case ep.NumericHex:return this.emitNumericEntity(0,3);case ep.NumericStart:return null===(h=this.errors)||void 0===h||h.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ep.EntityStart:return 0}}};function getDecoder(h){let g="",E=new EntityDecoder(h,h=>g+=n6(h));return function(h,_){let A=0,b=0;for(;(b=h.indexOf("&",b))>=0;){g+=h.slice(A,b),E.startEntity(_);let C=E.write(h,b+1);if(C<0){A=b+E.end();break}A=b+C,b=0===C?A+1:A}let C=g+h.slice(A);return g="",C}}function determineBranch(h,g,E,_){let A=(g&ed.BRANCH_LENGTH)>>7,b=g&ed.JUMP_TABLE;if(0===A)return 0!==b&&_===b?E:-1;if(b){let g=_-b;return g<0||g>=A?-1:h[E+g]-1}let C=E,k=C+A-1;for(;C<=k;){let g=C+k>>>1,E=h[g];if(E<_)C=g+1;else{if(!(E>_))return h[g+A];k=g-1}}return -1}getDecoder(n3),getDecoder(n4),(P=ef=ef||(ef={})).HTML="http://www.w3.org/1999/xhtml",P.MATHML="http://www.w3.org/1998/Math/MathML",P.SVG="http://www.w3.org/2000/svg",P.XLINK="http://www.w3.org/1999/xlink",P.XML="http://www.w3.org/XML/1998/namespace",P.XMLNS="http://www.w3.org/2000/xmlns/",(z=em=em||(em={})).TYPE="type",z.ACTION="action",z.ENCODING="encoding",z.PROMPT="prompt",z.NAME="name",z.COLOR="color",z.FACE="face",z.SIZE="size",(G=eg=eg||(eg={})).NO_QUIRKS="no-quirks",G.QUIRKS="quirks",G.LIMITED_QUIRKS="limited-quirks",($=eE=eE||(eE={})).A="a",$.ADDRESS="address",$.ANNOTATION_XML="annotation-xml",$.APPLET="applet",$.AREA="area",$.ARTICLE="article",$.ASIDE="aside",$.B="b",$.BASE="base",$.BASEFONT="basefont",$.BGSOUND="bgsound",$.BIG="big",$.BLOCKQUOTE="blockquote",$.BODY="body",$.BR="br",$.BUTTON="button",$.CAPTION="caption",$.CENTER="center",$.CODE="code",$.COL="col",$.COLGROUP="colgroup",$.DD="dd",$.DESC="desc",$.DETAILS="details",$.DIALOG="dialog",$.DIR="dir",$.DIV="div",$.DL="dl",$.DT="dt",$.EM="em",$.EMBED="embed",$.FIELDSET="fieldset",$.FIGCAPTION="figcaption",$.FIGURE="figure",$.FONT="font",$.FOOTER="footer",$.FOREIGN_OBJECT="foreignObject",$.FORM="form",$.FRAME="frame",$.FRAMESET="frameset",$.H1="h1",$.H2="h2",$.H3="h3",$.H4="h4",$.H5="h5",$.H6="h6",$.HEAD="head",$.HEADER="header",$.HGROUP="hgroup",$.HR="hr",$.HTML="html",$.I="i",$.IMG="img",$.IMAGE="image",$.INPUT="input",$.IFRAME="iframe",$.KEYGEN="keygen",$.LABEL="label",$.LI="li",$.LINK="link",$.LISTING="listing",$.MAIN="main",$.MALIGNMARK="malignmark",$.MARQUEE="marquee",$.MATH="math",$.MENU="menu",$.META="meta",$.MGLYPH="mglyph",$.MI="mi",$.MO="mo",$.MN="mn",$.MS="ms",$.MTEXT="mtext",$.NAV="nav",$.NOBR="nobr",$.NOFRAMES="noframes",$.NOEMBED="noembed",$.NOSCRIPT="noscript",$.OBJECT="object",$.OL="ol",$.OPTGROUP="optgroup",$.OPTION="option",$.P="p",$.PARAM="param",$.PLAINTEXT="plaintext",$.PRE="pre",$.RB="rb",$.RP="rp",$.RT="rt",$.RTC="rtc",$.RUBY="ruby",$.S="s",$.SCRIPT="script",$.SECTION="section",$.SELECT="select",$.SOURCE="source",$.SMALL="small",$.SPAN="span",$.STRIKE="strike",$.STRONG="strong",$.STYLE="style",$.SUB="sub",$.SUMMARY="summary",$.SUP="sup",$.TABLE="table",$.TBODY="tbody",$.TEMPLATE="template",$.TEXTAREA="textarea",$.TFOOT="tfoot",$.TD="td",$.TH="th",$.THEAD="thead",$.TITLE="title",$.TR="tr",$.TRACK="track",$.TT="tt",$.U="u",$.UL="ul",$.SVG="svg",$.VAR="var",$.WBR="wbr",$.XMP="xmp",(j=eT=eT||(eT={}))[j.UNKNOWN=0]="UNKNOWN",j[j.A=1]="A",j[j.ADDRESS=2]="ADDRESS",j[j.ANNOTATION_XML=3]="ANNOTATION_XML",j[j.APPLET=4]="APPLET",j[j.AREA=5]="AREA",j[j.ARTICLE=6]="ARTICLE",j[j.ASIDE=7]="ASIDE",j[j.B=8]="B",j[j.BASE=9]="BASE",j[j.BASEFONT=10]="BASEFONT",j[j.BGSOUND=11]="BGSOUND",j[j.BIG=12]="BIG",j[j.BLOCKQUOTE=13]="BLOCKQUOTE",j[j.BODY=14]="BODY",j[j.BR=15]="BR",j[j.BUTTON=16]="BUTTON",j[j.CAPTION=17]="CAPTION",j[j.CENTER=18]="CENTER",j[j.CODE=19]="CODE",j[j.COL=20]="COL",j[j.COLGROUP=21]="COLGROUP",j[j.DD=22]="DD",j[j.DESC=23]="DESC",j[j.DETAILS=24]="DETAILS",j[j.DIALOG=25]="DIALOG",j[j.DIR=26]="DIR",j[j.DIV=27]="DIV",j[j.DL=28]="DL",j[j.DT=29]="DT",j[j.EM=30]="EM",j[j.EMBED=31]="EMBED",j[j.FIELDSET=32]="FIELDSET",j[j.FIGCAPTION=33]="FIGCAPTION",j[j.FIGURE=34]="FIGURE",j[j.FONT=35]="FONT",j[j.FOOTER=36]="FOOTER",j[j.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",j[j.FORM=38]="FORM",j[j.FRAME=39]="FRAME",j[j.FRAMESET=40]="FRAMESET",j[j.H1=41]="H1",j[j.H2=42]="H2",j[j.H3=43]="H3",j[j.H4=44]="H4",j[j.H5=45]="H5",j[j.H6=46]="H6",j[j.HEAD=47]="HEAD",j[j.HEADER=48]="HEADER",j[j.HGROUP=49]="HGROUP",j[j.HR=50]="HR",j[j.HTML=51]="HTML",j[j.I=52]="I",j[j.IMG=53]="IMG",j[j.IMAGE=54]="IMAGE",j[j.INPUT=55]="INPUT",j[j.IFRAME=56]="IFRAME",j[j.KEYGEN=57]="KEYGEN",j[j.LABEL=58]="LABEL",j[j.LI=59]="LI",j[j.LINK=60]="LINK",j[j.LISTING=61]="LISTING",j[j.MAIN=62]="MAIN",j[j.MALIGNMARK=63]="MALIGNMARK",j[j.MARQUEE=64]="MARQUEE",j[j.MATH=65]="MATH",j[j.MENU=66]="MENU",j[j.META=67]="META",j[j.MGLYPH=68]="MGLYPH",j[j.MI=69]="MI",j[j.MO=70]="MO",j[j.MN=71]="MN",j[j.MS=72]="MS",j[j.MTEXT=73]="MTEXT",j[j.NAV=74]="NAV",j[j.NOBR=75]="NOBR",j[j.NOFRAMES=76]="NOFRAMES",j[j.NOEMBED=77]="NOEMBED",j[j.NOSCRIPT=78]="NOSCRIPT",j[j.OBJECT=79]="OBJECT",j[j.OL=80]="OL",j[j.OPTGROUP=81]="OPTGROUP",j[j.OPTION=82]="OPTION",j[j.P=83]="P",j[j.PARAM=84]="PARAM",j[j.PLAINTEXT=85]="PLAINTEXT",j[j.PRE=86]="PRE",j[j.RB=87]="RB",j[j.RP=88]="RP",j[j.RT=89]="RT",j[j.RTC=90]="RTC",j[j.RUBY=91]="RUBY",j[j.S=92]="S",j[j.SCRIPT=93]="SCRIPT",j[j.SECTION=94]="SECTION",j[j.SELECT=95]="SELECT",j[j.SOURCE=96]="SOURCE",j[j.SMALL=97]="SMALL",j[j.SPAN=98]="SPAN",j[j.STRIKE=99]="STRIKE",j[j.STRONG=100]="STRONG",j[j.STYLE=101]="STYLE",j[j.SUB=102]="SUB",j[j.SUMMARY=103]="SUMMARY",j[j.SUP=104]="SUP",j[j.TABLE=105]="TABLE",j[j.TBODY=106]="TBODY",j[j.TEMPLATE=107]="TEMPLATE",j[j.TEXTAREA=108]="TEXTAREA",j[j.TFOOT=109]="TFOOT",j[j.TD=110]="TD",j[j.TH=111]="TH",j[j.THEAD=112]="THEAD",j[j.TITLE=113]="TITLE",j[j.TR=114]="TR",j[j.TRACK=115]="TRACK",j[j.TT=116]="TT",j[j.U=117]="U",j[j.UL=118]="UL",j[j.SVG=119]="SVG",j[j.VAR=120]="VAR",j[j.WBR=121]="WBR",j[j.XMP=122]="XMP";let n8=new Map([[eE.A,eT.A],[eE.ADDRESS,eT.ADDRESS],[eE.ANNOTATION_XML,eT.ANNOTATION_XML],[eE.APPLET,eT.APPLET],[eE.AREA,eT.AREA],[eE.ARTICLE,eT.ARTICLE],[eE.ASIDE,eT.ASIDE],[eE.B,eT.B],[eE.BASE,eT.BASE],[eE.BASEFONT,eT.BASEFONT],[eE.BGSOUND,eT.BGSOUND],[eE.BIG,eT.BIG],[eE.BLOCKQUOTE,eT.BLOCKQUOTE],[eE.BODY,eT.BODY],[eE.BR,eT.BR],[eE.BUTTON,eT.BUTTON],[eE.CAPTION,eT.CAPTION],[eE.CENTER,eT.CENTER],[eE.CODE,eT.CODE],[eE.COL,eT.COL],[eE.COLGROUP,eT.COLGROUP],[eE.DD,eT.DD],[eE.DESC,eT.DESC],[eE.DETAILS,eT.DETAILS],[eE.DIALOG,eT.DIALOG],[eE.DIR,eT.DIR],[eE.DIV,eT.DIV],[eE.DL,eT.DL],[eE.DT,eT.DT],[eE.EM,eT.EM],[eE.EMBED,eT.EMBED],[eE.FIELDSET,eT.FIELDSET],[eE.FIGCAPTION,eT.FIGCAPTION],[eE.FIGURE,eT.FIGURE],[eE.FONT,eT.FONT],[eE.FOOTER,eT.FOOTER],[eE.FOREIGN_OBJECT,eT.FOREIGN_OBJECT],[eE.FORM,eT.FORM],[eE.FRAME,eT.FRAME],[eE.FRAMESET,eT.FRAMESET],[eE.H1,eT.H1],[eE.H2,eT.H2],[eE.H3,eT.H3],[eE.H4,eT.H4],[eE.H5,eT.H5],[eE.H6,eT.H6],[eE.HEAD,eT.HEAD],[eE.HEADER,eT.HEADER],[eE.HGROUP,eT.HGROUP],[eE.HR,eT.HR],[eE.HTML,eT.HTML],[eE.I,eT.I],[eE.IMG,eT.IMG],[eE.IMAGE,eT.IMAGE],[eE.INPUT,eT.INPUT],[eE.IFRAME,eT.IFRAME],[eE.KEYGEN,eT.KEYGEN],[eE.LABEL,eT.LABEL],[eE.LI,eT.LI],[eE.LINK,eT.LINK],[eE.LISTING,eT.LISTING],[eE.MAIN,eT.MAIN],[eE.MALIGNMARK,eT.MALIGNMARK],[eE.MARQUEE,eT.MARQUEE],[eE.MATH,eT.MATH],[eE.MENU,eT.MENU],[eE.META,eT.META],[eE.MGLYPH,eT.MGLYPH],[eE.MI,eT.MI],[eE.MO,eT.MO],[eE.MN,eT.MN],[eE.MS,eT.MS],[eE.MTEXT,eT.MTEXT],[eE.NAV,eT.NAV],[eE.NOBR,eT.NOBR],[eE.NOFRAMES,eT.NOFRAMES],[eE.NOEMBED,eT.NOEMBED],[eE.NOSCRIPT,eT.NOSCRIPT],[eE.OBJECT,eT.OBJECT],[eE.OL,eT.OL],[eE.OPTGROUP,eT.OPTGROUP],[eE.OPTION,eT.OPTION],[eE.P,eT.P],[eE.PARAM,eT.PARAM],[eE.PLAINTEXT,eT.PLAINTEXT],[eE.PRE,eT.PRE],[eE.RB,eT.RB],[eE.RP,eT.RP],[eE.RT,eT.RT],[eE.RTC,eT.RTC],[eE.RUBY,eT.RUBY],[eE.S,eT.S],[eE.SCRIPT,eT.SCRIPT],[eE.SECTION,eT.SECTION],[eE.SELECT,eT.SELECT],[eE.SOURCE,eT.SOURCE],[eE.SMALL,eT.SMALL],[eE.SPAN,eT.SPAN],[eE.STRIKE,eT.STRIKE],[eE.STRONG,eT.STRONG],[eE.STYLE,eT.STYLE],[eE.SUB,eT.SUB],[eE.SUMMARY,eT.SUMMARY],[eE.SUP,eT.SUP],[eE.TABLE,eT.TABLE],[eE.TBODY,eT.TBODY],[eE.TEMPLATE,eT.TEMPLATE],[eE.TEXTAREA,eT.TEXTAREA],[eE.TFOOT,eT.TFOOT],[eE.TD,eT.TD],[eE.TH,eT.TH],[eE.THEAD,eT.THEAD],[eE.TITLE,eT.TITLE],[eE.TR,eT.TR],[eE.TRACK,eT.TRACK],[eE.TT,eT.TT],[eE.U,eT.U],[eE.UL,eT.UL],[eE.SVG,eT.SVG],[eE.VAR,eT.VAR],[eE.WBR,eT.WBR],[eE.XMP,eT.XMP]]);function getTagID(h){var g;return null!==(g=n8.get(h))&&void 0!==g?g:eT.UNKNOWN}let n9=eT,n7={[ef.HTML]:new Set([n9.ADDRESS,n9.APPLET,n9.AREA,n9.ARTICLE,n9.ASIDE,n9.BASE,n9.BASEFONT,n9.BGSOUND,n9.BLOCKQUOTE,n9.BODY,n9.BR,n9.BUTTON,n9.CAPTION,n9.CENTER,n9.COL,n9.COLGROUP,n9.DD,n9.DETAILS,n9.DIR,n9.DIV,n9.DL,n9.DT,n9.EMBED,n9.FIELDSET,n9.FIGCAPTION,n9.FIGURE,n9.FOOTER,n9.FORM,n9.FRAME,n9.FRAMESET,n9.H1,n9.H2,n9.H3,n9.H4,n9.H5,n9.H6,n9.HEAD,n9.HEADER,n9.HGROUP,n9.HR,n9.HTML,n9.IFRAME,n9.IMG,n9.INPUT,n9.LI,n9.LINK,n9.LISTING,n9.MAIN,n9.MARQUEE,n9.MENU,n9.META,n9.NAV,n9.NOEMBED,n9.NOFRAMES,n9.NOSCRIPT,n9.OBJECT,n9.OL,n9.P,n9.PARAM,n9.PLAINTEXT,n9.PRE,n9.SCRIPT,n9.SECTION,n9.SELECT,n9.SOURCE,n9.STYLE,n9.SUMMARY,n9.TABLE,n9.TBODY,n9.TD,n9.TEMPLATE,n9.TEXTAREA,n9.TFOOT,n9.TH,n9.THEAD,n9.TITLE,n9.TR,n9.TRACK,n9.UL,n9.WBR,n9.XMP]),[ef.MATHML]:new Set([n9.MI,n9.MO,n9.MN,n9.MS,n9.MTEXT,n9.ANNOTATION_XML]),[ef.SVG]:new Set([n9.TITLE,n9.FOREIGN_OBJECT,n9.DESC]),[ef.XLINK]:new Set,[ef.XML]:new Set,[ef.XMLNS]:new Set};function isNumberedHeader(h){return h===n9.H1||h===n9.H2||h===n9.H3||h===n9.H4||h===n9.H5||h===n9.H6}eE.STYLE,eE.SCRIPT,eE.XMP,eE.IFRAME,eE.NOEMBED,eE.NOFRAMES,eE.PLAINTEXT;let re=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);(W=e_||(e_={}))[W.DATA=0]="DATA",W[W.RCDATA=1]="RCDATA",W[W.RAWTEXT=2]="RAWTEXT",W[W.SCRIPT_DATA=3]="SCRIPT_DATA",W[W.PLAINTEXT=4]="PLAINTEXT",W[W.TAG_OPEN=5]="TAG_OPEN",W[W.END_TAG_OPEN=6]="END_TAG_OPEN",W[W.TAG_NAME=7]="TAG_NAME",W[W.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",W[W.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",W[W.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",W[W.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",W[W.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",W[W.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",W[W.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",W[W.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",W[W.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",W[W.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",W[W.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",W[W.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",W[W.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",W[W.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",W[W.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",W[W.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",W[W.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",W[W.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",W[W.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",W[W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",W[W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",W[W.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",W[W.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",W[W.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",W[W.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",W[W.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",W[W.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",W[W.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",W[W.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",W[W.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",W[W.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",W[W.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",W[W.BOGUS_COMMENT=40]="BOGUS_COMMENT",W[W.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",W[W.COMMENT_START=42]="COMMENT_START",W[W.COMMENT_START_DASH=43]="COMMENT_START_DASH",W[W.COMMENT=44]="COMMENT",W[W.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",W[W.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",W[W.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",W[W.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",W[W.COMMENT_END_DASH=49]="COMMENT_END_DASH",W[W.COMMENT_END=50]="COMMENT_END",W[W.COMMENT_END_BANG=51]="COMMENT_END_BANG",W[W.DOCTYPE=52]="DOCTYPE",W[W.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",W[W.DOCTYPE_NAME=54]="DOCTYPE_NAME",W[W.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",W[W.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",W[W.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",W[W.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",W[W.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",W[W.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",W[W.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",W[W.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",W[W.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",W[W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",W[W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",W[W.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",W[W.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",W[W.CDATA_SECTION=68]="CDATA_SECTION",W[W.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",W[W.CDATA_SECTION_END=70]="CDATA_SECTION_END",W[W.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",W[W.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",W[W.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",W[W.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",W[W.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",W[W.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",W[W.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",W[W.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END";let rt={DATA:e_.DATA,RCDATA:e_.RCDATA,RAWTEXT:e_.RAWTEXT,SCRIPT_DATA:e_.SCRIPT_DATA,PLAINTEXT:e_.PLAINTEXT,CDATA_SECTION:e_.CDATA_SECTION};function isAsciiDigit(h){return h>=ei.DIGIT_0&&h<=ei.DIGIT_9}function isAsciiUpper(h){return h>=ei.LATIN_CAPITAL_A&&h<=ei.LATIN_CAPITAL_Z}function isAsciiLetter(h){return h>=ei.LATIN_SMALL_A&&h<=ei.LATIN_SMALL_Z||isAsciiUpper(h)}function tokenizer_isAsciiAlphaNumeric(h){return isAsciiLetter(h)||isAsciiDigit(h)}function isAsciiUpperHexDigit(h){return h>=ei.LATIN_CAPITAL_A&&h<=ei.LATIN_CAPITAL_F}function isAsciiLowerHexDigit(h){return h>=ei.LATIN_SMALL_A&&h<=ei.LATIN_SMALL_F}function isWhitespace(h){return h===ei.SPACE||h===ei.LINE_FEED||h===ei.TABULATION||h===ei.FORM_FEED}function isScriptDataDoubleEscapeSequenceEnd(h){return isWhitespace(h)||h===ei.SOLIDUS||h===ei.GREATER_THAN_SIGN}let Tokenizer=class Tokenizer{constructor(h,g){this.options=h,this.handler=g,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=e_.DATA,this.returnState=e_.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Preprocessor(g),this.currentLocation=this.getCurrentLocation(-1)}_err(h){var g,E;null===(E=(g=this.handler).onParseError)||void 0===E||E.call(g,this.preprocessor.getError(h))}getCurrentLocation(h){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-h,startOffset:this.preprocessor.offset-h,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;let h=this._consume();this._ensureHibernation()||this._callState(h)}this.inLoop=!1}}pause(){this.paused=!0}resume(h){if(!this.paused)throw Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null==h||h())}write(h,g,E){this.active=!0,this.preprocessor.write(h,g),this._runParsingLoop(),this.paused||null==E||E()}insertHtmlAtCurrentPos(h){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(h),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(h){this.consumedAfterSnapshot-=h,this.preprocessor.retreat(h)}_reconsumeInState(h,g){this.state=h,this._callState(g)}_advanceBy(h){this.consumedAfterSnapshot+=h;for(let g=0;g<h;g++)this.preprocessor.advance()}_consumeSequenceIfMatch(h,g){return!!this.preprocessor.startsWith(h,g)&&(this._advanceBy(h.length-1),!0)}_createStartTagToken(){this.currentToken={type:el.START_TAG,tagName:"",tagID:eT.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:el.END_TAG,tagName:"",tagID:eT.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(h){this.currentToken={type:el.COMMENT,data:"",location:this.getCurrentLocation(h)}}_createDoctypeToken(h){this.currentToken={type:el.DOCTYPE,name:h,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(h,g){this.currentCharacterToken={type:h,chars:g,location:this.currentLocation}}_createAttr(h){this.currentAttr={name:h,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var h,g;let E=this.currentToken;if(null===getTokenAttr(E,this.currentAttr.name)){if(E.attrs.push(this.currentAttr),E.location&&this.currentLocation){let _=null!==(h=(g=E.location).attrs)&&void 0!==h?h:g.attrs=Object.create(null);_[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(es.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(h){this._emitCurrentCharacterToken(h.location),this.currentToken=null,h.location&&(h.location.endLine=this.preprocessor.line,h.location.endCol=this.preprocessor.col+1,h.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){let h=this.currentToken;this.prepareToken(h),h.tagID=getTagID(h.tagName),h.type===el.START_TAG?(this.lastStartTagName=h.tagName,this.handler.onStartTag(h)):(h.attrs.length>0&&this._err(es.endTagWithAttributes),h.selfClosing&&this._err(es.endTagWithTrailingSolidus),this.handler.onEndTag(h)),this.preprocessor.dropParsedChunk()}emitCurrentComment(h){this.prepareToken(h),this.handler.onComment(h),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(h){this.prepareToken(h),this.handler.onDoctype(h),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(h){if(this.currentCharacterToken){switch(h&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=h.startLine,this.currentCharacterToken.location.endCol=h.startCol,this.currentCharacterToken.location.endOffset=h.startOffset),this.currentCharacterToken.type){case el.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case el.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case el.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){let h=this.getCurrentLocation(0);h&&(h.endLine=h.startLine,h.endCol=h.startCol,h.endOffset=h.startOffset),this._emitCurrentCharacterToken(h),this.handler.onEof({type:el.EOF,location:h}),this.active=!1}_appendCharToCurrentCharacterToken(h,g){if(this.currentCharacterToken){if(this.currentCharacterToken.type!==h)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=g;return}}this._createCharacterToken(h,g)}_emitCodePoint(h){let g=isWhitespace(h)?el.WHITESPACE_CHARACTER:h===ei.NULL?el.NULL_CHARACTER:el.CHARACTER;this._appendCharToCurrentCharacterToken(g,String.fromCodePoint(h))}_emitChars(h){this._appendCharToCurrentCharacterToken(el.CHARACTER,h)}_matchNamedCharacterReference(h){let g=null,E=0,_=!1;for(let b=0,C=n3[0];b>=0&&!((b=determineBranch(n3,C,b+1,h))<0);h=this._consume()){E+=1,C=n3[b];let k=C&ed.VALUE_LENGTH;if(k){var A;let C=(k>>14)-1;if(h!==ei.SEMICOLON&&this._isCharacterReferenceInAttribute()&&((A=this.preprocessor.peek(1))===ei.EQUALS_SIGN||tokenizer_isAsciiAlphaNumeric(A))?(g=[ei.AMPERSAND],b+=C):(g=0===C?[n3[b]&~ed.VALUE_LENGTH]:1===C?[n3[++b]]:[n3[++b],n3[++b]],E=0,_=h!==ei.SEMICOLON),0===C){this._consume();break}}}return this._unconsume(E),_&&!this.preprocessor.endOfChunkHit&&this._err(es.missingSemicolonAfterCharacterReference),this._unconsume(1),g}_isCharacterReferenceInAttribute(){return this.returnState===e_.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===e_.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===e_.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(h){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(h):this._emitCodePoint(h)}_callState(h){switch(this.state){case e_.DATA:this._stateData(h);break;case e_.RCDATA:this._stateRcdata(h);break;case e_.RAWTEXT:this._stateRawtext(h);break;case e_.SCRIPT_DATA:this._stateScriptData(h);break;case e_.PLAINTEXT:this._statePlaintext(h);break;case e_.TAG_OPEN:this._stateTagOpen(h);break;case e_.END_TAG_OPEN:this._stateEndTagOpen(h);break;case e_.TAG_NAME:this._stateTagName(h);break;case e_.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(h);break;case e_.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(h);break;case e_.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(h);break;case e_.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(h);break;case e_.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(h);break;case e_.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(h);break;case e_.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(h);break;case e_.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(h);break;case e_.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(h);break;case e_.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(h);break;case e_.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(h);break;case e_.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(h);break;case e_.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(h);break;case e_.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(h);break;case e_.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(h);break;case e_.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(h);break;case e_.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(h);break;case e_.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(h);break;case e_.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(h);break;case e_.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(h);break;case e_.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(h);break;case e_.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(h);break;case e_.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(h);break;case e_.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(h);break;case e_.ATTRIBUTE_NAME:this._stateAttributeName(h);break;case e_.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(h);break;case e_.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(h);break;case e_.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(h);break;case e_.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(h);break;case e_.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(h);break;case e_.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(h);break;case e_.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(h);break;case e_.BOGUS_COMMENT:this._stateBogusComment(h);break;case e_.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(h);break;case e_.COMMENT_START:this._stateCommentStart(h);break;case e_.COMMENT_START_DASH:this._stateCommentStartDash(h);break;case e_.COMMENT:this._stateComment(h);break;case e_.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(h);break;case e_.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(h);break;case e_.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(h);break;case e_.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(h);break;case e_.COMMENT_END_DASH:this._stateCommentEndDash(h);break;case e_.COMMENT_END:this._stateCommentEnd(h);break;case e_.COMMENT_END_BANG:this._stateCommentEndBang(h);break;case e_.DOCTYPE:this._stateDoctype(h);break;case e_.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(h);break;case e_.DOCTYPE_NAME:this._stateDoctypeName(h);break;case e_.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(h);break;case e_.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(h);break;case e_.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(h);break;case e_.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(h);break;case e_.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(h);break;case e_.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(h);break;case e_.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(h);break;case e_.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(h);break;case e_.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(h);break;case e_.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(h);break;case e_.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(h);break;case e_.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(h);break;case e_.BOGUS_DOCTYPE:this._stateBogusDoctype(h);break;case e_.CDATA_SECTION:this._stateCdataSection(h);break;case e_.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(h);break;case e_.CDATA_SECTION_END:this._stateCdataSectionEnd(h);break;case e_.CHARACTER_REFERENCE:this._stateCharacterReference(h);break;case e_.NAMED_CHARACTER_REFERENCE:this._stateNamedCharacterReference(h);break;case e_.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(h);break;case e_.NUMERIC_CHARACTER_REFERENCE:this._stateNumericCharacterReference(h);break;case e_.HEXADEMICAL_CHARACTER_REFERENCE_START:this._stateHexademicalCharacterReferenceStart(h);break;case e_.HEXADEMICAL_CHARACTER_REFERENCE:this._stateHexademicalCharacterReference(h);break;case e_.DECIMAL_CHARACTER_REFERENCE:this._stateDecimalCharacterReference(h);break;case e_.NUMERIC_CHARACTER_REFERENCE_END:this._stateNumericCharacterReferenceEnd(h);break;default:throw Error("Unknown state")}}_stateData(h){switch(h){case ei.LESS_THAN_SIGN:this.state=e_.TAG_OPEN;break;case ei.AMPERSAND:this.returnState=e_.DATA,this.state=e_.CHARACTER_REFERENCE;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitCodePoint(h);break;case ei.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateRcdata(h){switch(h){case ei.AMPERSAND:this.returnState=e_.RCDATA,this.state=e_.CHARACTER_REFERENCE;break;case ei.LESS_THAN_SIGN:this.state=e_.RCDATA_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateRawtext(h){switch(h){case ei.LESS_THAN_SIGN:this.state=e_.RAWTEXT_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateScriptData(h){switch(h){case ei.LESS_THAN_SIGN:this.state=e_.SCRIPT_DATA_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_statePlaintext(h){switch(h){case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateTagOpen(h){if(isAsciiLetter(h))this._createStartTagToken(),this.state=e_.TAG_NAME,this._stateTagName(h);else switch(h){case ei.EXCLAMATION_MARK:this.state=e_.MARKUP_DECLARATION_OPEN;break;case ei.SOLIDUS:this.state=e_.END_TAG_OPEN;break;case ei.QUESTION_MARK:this._err(es.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=e_.BOGUS_COMMENT,this._stateBogusComment(h);break;case ei.EOF:this._err(es.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(es.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=e_.DATA,this._stateData(h)}}_stateEndTagOpen(h){if(isAsciiLetter(h))this._createEndTagToken(),this.state=e_.TAG_NAME,this._stateTagName(h);else switch(h){case ei.GREATER_THAN_SIGN:this._err(es.missingEndTagName),this.state=e_.DATA;break;case ei.EOF:this._err(es.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(es.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=e_.BOGUS_COMMENT,this._stateBogusComment(h)}}_stateTagName(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=e_.BEFORE_ATTRIBUTE_NAME;break;case ei.SOLIDUS:this.state=e_.SELF_CLOSING_START_TAG;break;case ei.GREATER_THAN_SIGN:this.state=e_.DATA,this.emitCurrentTagToken();break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.tagName+="";break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:g.tagName+=String.fromCodePoint(isAsciiUpper(h)?h+32:h)}}_stateRcdataLessThanSign(h){h===ei.SOLIDUS?this.state=e_.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=e_.RCDATA,this._stateRcdata(h))}_stateRcdataEndTagOpen(h){isAsciiLetter(h)?(this.state=e_.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(h)):(this._emitChars("</"),this.state=e_.RCDATA,this._stateRcdata(h))}handleSpecialEndTag(h){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();let g=this.currentToken;g.tagName=this.lastStartTagName;let E=this.preprocessor.peek(this.lastStartTagName.length);switch(E){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=e_.BEFORE_ATTRIBUTE_NAME,!1;case ei.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=e_.SELF_CLOSING_START_TAG,!1;case ei.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=e_.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=e_.RCDATA,this._stateRcdata(h))}_stateRawtextLessThanSign(h){h===ei.SOLIDUS?this.state=e_.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=e_.RAWTEXT,this._stateRawtext(h))}_stateRawtextEndTagOpen(h){isAsciiLetter(h)?(this.state=e_.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(h)):(this._emitChars("</"),this.state=e_.RAWTEXT,this._stateRawtext(h))}_stateRawtextEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=e_.RAWTEXT,this._stateRawtext(h))}_stateScriptDataLessThanSign(h){switch(h){case ei.SOLIDUS:this.state=e_.SCRIPT_DATA_END_TAG_OPEN;break;case ei.EXCLAMATION_MARK:this.state=e_.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=e_.SCRIPT_DATA,this._stateScriptData(h)}}_stateScriptDataEndTagOpen(h){isAsciiLetter(h)?(this.state=e_.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(h)):(this._emitChars("</"),this.state=e_.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=e_.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEscapeStart(h){h===ei.HYPHEN_MINUS?(this.state=e_.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=e_.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEscapeStartDash(h){h===ei.HYPHEN_MINUS?(this.state=e_.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=e_.SCRIPT_DATA,this._stateScriptData(h))}_stateScriptDataEscaped(h){switch(h){case ei.HYPHEN_MINUS:this.state=e_.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=e_.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateScriptDataEscapedDash(h){switch(h){case ei.HYPHEN_MINUS:this.state=e_.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=e_.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.state=e_.SCRIPT_DATA_ESCAPED,this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=e_.SCRIPT_DATA_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataEscapedDashDash(h){switch(h){case ei.HYPHEN_MINUS:this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=e_.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case ei.GREATER_THAN_SIGN:this.state=e_.SCRIPT_DATA,this._emitChars(">");break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.state=e_.SCRIPT_DATA_ESCAPED,this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=e_.SCRIPT_DATA_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataEscapedLessThanSign(h){h===ei.SOLIDUS?this.state=e_.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:isAsciiLetter(h)?(this._emitChars("<"),this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(h)):(this._emitChars("<"),this.state=e_.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataEscapedEndTagOpen(h){isAsciiLetter(h)?(this.state=e_.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(h)):(this._emitChars("</"),this.state=e_.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataEscapedEndTagName(h){this.handleSpecialEndTag(h)&&(this._emitChars("</"),this.state=e_.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataDoubleEscapeStart(h){if(this.preprocessor.startsWith(n2.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(n2.SCRIPT.length))){this._emitCodePoint(h);for(let h=0;h<n2.SCRIPT.length;h++)this._emitCodePoint(this._consume());this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=e_.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(h))}_stateScriptDataDoubleEscaped(h){switch(h){case ei.HYPHEN_MINUS:this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateScriptDataDoubleEscapedDash(h){switch(h){case ei.HYPHEN_MINUS:this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataDoubleEscapedDashDash(h){switch(h){case ei.HYPHEN_MINUS:this._emitChars("-");break;case ei.LESS_THAN_SIGN:this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case ei.GREATER_THAN_SIGN:this.state=e_.SCRIPT_DATA,this._emitChars(">");break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars("");break;case ei.EOF:this._err(es.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(h)}}_stateScriptDataDoubleEscapedLessThanSign(h){h===ei.SOLIDUS?(this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(h))}_stateScriptDataDoubleEscapeEnd(h){if(this.preprocessor.startsWith(n2.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(n2.SCRIPT.length))){this._emitCodePoint(h);for(let h=0;h<n2.SCRIPT.length;h++)this._emitCodePoint(this._consume());this.state=e_.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=e_.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(h))}_stateBeforeAttributeName(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.SOLIDUS:case ei.GREATER_THAN_SIGN:case ei.EOF:this.state=e_.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(h);break;case ei.EQUALS_SIGN:this._err(es.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=e_.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=e_.ATTRIBUTE_NAME,this._stateAttributeName(h)}}_stateAttributeName(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:case ei.SOLIDUS:case ei.GREATER_THAN_SIGN:case ei.EOF:this._leaveAttrName(),this.state=e_.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(h);break;case ei.EQUALS_SIGN:this._leaveAttrName(),this.state=e_.BEFORE_ATTRIBUTE_VALUE;break;case ei.QUOTATION_MARK:case ei.APOSTROPHE:case ei.LESS_THAN_SIGN:this._err(es.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(h);break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.currentAttr.name+="";break;default:this.currentAttr.name+=String.fromCodePoint(isAsciiUpper(h)?h+32:h)}}_stateAfterAttributeName(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.SOLIDUS:this.state=e_.SELF_CLOSING_START_TAG;break;case ei.EQUALS_SIGN:this.state=e_.BEFORE_ATTRIBUTE_VALUE;break;case ei.GREATER_THAN_SIGN:this.state=e_.DATA,this.emitCurrentTagToken();break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=e_.ATTRIBUTE_NAME,this._stateAttributeName(h)}}_stateBeforeAttributeValue(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.QUOTATION_MARK:this.state=e_.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case ei.APOSTROPHE:this.state=e_.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case ei.GREATER_THAN_SIGN:this._err(es.missingAttributeValue),this.state=e_.DATA,this.emitCurrentTagToken();break;default:this.state=e_.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(h)}}_stateAttributeValueDoubleQuoted(h){switch(h){case ei.QUOTATION_MARK:this.state=e_.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case ei.AMPERSAND:this.returnState=e_.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=e_.CHARACTER_REFERENCE;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.currentAttr.value+="";break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(h)}}_stateAttributeValueSingleQuoted(h){switch(h){case ei.APOSTROPHE:this.state=e_.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case ei.AMPERSAND:this.returnState=e_.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=e_.CHARACTER_REFERENCE;break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.currentAttr.value+="";break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(h)}}_stateAttributeValueUnquoted(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this._leaveAttrValue(),this.state=e_.BEFORE_ATTRIBUTE_NAME;break;case ei.AMPERSAND:this.returnState=e_.ATTRIBUTE_VALUE_UNQUOTED,this.state=e_.CHARACTER_REFERENCE;break;case ei.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=e_.DATA,this.emitCurrentTagToken();break;case ei.NULL:this._err(es.unexpectedNullCharacter),this.currentAttr.value+="";break;case ei.QUOTATION_MARK:case ei.APOSTROPHE:case ei.LESS_THAN_SIGN:case ei.EQUALS_SIGN:case ei.GRAVE_ACCENT:this._err(es.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(h);break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(h)}}_stateAfterAttributeValueQuoted(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this._leaveAttrValue(),this.state=e_.BEFORE_ATTRIBUTE_NAME;break;case ei.SOLIDUS:this._leaveAttrValue(),this.state=e_.SELF_CLOSING_START_TAG;break;case ei.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=e_.DATA,this.emitCurrentTagToken();break;case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this._err(es.missingWhitespaceBetweenAttributes),this.state=e_.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(h)}}_stateSelfClosingStartTag(h){switch(h){case ei.GREATER_THAN_SIGN:{let h=this.currentToken;h.selfClosing=!0,this.state=e_.DATA,this.emitCurrentTagToken();break}case ei.EOF:this._err(es.eofInTag),this._emitEOFToken();break;default:this._err(es.unexpectedSolidusInTag),this.state=e_.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(h)}}_stateBogusComment(h){let g=this.currentToken;switch(h){case ei.GREATER_THAN_SIGN:this.state=e_.DATA,this.emitCurrentComment(g);break;case ei.EOF:this.emitCurrentComment(g),this._emitEOFToken();break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.data+="";break;default:g.data+=String.fromCodePoint(h)}}_stateMarkupDeclarationOpen(h){this._consumeSequenceIfMatch(n2.DASH_DASH,!0)?(this._createCommentToken(n2.DASH_DASH.length+1),this.state=e_.COMMENT_START):this._consumeSequenceIfMatch(n2.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(n2.DOCTYPE.length+1),this.state=e_.DOCTYPE):this._consumeSequenceIfMatch(n2.CDATA_START,!0)?this.inForeignNode?this.state=e_.CDATA_SECTION:(this._err(es.cdataInHtmlContent),this._createCommentToken(n2.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=e_.BOGUS_COMMENT):this._ensureHibernation()||(this._err(es.incorrectlyOpenedComment),this._createCommentToken(2),this.state=e_.BOGUS_COMMENT,this._stateBogusComment(h))}_stateCommentStart(h){switch(h){case ei.HYPHEN_MINUS:this.state=e_.COMMENT_START_DASH;break;case ei.GREATER_THAN_SIGN:{this._err(es.abruptClosingOfEmptyComment),this.state=e_.DATA;let h=this.currentToken;this.emitCurrentComment(h);break}default:this.state=e_.COMMENT,this._stateComment(h)}}_stateCommentStartDash(h){let g=this.currentToken;switch(h){case ei.HYPHEN_MINUS:this.state=e_.COMMENT_END;break;case ei.GREATER_THAN_SIGN:this._err(es.abruptClosingOfEmptyComment),this.state=e_.DATA,this.emitCurrentComment(g);break;case ei.EOF:this._err(es.eofInComment),this.emitCurrentComment(g),this._emitEOFToken();break;default:g.data+="-",this.state=e_.COMMENT,this._stateComment(h)}}_stateComment(h){let g=this.currentToken;switch(h){case ei.HYPHEN_MINUS:this.state=e_.COMMENT_END_DASH;break;case ei.LESS_THAN_SIGN:g.data+="<",this.state=e_.COMMENT_LESS_THAN_SIGN;break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.data+="";break;case ei.EOF:this._err(es.eofInComment),this.emitCurrentComment(g),this._emitEOFToken();break;default:g.data+=String.fromCodePoint(h)}}_stateCommentLessThanSign(h){let g=this.currentToken;switch(h){case ei.EXCLAMATION_MARK:g.data+="!",this.state=e_.COMMENT_LESS_THAN_SIGN_BANG;break;case ei.LESS_THAN_SIGN:g.data+="<";break;default:this.state=e_.COMMENT,this._stateComment(h)}}_stateCommentLessThanSignBang(h){h===ei.HYPHEN_MINUS?this.state=e_.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=e_.COMMENT,this._stateComment(h))}_stateCommentLessThanSignBangDash(h){h===ei.HYPHEN_MINUS?this.state=e_.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=e_.COMMENT_END_DASH,this._stateCommentEndDash(h))}_stateCommentLessThanSignBangDashDash(h){h!==ei.GREATER_THAN_SIGN&&h!==ei.EOF&&this._err(es.nestedComment),this.state=e_.COMMENT_END,this._stateCommentEnd(h)}_stateCommentEndDash(h){let g=this.currentToken;switch(h){case ei.HYPHEN_MINUS:this.state=e_.COMMENT_END;break;case ei.EOF:this._err(es.eofInComment),this.emitCurrentComment(g),this._emitEOFToken();break;default:g.data+="-",this.state=e_.COMMENT,this._stateComment(h)}}_stateCommentEnd(h){let g=this.currentToken;switch(h){case ei.GREATER_THAN_SIGN:this.state=e_.DATA,this.emitCurrentComment(g);break;case ei.EXCLAMATION_MARK:this.state=e_.COMMENT_END_BANG;break;case ei.HYPHEN_MINUS:g.data+="-";break;case ei.EOF:this._err(es.eofInComment),this.emitCurrentComment(g),this._emitEOFToken();break;default:g.data+="--",this.state=e_.COMMENT,this._stateComment(h)}}_stateCommentEndBang(h){let g=this.currentToken;switch(h){case ei.HYPHEN_MINUS:g.data+="--!",this.state=e_.COMMENT_END_DASH;break;case ei.GREATER_THAN_SIGN:this._err(es.incorrectlyClosedComment),this.state=e_.DATA,this.emitCurrentComment(g);break;case ei.EOF:this._err(es.eofInComment),this.emitCurrentComment(g),this._emitEOFToken();break;default:g.data+="--!",this.state=e_.COMMENT,this._stateComment(h)}}_stateDoctype(h){switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=e_.BEFORE_DOCTYPE_NAME;break;case ei.GREATER_THAN_SIGN:this.state=e_.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(h);break;case ei.EOF:{this._err(es.eofInDoctype),this._createDoctypeToken(null);let h=this.currentToken;h.forceQuirks=!0,this.emitCurrentDoctype(h),this._emitEOFToken();break}default:this._err(es.missingWhitespaceBeforeDoctypeName),this.state=e_.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(h)}}_stateBeforeDoctypeName(h){if(isAsciiUpper(h))this._createDoctypeToken(String.fromCharCode(h+32)),this.state=e_.DOCTYPE_NAME;else switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.NULL:this._err(es.unexpectedNullCharacter),this._createDoctypeToken(""),this.state=e_.DOCTYPE_NAME;break;case ei.GREATER_THAN_SIGN:{this._err(es.missingDoctypeName),this._createDoctypeToken(null);let h=this.currentToken;h.forceQuirks=!0,this.emitCurrentDoctype(h),this.state=e_.DATA;break}case ei.EOF:{this._err(es.eofInDoctype),this._createDoctypeToken(null);let h=this.currentToken;h.forceQuirks=!0,this.emitCurrentDoctype(h),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(h)),this.state=e_.DOCTYPE_NAME}}_stateDoctypeName(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=e_.AFTER_DOCTYPE_NAME;break;case ei.GREATER_THAN_SIGN:this.state=e_.DATA,this.emitCurrentDoctype(g);break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.name+="";break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:g.name+=String.fromCodePoint(isAsciiUpper(h)?h+32:h)}}_stateAfterDoctypeName(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.GREATER_THAN_SIGN:this.state=e_.DATA,this.emitCurrentDoctype(g);break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(n2.PUBLIC,!1)?this.state=e_.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(n2.SYSTEM,!1)?this.state=e_.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(es.invalidCharacterSequenceAfterDoctypeName),g.forceQuirks=!0,this.state=e_.BOGUS_DOCTYPE,this._stateBogusDoctype(h))}}_stateAfterDoctypePublicKeyword(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=e_.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case ei.QUOTATION_MARK:this._err(es.missingWhitespaceAfterDoctypePublicKeyword),g.publicId="",this.state=e_.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:this._err(es.missingWhitespaceAfterDoctypePublicKeyword),g.publicId="",this.state=e_.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case ei.GREATER_THAN_SIGN:this._err(es.missingDoctypePublicIdentifier),g.forceQuirks=!0,this.state=e_.DATA,this.emitCurrentDoctype(g);break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypePublicIdentifier),g.forceQuirks=!0,this.state=e_.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBeforeDoctypePublicIdentifier(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.QUOTATION_MARK:g.publicId="",this.state=e_.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:g.publicId="",this.state=e_.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case ei.GREATER_THAN_SIGN:this._err(es.missingDoctypePublicIdentifier),g.forceQuirks=!0,this.state=e_.DATA,this.emitCurrentDoctype(g);break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypePublicIdentifier),g.forceQuirks=!0,this.state=e_.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateDoctypePublicIdentifierDoubleQuoted(h){let g=this.currentToken;switch(h){case ei.QUOTATION_MARK:this.state=e_.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.publicId+="";break;case ei.GREATER_THAN_SIGN:this._err(es.abruptDoctypePublicIdentifier),g.forceQuirks=!0,this.emitCurrentDoctype(g),this.state=e_.DATA;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:g.publicId+=String.fromCodePoint(h)}}_stateDoctypePublicIdentifierSingleQuoted(h){let g=this.currentToken;switch(h){case ei.APOSTROPHE:this.state=e_.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.publicId+="";break;case ei.GREATER_THAN_SIGN:this._err(es.abruptDoctypePublicIdentifier),g.forceQuirks=!0,this.emitCurrentDoctype(g),this.state=e_.DATA;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:g.publicId+=String.fromCodePoint(h)}}_stateAfterDoctypePublicIdentifier(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=e_.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case ei.GREATER_THAN_SIGN:this.state=e_.DATA,this.emitCurrentDoctype(g);break;case ei.QUOTATION_MARK:this._err(es.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),g.systemId="",this.state=e_.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:this._err(es.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),g.systemId="",this.state=e_.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=e_.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBetweenDoctypePublicAndSystemIdentifiers(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.GREATER_THAN_SIGN:this.emitCurrentDoctype(g),this.state=e_.DATA;break;case ei.QUOTATION_MARK:g.systemId="",this.state=e_.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:g.systemId="",this.state=e_.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=e_.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateAfterDoctypeSystemKeyword(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:this.state=e_.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case ei.QUOTATION_MARK:this._err(es.missingWhitespaceAfterDoctypeSystemKeyword),g.systemId="",this.state=e_.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:this._err(es.missingWhitespaceAfterDoctypeSystemKeyword),g.systemId="",this.state=e_.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case ei.GREATER_THAN_SIGN:this._err(es.missingDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=e_.DATA,this.emitCurrentDoctype(g);break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=e_.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBeforeDoctypeSystemIdentifier(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.QUOTATION_MARK:g.systemId="",this.state=e_.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case ei.APOSTROPHE:g.systemId="",this.state=e_.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case ei.GREATER_THAN_SIGN:this._err(es.missingDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=e_.DATA,this.emitCurrentDoctype(g);break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.missingQuoteBeforeDoctypeSystemIdentifier),g.forceQuirks=!0,this.state=e_.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateDoctypeSystemIdentifierDoubleQuoted(h){let g=this.currentToken;switch(h){case ei.QUOTATION_MARK:this.state=e_.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.systemId+="";break;case ei.GREATER_THAN_SIGN:this._err(es.abruptDoctypeSystemIdentifier),g.forceQuirks=!0,this.emitCurrentDoctype(g),this.state=e_.DATA;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:g.systemId+=String.fromCodePoint(h)}}_stateDoctypeSystemIdentifierSingleQuoted(h){let g=this.currentToken;switch(h){case ei.APOSTROPHE:this.state=e_.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case ei.NULL:this._err(es.unexpectedNullCharacter),g.systemId+="";break;case ei.GREATER_THAN_SIGN:this._err(es.abruptDoctypeSystemIdentifier),g.forceQuirks=!0,this.emitCurrentDoctype(g),this.state=e_.DATA;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:g.systemId+=String.fromCodePoint(h)}}_stateAfterDoctypeSystemIdentifier(h){let g=this.currentToken;switch(h){case ei.SPACE:case ei.LINE_FEED:case ei.TABULATION:case ei.FORM_FEED:break;case ei.GREATER_THAN_SIGN:this.emitCurrentDoctype(g),this.state=e_.DATA;break;case ei.EOF:this._err(es.eofInDoctype),g.forceQuirks=!0,this.emitCurrentDoctype(g),this._emitEOFToken();break;default:this._err(es.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=e_.BOGUS_DOCTYPE,this._stateBogusDoctype(h)}}_stateBogusDoctype(h){let g=this.currentToken;switch(h){case ei.GREATER_THAN_SIGN:this.emitCurrentDoctype(g),this.state=e_.DATA;break;case ei.NULL:this._err(es.unexpectedNullCharacter);break;case ei.EOF:this.emitCurrentDoctype(g),this._emitEOFToken()}}_stateCdataSection(h){switch(h){case ei.RIGHT_SQUARE_BRACKET:this.state=e_.CDATA_SECTION_BRACKET;break;case ei.EOF:this._err(es.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(h)}}_stateCdataSectionBracket(h){h===ei.RIGHT_SQUARE_BRACKET?this.state=e_.CDATA_SECTION_END:(this._emitChars("]"),this.state=e_.CDATA_SECTION,this._stateCdataSection(h))}_stateCdataSectionEnd(h){switch(h){case ei.GREATER_THAN_SIGN:this.state=e_.DATA;break;case ei.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=e_.CDATA_SECTION,this._stateCdataSection(h)}}_stateCharacterReference(h){h===ei.NUMBER_SIGN?this.state=e_.NUMERIC_CHARACTER_REFERENCE:tokenizer_isAsciiAlphaNumeric(h)?(this.state=e_.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(h)):(this._flushCodePointConsumedAsCharacterReference(ei.AMPERSAND),this._reconsumeInState(this.returnState,h))}_stateNamedCharacterReference(h){let g=this._matchNamedCharacterReference(h);if(this._ensureHibernation());else if(g){for(let h=0;h<g.length;h++)this._flushCodePointConsumedAsCharacterReference(g[h]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(ei.AMPERSAND),this.state=e_.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(h){tokenizer_isAsciiAlphaNumeric(h)?this._flushCodePointConsumedAsCharacterReference(h):(h===ei.SEMICOLON&&this._err(es.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,h))}_stateNumericCharacterReference(h){this.charRefCode=0,h===ei.LATIN_SMALL_X||h===ei.LATIN_CAPITAL_X?this.state=e_.HEXADEMICAL_CHARACTER_REFERENCE_START:isAsciiDigit(h)?(this.state=e_.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(h)):(this._err(es.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ei.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ei.NUMBER_SIGN),this._reconsumeInState(this.returnState,h))}_stateHexademicalCharacterReferenceStart(h){isAsciiDigit(h)||isAsciiUpperHexDigit(h)||isAsciiLowerHexDigit(h)?(this.state=e_.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(h)):(this._err(es.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ei.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ei.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(h){isAsciiUpperHexDigit(h)?this.charRefCode=16*this.charRefCode+h-55:isAsciiLowerHexDigit(h)?this.charRefCode=16*this.charRefCode+h-87:isAsciiDigit(h)?this.charRefCode=16*this.charRefCode+h-48:h===ei.SEMICOLON?this.state=e_.NUMERIC_CHARACTER_REFERENCE_END:(this._err(es.missingSemicolonAfterCharacterReference),this.state=e_.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(h))}_stateDecimalCharacterReference(h){isAsciiDigit(h)?this.charRefCode=10*this.charRefCode+h-48:h===ei.SEMICOLON?this.state=e_.NUMERIC_CHARACTER_REFERENCE_END:(this._err(es.missingSemicolonAfterCharacterReference),this.state=e_.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(h))}_stateNumericCharacterReferenceEnd(h){if(this.charRefCode===ei.NULL)this._err(es.nullCharacterReference),this.charRefCode=ei.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(es.characterReferenceOutsideUnicodeRange),this.charRefCode=ei.REPLACEMENT_CHARACTER;else if(isSurrogate(this.charRefCode))this._err(es.surrogateCharacterReference),this.charRefCode=ei.REPLACEMENT_CHARACTER;else if(isUndefinedCodePoint(this.charRefCode))this._err(es.noncharacterCharacterReference);else if(isControlCodePoint(this.charRefCode)||this.charRefCode===ei.CARRIAGE_RETURN){this._err(es.controlCharacterReference);let h=re.get(this.charRefCode);void 0!==h&&(this.charRefCode=h)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,h)}};let rn=new Set([eT.DD,eT.DT,eT.LI,eT.OPTGROUP,eT.OPTION,eT.P,eT.RB,eT.RP,eT.RT,eT.RTC]),rr=new Set([...rn,eT.CAPTION,eT.COLGROUP,eT.TBODY,eT.TD,eT.TFOOT,eT.TH,eT.THEAD,eT.TR]),rs=new Map([[eT.APPLET,ef.HTML],[eT.CAPTION,ef.HTML],[eT.HTML,ef.HTML],[eT.MARQUEE,ef.HTML],[eT.OBJECT,ef.HTML],[eT.TABLE,ef.HTML],[eT.TD,ef.HTML],[eT.TEMPLATE,ef.HTML],[eT.TH,ef.HTML],[eT.ANNOTATION_XML,ef.MATHML],[eT.MI,ef.MATHML],[eT.MN,ef.MATHML],[eT.MO,ef.MATHML],[eT.MS,ef.MATHML],[eT.MTEXT,ef.MATHML],[eT.DESC,ef.SVG],[eT.FOREIGN_OBJECT,ef.SVG],[eT.TITLE,ef.SVG]]),rl=[eT.H1,eT.H2,eT.H3,eT.H4,eT.H5,eT.H6],rc=[eT.TR,eT.TEMPLATE,eT.HTML],ru=[eT.TBODY,eT.TFOOT,eT.THEAD,eT.TEMPLATE,eT.HTML],rd=[eT.TABLE,eT.TEMPLATE,eT.HTML],rp=[eT.TD,eT.TH];let OpenElementStack=class OpenElementStack{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(h,g,E){this.treeAdapter=g,this.handler=E,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=eT.UNKNOWN,this.current=h}_indexOf(h){return this.items.lastIndexOf(h,this.stackTop)}_isInTemplate(){return this.currentTagId===eT.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ef.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(h,g){this.stackTop++,this.items[this.stackTop]=h,this.current=h,this.tagIDs[this.stackTop]=g,this.currentTagId=g,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(h,g,!0)}pop(){let h=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(h,!0)}replace(h,g){let E=this._indexOf(h);this.items[E]=g,E===this.stackTop&&(this.current=g)}insertAfter(h,g,E){let _=this._indexOf(h)+1;this.items.splice(_,0,g),this.tagIDs.splice(_,0,E),this.stackTop++,_===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,_===this.stackTop)}popUntilTagNamePopped(h){let g=this.stackTop+1;do g=this.tagIDs.lastIndexOf(h,g-1);while(g>0&&this.treeAdapter.getNamespaceURI(this.items[g])!==ef.HTML);this.shortenToLength(g<0?0:g)}shortenToLength(h){for(;this.stackTop>=h;){let g=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(g,this.stackTop<h)}}popUntilElementPopped(h){let g=this._indexOf(h);this.shortenToLength(g<0?0:g)}popUntilPopped(h,g){let E=this._indexOfTagNames(h,g);this.shortenToLength(E<0?0:E)}popUntilNumberedHeaderPopped(){this.popUntilPopped(rl,ef.HTML)}popUntilTableCellPopped(){this.popUntilPopped(rp,ef.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(h,g){for(let E=this.stackTop;E>=0;E--)if(h.includes(this.tagIDs[E])&&this.treeAdapter.getNamespaceURI(this.items[E])===g)return E;return -1}clearBackTo(h,g){let E=this._indexOfTagNames(h,g);this.shortenToLength(E+1)}clearBackToTableContext(){this.clearBackTo(rd,ef.HTML)}clearBackToTableBodyContext(){this.clearBackTo(ru,ef.HTML)}clearBackToTableRowContext(){this.clearBackTo(rc,ef.HTML)}remove(h){let g=this._indexOf(h);g>=0&&(g===this.stackTop?this.pop():(this.items.splice(g,1),this.tagIDs.splice(g,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(h,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===eT.BODY?this.items[1]:null}contains(h){return this._indexOf(h)>-1}getCommonAncestor(h){let g=this._indexOf(h)-1;return g>=0?this.items[g]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===eT.HTML}hasInScope(h){for(let g=this.stackTop;g>=0;g--){let E=this.tagIDs[g],_=this.treeAdapter.getNamespaceURI(this.items[g]);if(E===h&&_===ef.HTML)break;if(rs.get(E)===_)return!1}return!0}hasNumberedHeaderInScope(){for(let h=this.stackTop;h>=0;h--){let g=this.tagIDs[h],E=this.treeAdapter.getNamespaceURI(this.items[h]);if(isNumberedHeader(g)&&E===ef.HTML)break;if(rs.get(g)===E)return!1}return!0}hasInListItemScope(h){for(let g=this.stackTop;g>=0;g--){let E=this.tagIDs[g],_=this.treeAdapter.getNamespaceURI(this.items[g]);if(E===h&&_===ef.HTML)break;if((E===eT.UL||E===eT.OL)&&_===ef.HTML||rs.get(E)===_)return!1}return!0}hasInButtonScope(h){for(let g=this.stackTop;g>=0;g--){let E=this.tagIDs[g],_=this.treeAdapter.getNamespaceURI(this.items[g]);if(E===h&&_===ef.HTML)break;if(E===eT.BUTTON&&_===ef.HTML||rs.get(E)===_)return!1}return!0}hasInTableScope(h){for(let g=this.stackTop;g>=0;g--){let E=this.tagIDs[g],_=this.treeAdapter.getNamespaceURI(this.items[g]);if(_===ef.HTML){if(E===h)break;if(E===eT.TABLE||E===eT.TEMPLATE||E===eT.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let h=this.stackTop;h>=0;h--){let g=this.tagIDs[h],E=this.treeAdapter.getNamespaceURI(this.items[h]);if(E===ef.HTML){if(g===eT.TBODY||g===eT.THEAD||g===eT.TFOOT)break;if(g===eT.TABLE||g===eT.HTML)return!1}}return!0}hasInSelectScope(h){for(let g=this.stackTop;g>=0;g--){let E=this.tagIDs[g],_=this.treeAdapter.getNamespaceURI(this.items[g]);if(_===ef.HTML){if(E===h)break;if(E!==eT.OPTION&&E!==eT.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;rn.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;rr.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(h){for(;this.currentTagId!==h&&rr.has(this.currentTagId);)this.pop()}};(Q=eA=eA||(eA={}))[Q.Marker=0]="Marker",Q[Q.Element=1]="Element";let rh={type:eA.Marker};let FormattingElementList=class FormattingElementList{constructor(h){this.treeAdapter=h,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(h,g){let E=[],_=g.length,A=this.treeAdapter.getTagName(h),b=this.treeAdapter.getNamespaceURI(h);for(let h=0;h<this.entries.length;h++){let g=this.entries[h];if(g.type===eA.Marker)break;let{element:C}=g;if(this.treeAdapter.getTagName(C)===A&&this.treeAdapter.getNamespaceURI(C)===b){let g=this.treeAdapter.getAttrList(C);g.length===_&&E.push({idx:h,attrs:g})}}return E}_ensureNoahArkCondition(h){if(this.entries.length<3)return;let g=this.treeAdapter.getAttrList(h),E=this._getNoahArkConditionCandidates(h,g);if(E.length<3)return;let _=new Map(g.map(h=>[h.name,h.value])),A=0;for(let h=0;h<E.length;h++){let g=E[h];g.attrs.every(h=>_.get(h.name)===h.value)&&(A+=1)>=3&&this.entries.splice(g.idx,1)}}insertMarker(){this.entries.unshift(rh)}pushElement(h,g){this._ensureNoahArkCondition(h),this.entries.unshift({type:eA.Element,element:h,token:g})}insertElementAfterBookmark(h,g){let E=this.entries.indexOf(this.bookmark);this.entries.splice(E,0,{type:eA.Element,element:h,token:g})}removeEntry(h){let g=this.entries.indexOf(h);g>=0&&this.entries.splice(g,1)}clearToLastMarker(){let h=this.entries.indexOf(rh);h>=0?this.entries.splice(0,h+1):this.entries.length=0}getElementEntryInScopeWithTagName(h){let g=this.entries.find(g=>g.type===eA.Marker||this.treeAdapter.getTagName(g.element)===h);return g&&g.type===eA.Element?g:null}getElementEntry(h){return this.entries.find(g=>g.type===eA.Element&&g.element===h)}};function createTextNode(h){return{nodeName:"#text",value:h,parentNode:null}}let rf={createDocument:()=>({nodeName:"#document",mode:eg.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(h,g,E)=>({nodeName:h,tagName:h,attrs:E,namespaceURI:g,childNodes:[],parentNode:null}),createCommentNode:h=>({nodeName:"#comment",data:h,parentNode:null}),appendChild(h,g){h.childNodes.push(g),g.parentNode=h},insertBefore(h,g,E){let _=h.childNodes.indexOf(E);h.childNodes.splice(_,0,g),g.parentNode=h},setTemplateContent(h,g){h.content=g},getTemplateContent:h=>h.content,setDocumentType(h,g,E,_){let A=h.childNodes.find(h=>"#documentType"===h.nodeName);A?(A.name=g,A.publicId=E,A.systemId=_):rf.appendChild(h,{nodeName:"#documentType",name:g,publicId:E,systemId:_,parentNode:null})},setDocumentMode(h,g){h.mode=g},getDocumentMode:h=>h.mode,detachNode(h){if(h.parentNode){let g=h.parentNode.childNodes.indexOf(h);h.parentNode.childNodes.splice(g,1),h.parentNode=null}},insertText(h,g){if(h.childNodes.length>0){let E=h.childNodes[h.childNodes.length-1];if(rf.isTextNode(E)){E.value+=g;return}}rf.appendChild(h,createTextNode(g))},insertTextBefore(h,g,E){let _=h.childNodes[h.childNodes.indexOf(E)-1];_&&rf.isTextNode(_)?_.value+=g:rf.insertBefore(h,createTextNode(g),E)},adoptAttributes(h,g){let E=new Set(h.attrs.map(h=>h.name));for(let _=0;_<g.length;_++)E.has(g[_].name)||h.attrs.push(g[_])},getFirstChild:h=>h.childNodes[0],getChildNodes:h=>h.childNodes,getParentNode:h=>h.parentNode,getAttrList:h=>h.attrs,getTagName:h=>h.tagName,getNamespaceURI:h=>h.namespaceURI,getTextNodeContent:h=>h.value,getCommentNodeContent:h=>h.data,getDocumentTypeNodeName:h=>h.name,getDocumentTypeNodePublicId:h=>h.publicId,getDocumentTypeNodeSystemId:h=>h.systemId,isTextNode:h=>"#text"===h.nodeName,isCommentNode:h=>"#comment"===h.nodeName,isDocumentTypeNode:h=>"#documentType"===h.nodeName,isElementNode:h=>Object.prototype.hasOwnProperty.call(h,"tagName"),setNodeSourceCodeLocation(h,g){h.sourceCodeLocation=g},getNodeSourceCodeLocation:h=>h.sourceCodeLocation,updateNodeSourceCodeLocation(h,g){h.sourceCodeLocation={...h.sourceCodeLocation,...g}}},rm="html",rg=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],rE=[...rg,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],rT=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),r_=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],rA=[...r_,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hasPrefix(h,g){return g.some(g=>h.startsWith(g))}let ry={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},rv=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(h=>[h.toLowerCase(),h])),rb=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ef.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ef.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ef.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ef.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ef.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ef.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ef.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ef.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ef.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ef.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ef.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ef.XMLNS}]]),rx=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(h=>[h.toLowerCase(),h])),rC=new Set([eT.B,eT.BIG,eT.BLOCKQUOTE,eT.BODY,eT.BR,eT.CENTER,eT.CODE,eT.DD,eT.DIV,eT.DL,eT.DT,eT.EM,eT.EMBED,eT.H1,eT.H2,eT.H3,eT.H4,eT.H5,eT.H6,eT.HEAD,eT.HR,eT.I,eT.IMG,eT.LI,eT.LISTING,eT.MENU,eT.META,eT.NOBR,eT.OL,eT.P,eT.PRE,eT.RUBY,eT.S,eT.SMALL,eT.SPAN,eT.STRONG,eT.STRIKE,eT.SUB,eT.SUP,eT.TABLE,eT.TT,eT.U,eT.UL,eT.VAR]);function adjustTokenMathMLAttrs(h){for(let g=0;g<h.attrs.length;g++)if("definitionurl"===h.attrs[g].name){h.attrs[g].name="definitionURL";break}}function adjustTokenSVGAttrs(h){for(let g=0;g<h.attrs.length;g++){let E=rv.get(h.attrs[g].name);null!=E&&(h.attrs[g].name=E)}}function adjustTokenXMLAttrs(h){for(let g=0;g<h.attrs.length;g++){let E=rb.get(h.attrs[g].name);E&&(h.attrs[g].prefix=E.prefix,h.attrs[g].name=E.name,h.attrs[g].namespace=E.namespace)}}(Z=ey||(ey={}))[Z.INITIAL=0]="INITIAL",Z[Z.BEFORE_HTML=1]="BEFORE_HTML",Z[Z.BEFORE_HEAD=2]="BEFORE_HEAD",Z[Z.IN_HEAD=3]="IN_HEAD",Z[Z.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",Z[Z.AFTER_HEAD=5]="AFTER_HEAD",Z[Z.IN_BODY=6]="IN_BODY",Z[Z.TEXT=7]="TEXT",Z[Z.IN_TABLE=8]="IN_TABLE",Z[Z.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",Z[Z.IN_CAPTION=10]="IN_CAPTION",Z[Z.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",Z[Z.IN_TABLE_BODY=12]="IN_TABLE_BODY",Z[Z.IN_ROW=13]="IN_ROW",Z[Z.IN_CELL=14]="IN_CELL",Z[Z.IN_SELECT=15]="IN_SELECT",Z[Z.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",Z[Z.IN_TEMPLATE=17]="IN_TEMPLATE",Z[Z.AFTER_BODY=18]="AFTER_BODY",Z[Z.IN_FRAMESET=19]="IN_FRAMESET",Z[Z.AFTER_FRAMESET=20]="AFTER_FRAMESET",Z[Z.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",Z[Z.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET";let rI={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},rk=new Set([eT.TABLE,eT.TBODY,eT.TFOOT,eT.THEAD,eT.TR]),rS={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:rf,onParseError:null};let parser_Parser=class parser_Parser{constructor(h,g,E=null,_=null){this.fragmentContext=E,this.scriptHandler=_,this.currentToken=null,this.stopped=!1,this.insertionMode=ey.INITIAL,this.originalInsertionMode=ey.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...rS,...h},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=g?g:this.treeAdapter.createDocument(),this.tokenizer=new Tokenizer(this.options,this),this.activeFormattingElements=new FormattingElementList(this.treeAdapter),this.fragmentContextID=E?getTagID(this.treeAdapter.getTagName(E)):eT.UNKNOWN,this._setContextModes(null!=E?E:this.document,this.fragmentContextID),this.openElements=new OpenElementStack(this.document,this.treeAdapter,this)}static parse(h,g){let E=new this(g);return E.tokenizer.write(h,!0),E.document}static getFragmentParser(h,g){let E={...rS,...g};null!=h||(h=E.treeAdapter.createElement(eE.TEMPLATE,ef.HTML,[]));let _=E.treeAdapter.createElement("documentmock",ef.HTML,[]),A=new this(E,_,h);return A.fragmentContextID===eT.TEMPLATE&&A.tmplInsertionModeStack.unshift(ey.IN_TEMPLATE),A._initTokenizerForFragmentParsing(),A._insertFakeRootElement(),A._resetInsertionMode(),A._findFormInFragmentContext(),A}getFragment(){let h=this.treeAdapter.getFirstChild(this.document),g=this.treeAdapter.createDocumentFragment();return this._adoptNodes(h,g),g}_err(h,g,E){var _;if(!this.onParseError)return;let A=null!==(_=h.location)&&void 0!==_?_:rI,b={code:g,startLine:A.startLine,startCol:A.startCol,startOffset:A.startOffset,endLine:E?A.startLine:A.endLine,endCol:E?A.startCol:A.endCol,endOffset:E?A.startOffset:A.endOffset};this.onParseError(b)}onItemPush(h,g,E){var _,A;null===(A=(_=this.treeAdapter).onItemPush)||void 0===A||A.call(_,h),E&&this.openElements.stackTop>0&&this._setContextModes(h,g)}onItemPop(h,g){var E,_;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(h,this.currentToken),null===(_=(E=this.treeAdapter).onItemPop)||void 0===_||_.call(E,h,this.openElements.current),g){let h,g;0===this.openElements.stackTop&&this.fragmentContext?(h=this.fragmentContext,g=this.fragmentContextID):{current:h,currentTagId:g}=this.openElements,this._setContextModes(h,g)}}_setContextModes(h,g){let E=h===this.document||this.treeAdapter.getNamespaceURI(h)===ef.HTML;this.currentNotInHTML=!E,this.tokenizer.inForeignNode=!E&&!this._isIntegrationPoint(g,h)}_switchToTextParsing(h,g){this._insertElement(h,ef.HTML),this.tokenizer.state=g,this.originalInsertionMode=this.insertionMode,this.insertionMode=ey.TEXT}switchToPlaintextParsing(){this.insertionMode=ey.TEXT,this.originalInsertionMode=ey.IN_BODY,this.tokenizer.state=rt.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let h=this.fragmentContext;for(;h;){if(this.treeAdapter.getTagName(h)===eE.FORM){this.formElement=h;break}h=this.treeAdapter.getParentNode(h)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===ef.HTML)switch(this.fragmentContextID){case eT.TITLE:case eT.TEXTAREA:this.tokenizer.state=rt.RCDATA;break;case eT.STYLE:case eT.XMP:case eT.IFRAME:case eT.NOEMBED:case eT.NOFRAMES:case eT.NOSCRIPT:this.tokenizer.state=rt.RAWTEXT;break;case eT.SCRIPT:this.tokenizer.state=rt.SCRIPT_DATA;break;case eT.PLAINTEXT:this.tokenizer.state=rt.PLAINTEXT}}_setDocumentType(h){let g=h.name||"",E=h.publicId||"",_=h.systemId||"";if(this.treeAdapter.setDocumentType(this.document,g,E,_),h.location){let g=this.treeAdapter.getChildNodes(this.document),E=g.find(h=>this.treeAdapter.isDocumentTypeNode(h));E&&this.treeAdapter.setNodeSourceCodeLocation(E,h.location)}}_attachElementToTree(h,g){if(this.options.sourceCodeLocationInfo){let E=g&&{...g,startTag:g};this.treeAdapter.setNodeSourceCodeLocation(h,E)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(h);else{let g=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(g,h)}}_appendElement(h,g){let E=this.treeAdapter.createElement(h.tagName,g,h.attrs);this._attachElementToTree(E,h.location)}_insertElement(h,g){let E=this.treeAdapter.createElement(h.tagName,g,h.attrs);this._attachElementToTree(E,h.location),this.openElements.push(E,h.tagID)}_insertFakeElement(h,g){let E=this.treeAdapter.createElement(h,ef.HTML,[]);this._attachElementToTree(E,null),this.openElements.push(E,g)}_insertTemplate(h){let g=this.treeAdapter.createElement(h.tagName,ef.HTML,h.attrs),E=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(g,E),this._attachElementToTree(g,h.location),this.openElements.push(g,h.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(E,null)}_insertFakeRootElement(){let h=this.treeAdapter.createElement(eE.HTML,ef.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(h,null),this.treeAdapter.appendChild(this.openElements.current,h),this.openElements.push(h,eT.HTML)}_appendCommentNode(h,g){let E=this.treeAdapter.createCommentNode(h.data);this.treeAdapter.appendChild(g,E),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(E,h.location)}_insertCharacters(h){let g,E;if(this._shouldFosterParentOnInsertion()?({parent:g,beforeElement:E}=this._findFosterParentingLocation(),E?this.treeAdapter.insertTextBefore(g,h.chars,E):this.treeAdapter.insertText(g,h.chars)):(g=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(g,h.chars)),!h.location)return;let _=this.treeAdapter.getChildNodes(g),A=E?_.lastIndexOf(E):_.length,b=_[A-1],C=this.treeAdapter.getNodeSourceCodeLocation(b);if(C){let{endLine:g,endCol:E,endOffset:_}=h.location;this.treeAdapter.updateNodeSourceCodeLocation(b,{endLine:g,endCol:E,endOffset:_})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(b,h.location)}_adoptNodes(h,g){for(let E=this.treeAdapter.getFirstChild(h);E;E=this.treeAdapter.getFirstChild(h))this.treeAdapter.detachNode(E),this.treeAdapter.appendChild(g,E)}_setEndLocation(h,g){if(this.treeAdapter.getNodeSourceCodeLocation(h)&&g.location){let E=g.location,_=this.treeAdapter.getTagName(h),A=g.type===el.END_TAG&&_===g.tagName?{endTag:{...E},endLine:E.endLine,endCol:E.endCol,endOffset:E.endOffset}:{endLine:E.startLine,endCol:E.startCol,endOffset:E.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(h,A)}}shouldProcessStartTagTokenInForeignContent(h){let g,E;return!!this.currentNotInHTML&&(0===this.openElements.stackTop&&this.fragmentContext?(g=this.fragmentContext,E=this.fragmentContextID):{current:g,currentTagId:E}=this.openElements,(h.tagID!==eT.SVG||this.treeAdapter.getTagName(g)!==eE.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(g)!==ef.MATHML)&&(this.tokenizer.inForeignNode||(h.tagID===eT.MGLYPH||h.tagID===eT.MALIGNMARK)&&!this._isIntegrationPoint(E,g,ef.HTML)))}_processToken(h){switch(h.type){case el.CHARACTER:this.onCharacter(h);break;case el.NULL_CHARACTER:this.onNullCharacter(h);break;case el.COMMENT:this.onComment(h);break;case el.DOCTYPE:this.onDoctype(h);break;case el.START_TAG:this._processStartTag(h);break;case el.END_TAG:this.onEndTag(h);break;case el.EOF:this.onEof(h);break;case el.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(h)}}_isIntegrationPoint(h,g,E){let _=this.treeAdapter.getNamespaceURI(g),A=this.treeAdapter.getAttrList(g);return(!E||E===ef.HTML)&&function(h,g,E){if(g===ef.MATHML&&h===eT.ANNOTATION_XML){for(let h=0;h<E.length;h++)if(E[h].name===em.ENCODING){let g=E[h].value.toLowerCase();return g===ry.TEXT_HTML||g===ry.APPLICATION_XML}}return g===ef.SVG&&(h===eT.FOREIGN_OBJECT||h===eT.DESC||h===eT.TITLE)}(h,_,A)||(!E||E===ef.MATHML)&&_===ef.MATHML&&(h===eT.MI||h===eT.MO||h===eT.MN||h===eT.MS||h===eT.MTEXT)}_reconstructActiveFormattingElements(){let h=this.activeFormattingElements.entries.length;if(h){let g=this.activeFormattingElements.entries.findIndex(h=>h.type===eA.Marker||this.openElements.contains(h.element)),E=g<0?h-1:g-1;for(let h=E;h>=0;h--){let g=this.activeFormattingElements.entries[h];this._insertElement(g.token,this.treeAdapter.getNamespaceURI(g.element)),g.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ey.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(eT.P),this.openElements.popUntilTagNamePopped(eT.P)}_resetInsertionMode(){for(let h=this.openElements.stackTop;h>=0;h--)switch(0===h&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[h]){case eT.TR:this.insertionMode=ey.IN_ROW;return;case eT.TBODY:case eT.THEAD:case eT.TFOOT:this.insertionMode=ey.IN_TABLE_BODY;return;case eT.CAPTION:this.insertionMode=ey.IN_CAPTION;return;case eT.COLGROUP:this.insertionMode=ey.IN_COLUMN_GROUP;return;case eT.TABLE:this.insertionMode=ey.IN_TABLE;return;case eT.BODY:this.insertionMode=ey.IN_BODY;return;case eT.FRAMESET:this.insertionMode=ey.IN_FRAMESET;return;case eT.SELECT:this._resetInsertionModeForSelect(h);return;case eT.TEMPLATE:this.insertionMode=this.tmplInsertionModeStack[0];return;case eT.HTML:this.insertionMode=this.headElement?ey.AFTER_HEAD:ey.BEFORE_HEAD;return;case eT.TD:case eT.TH:if(h>0){this.insertionMode=ey.IN_CELL;return}break;case eT.HEAD:if(h>0){this.insertionMode=ey.IN_HEAD;return}}this.insertionMode=ey.IN_BODY}_resetInsertionModeForSelect(h){if(h>0)for(let g=h-1;g>0;g--){let h=this.openElements.tagIDs[g];if(h===eT.TEMPLATE)break;if(h===eT.TABLE){this.insertionMode=ey.IN_SELECT_IN_TABLE;return}}this.insertionMode=ey.IN_SELECT}_isElementCausesFosterParenting(h){return rk.has(h)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let h=this.openElements.stackTop;h>=0;h--){let g=this.openElements.items[h];switch(this.openElements.tagIDs[h]){case eT.TEMPLATE:if(this.treeAdapter.getNamespaceURI(g)===ef.HTML)return{parent:this.treeAdapter.getTemplateContent(g),beforeElement:null};break;case eT.TABLE:{let E=this.treeAdapter.getParentNode(g);if(E)return{parent:E,beforeElement:g};return{parent:this.openElements.items[h-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(h){let g=this._findFosterParentingLocation();g.beforeElement?this.treeAdapter.insertBefore(g.parent,h,g.beforeElement):this.treeAdapter.appendChild(g.parent,h)}_isSpecialElement(h,g){let E=this.treeAdapter.getNamespaceURI(h);return n7[E].has(g)}onCharacter(h){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){this._insertCharacters(h),this.framesetOk=!1;return}switch(this.insertionMode){case ey.INITIAL:tokenInInitialMode(this,h);break;case ey.BEFORE_HTML:tokenBeforeHtml(this,h);break;case ey.BEFORE_HEAD:tokenBeforeHead(this,h);break;case ey.IN_HEAD:tokenInHead(this,h);break;case ey.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,h);break;case ey.AFTER_HEAD:tokenAfterHead(this,h);break;case ey.IN_BODY:case ey.IN_CAPTION:case ey.IN_CELL:case ey.IN_TEMPLATE:characterInBody(this,h);break;case ey.TEXT:case ey.IN_SELECT:case ey.IN_SELECT_IN_TABLE:this._insertCharacters(h);break;case ey.IN_TABLE:case ey.IN_TABLE_BODY:case ey.IN_ROW:characterInTable(this,h);break;case ey.IN_TABLE_TEXT:characterInTableText(this,h);break;case ey.IN_COLUMN_GROUP:tokenInColumnGroup(this,h);break;case ey.AFTER_BODY:tokenAfterBody(this,h);break;case ey.AFTER_AFTER_BODY:tokenAfterAfterBody(this,h)}}onNullCharacter(h){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){h.chars="",this._insertCharacters(h);return}switch(this.insertionMode){case ey.INITIAL:tokenInInitialMode(this,h);break;case ey.BEFORE_HTML:tokenBeforeHtml(this,h);break;case ey.BEFORE_HEAD:tokenBeforeHead(this,h);break;case ey.IN_HEAD:tokenInHead(this,h);break;case ey.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,h);break;case ey.AFTER_HEAD:tokenAfterHead(this,h);break;case ey.TEXT:this._insertCharacters(h);break;case ey.IN_TABLE:case ey.IN_TABLE_BODY:case ey.IN_ROW:characterInTable(this,h);break;case ey.IN_COLUMN_GROUP:tokenInColumnGroup(this,h);break;case ey.AFTER_BODY:tokenAfterBody(this,h);break;case ey.AFTER_AFTER_BODY:tokenAfterAfterBody(this,h)}}onComment(h){if(this.skipNextNewLine=!1,this.currentNotInHTML){appendComment(this,h);return}switch(this.insertionMode){case ey.INITIAL:case ey.BEFORE_HTML:case ey.BEFORE_HEAD:case ey.IN_HEAD:case ey.IN_HEAD_NO_SCRIPT:case ey.AFTER_HEAD:case ey.IN_BODY:case ey.IN_TABLE:case ey.IN_CAPTION:case ey.IN_COLUMN_GROUP:case ey.IN_TABLE_BODY:case ey.IN_ROW:case ey.IN_CELL:case ey.IN_SELECT:case ey.IN_SELECT_IN_TABLE:case ey.IN_TEMPLATE:case ey.IN_FRAMESET:case ey.AFTER_FRAMESET:appendComment(this,h);break;case ey.IN_TABLE_TEXT:tokenInTableText(this,h);break;case ey.AFTER_BODY:!function(h,g){h._appendCommentNode(g,h.openElements.items[0])}(this,h);break;case ey.AFTER_AFTER_BODY:case ey.AFTER_AFTER_FRAMESET:!function(h,g){h._appendCommentNode(g,h.document)}(this,h)}}onDoctype(h){switch(this.skipNextNewLine=!1,this.insertionMode){case ey.INITIAL:!function(h,g){h._setDocumentType(g);let E=g.forceQuirks?eg.QUIRKS:function(h){if(h.name!==rm)return eg.QUIRKS;let{systemId:g}=h;if(g&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===g.toLowerCase())return eg.QUIRKS;let{publicId:E}=h;if(null!==E){if(E=E.toLowerCase(),rT.has(E))return eg.QUIRKS;let h=null===g?rE:rg;if(hasPrefix(E,h))return eg.QUIRKS;if(hasPrefix(E,h=null===g?r_:rA))return eg.LIMITED_QUIRKS}return eg.NO_QUIRKS}(g);g.name===rm&&null===g.publicId&&(null===g.systemId||"about:legacy-compat"===g.systemId)||h._err(g,es.nonConformingDoctype),h.treeAdapter.setDocumentMode(h.document,E),h.insertionMode=ey.BEFORE_HTML}(this,h);break;case ey.BEFORE_HEAD:case ey.IN_HEAD:case ey.IN_HEAD_NO_SCRIPT:case ey.AFTER_HEAD:this._err(h,es.misplacedDoctype);break;case ey.IN_TABLE_TEXT:tokenInTableText(this,h)}}onStartTag(h){this.skipNextNewLine=!1,this.currentToken=h,this._processStartTag(h),h.selfClosing&&!h.ackSelfClosing&&this._err(h,es.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(h){this.shouldProcessStartTagTokenInForeignContent(h)?function(h,g){if(function(h){let g=h.tagID,E=g===eT.FONT&&h.attrs.some(({name:h})=>h===em.COLOR||h===em.SIZE||h===em.FACE);return E||rC.has(g)}(g))popUntilHtmlOrIntegrationPoint(h),h._startTagOutsideForeignContent(g);else{let E=h._getAdjustedCurrentElement(),_=h.treeAdapter.getNamespaceURI(E);_===ef.MATHML?adjustTokenMathMLAttrs(g):_===ef.SVG&&(function(h){let g=rx.get(h.tagName);null!=g&&(h.tagName=g,h.tagID=getTagID(h.tagName))}(g),adjustTokenSVGAttrs(g)),adjustTokenXMLAttrs(g),g.selfClosing?h._appendElement(g,_):h._insertElement(g,_),g.ackSelfClosing=!0}}(this,h):this._startTagOutsideForeignContent(h)}_startTagOutsideForeignContent(h){switch(this.insertionMode){case ey.INITIAL:tokenInInitialMode(this,h);break;case ey.BEFORE_HTML:h.tagID===eT.HTML?(this._insertElement(h,ef.HTML),this.insertionMode=ey.BEFORE_HEAD):tokenBeforeHtml(this,h);break;case ey.BEFORE_HEAD:!function(h,g){switch(g.tagID){case eT.HTML:startTagInBody(h,g);break;case eT.HEAD:h._insertElement(g,ef.HTML),h.headElement=h.openElements.current,h.insertionMode=ey.IN_HEAD;break;default:tokenBeforeHead(h,g)}}(this,h);break;case ey.IN_HEAD:startTagInHead(this,h);break;case ey.IN_HEAD_NO_SCRIPT:!function(h,g){switch(g.tagID){case eT.HTML:startTagInBody(h,g);break;case eT.BASEFONT:case eT.BGSOUND:case eT.HEAD:case eT.LINK:case eT.META:case eT.NOFRAMES:case eT.STYLE:startTagInHead(h,g);break;case eT.NOSCRIPT:h._err(g,es.nestedNoscriptInHead);break;default:tokenInHeadNoScript(h,g)}}(this,h);break;case ey.AFTER_HEAD:!function(h,g){switch(g.tagID){case eT.HTML:startTagInBody(h,g);break;case eT.BODY:h._insertElement(g,ef.HTML),h.framesetOk=!1,h.insertionMode=ey.IN_BODY;break;case eT.FRAMESET:h._insertElement(g,ef.HTML),h.insertionMode=ey.IN_FRAMESET;break;case eT.BASE:case eT.BASEFONT:case eT.BGSOUND:case eT.LINK:case eT.META:case eT.NOFRAMES:case eT.SCRIPT:case eT.STYLE:case eT.TEMPLATE:case eT.TITLE:h._err(g,es.abandonedHeadElementChild),h.openElements.push(h.headElement,eT.HEAD),startTagInHead(h,g),h.openElements.remove(h.headElement);break;case eT.HEAD:h._err(g,es.misplacedStartTagForHeadElement);break;default:tokenAfterHead(h,g)}}(this,h);break;case ey.IN_BODY:startTagInBody(this,h);break;case ey.IN_TABLE:startTagInTable(this,h);break;case ey.IN_TABLE_TEXT:tokenInTableText(this,h);break;case ey.IN_CAPTION:!function(h,g){let E=g.tagID;rN.has(E)?h.openElements.hasInTableScope(eT.CAPTION)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(eT.CAPTION),h.activeFormattingElements.clearToLastMarker(),h.insertionMode=ey.IN_TABLE,startTagInTable(h,g)):startTagInBody(h,g)}(this,h);break;case ey.IN_COLUMN_GROUP:startTagInColumnGroup(this,h);break;case ey.IN_TABLE_BODY:startTagInTableBody(this,h);break;case ey.IN_ROW:startTagInRow(this,h);break;case ey.IN_CELL:!function(h,g){let E=g.tagID;rN.has(E)?(h.openElements.hasInTableScope(eT.TD)||h.openElements.hasInTableScope(eT.TH))&&(h._closeTableCell(),startTagInRow(h,g)):startTagInBody(h,g)}(this,h);break;case ey.IN_SELECT:startTagInSelect(this,h);break;case ey.IN_SELECT_IN_TABLE:!function(h,g){let E=g.tagID;E===eT.CAPTION||E===eT.TABLE||E===eT.TBODY||E===eT.TFOOT||E===eT.THEAD||E===eT.TR||E===eT.TD||E===eT.TH?(h.openElements.popUntilTagNamePopped(eT.SELECT),h._resetInsertionMode(),h._processStartTag(g)):startTagInSelect(h,g)}(this,h);break;case ey.IN_TEMPLATE:!function(h,g){switch(g.tagID){case eT.BASE:case eT.BASEFONT:case eT.BGSOUND:case eT.LINK:case eT.META:case eT.NOFRAMES:case eT.SCRIPT:case eT.STYLE:case eT.TEMPLATE:case eT.TITLE:startTagInHead(h,g);break;case eT.CAPTION:case eT.COLGROUP:case eT.TBODY:case eT.TFOOT:case eT.THEAD:h.tmplInsertionModeStack[0]=ey.IN_TABLE,h.insertionMode=ey.IN_TABLE,startTagInTable(h,g);break;case eT.COL:h.tmplInsertionModeStack[0]=ey.IN_COLUMN_GROUP,h.insertionMode=ey.IN_COLUMN_GROUP,startTagInColumnGroup(h,g);break;case eT.TR:h.tmplInsertionModeStack[0]=ey.IN_TABLE_BODY,h.insertionMode=ey.IN_TABLE_BODY,startTagInTableBody(h,g);break;case eT.TD:case eT.TH:h.tmplInsertionModeStack[0]=ey.IN_ROW,h.insertionMode=ey.IN_ROW,startTagInRow(h,g);break;default:h.tmplInsertionModeStack[0]=ey.IN_BODY,h.insertionMode=ey.IN_BODY,startTagInBody(h,g)}}(this,h);break;case ey.AFTER_BODY:h.tagID===eT.HTML?startTagInBody(this,h):tokenAfterBody(this,h);break;case ey.IN_FRAMESET:!function(h,g){switch(g.tagID){case eT.HTML:startTagInBody(h,g);break;case eT.FRAMESET:h._insertElement(g,ef.HTML);break;case eT.FRAME:h._appendElement(g,ef.HTML),g.ackSelfClosing=!0;break;case eT.NOFRAMES:startTagInHead(h,g)}}(this,h);break;case ey.AFTER_FRAMESET:!function(h,g){switch(g.tagID){case eT.HTML:startTagInBody(h,g);break;case eT.NOFRAMES:startTagInHead(h,g)}}(this,h);break;case ey.AFTER_AFTER_BODY:h.tagID===eT.HTML?startTagInBody(this,h):tokenAfterAfterBody(this,h);break;case ey.AFTER_AFTER_FRAMESET:!function(h,g){switch(g.tagID){case eT.HTML:startTagInBody(h,g);break;case eT.NOFRAMES:startTagInHead(h,g)}}(this,h)}}onEndTag(h){this.skipNextNewLine=!1,this.currentToken=h,this.currentNotInHTML?function(h,g){if(g.tagID===eT.P||g.tagID===eT.BR){popUntilHtmlOrIntegrationPoint(h),h._endTagOutsideForeignContent(g);return}for(let E=h.openElements.stackTop;E>0;E--){let _=h.openElements.items[E];if(h.treeAdapter.getNamespaceURI(_)===ef.HTML){h._endTagOutsideForeignContent(g);break}let A=h.treeAdapter.getTagName(_);if(A.toLowerCase()===g.tagName){g.tagName=A,h.openElements.shortenToLength(E);break}}}(this,h):this._endTagOutsideForeignContent(h)}_endTagOutsideForeignContent(h){var g;switch(this.insertionMode){case ey.INITIAL:tokenInInitialMode(this,h);break;case ey.BEFORE_HTML:!function(h,g){let E=g.tagID;(E===eT.HTML||E===eT.HEAD||E===eT.BODY||E===eT.BR)&&tokenBeforeHtml(h,g)}(this,h);break;case ey.BEFORE_HEAD:!function(h,g){let E=g.tagID;E===eT.HEAD||E===eT.BODY||E===eT.HTML||E===eT.BR?tokenBeforeHead(h,g):h._err(g,es.endTagWithoutMatchingOpenElement)}(this,h);break;case ey.IN_HEAD:!function(h,g){switch(g.tagID){case eT.HEAD:h.openElements.pop(),h.insertionMode=ey.AFTER_HEAD;break;case eT.BODY:case eT.BR:case eT.HTML:tokenInHead(h,g);break;case eT.TEMPLATE:templateEndTagInHead(h,g);break;default:h._err(g,es.endTagWithoutMatchingOpenElement)}}(this,h);break;case ey.IN_HEAD_NO_SCRIPT:!function(h,g){switch(g.tagID){case eT.NOSCRIPT:h.openElements.pop(),h.insertionMode=ey.IN_HEAD;break;case eT.BR:tokenInHeadNoScript(h,g);break;default:h._err(g,es.endTagWithoutMatchingOpenElement)}}(this,h);break;case ey.AFTER_HEAD:!function(h,g){switch(g.tagID){case eT.BODY:case eT.HTML:case eT.BR:tokenAfterHead(h,g);break;case eT.TEMPLATE:templateEndTagInHead(h,g);break;default:h._err(g,es.endTagWithoutMatchingOpenElement)}}(this,h);break;case ey.IN_BODY:endTagInBody(this,h);break;case ey.TEXT:h.tagID===eT.SCRIPT&&(null===(g=this.scriptHandler)||void 0===g||g.call(this,this.openElements.current)),this.openElements.pop(),this.insertionMode=this.originalInsertionMode;break;case ey.IN_TABLE:endTagInTable(this,h);break;case ey.IN_TABLE_TEXT:tokenInTableText(this,h);break;case ey.IN_CAPTION:!function(h,g){let E=g.tagID;switch(E){case eT.CAPTION:case eT.TABLE:h.openElements.hasInTableScope(eT.CAPTION)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(eT.CAPTION),h.activeFormattingElements.clearToLastMarker(),h.insertionMode=ey.IN_TABLE,E===eT.TABLE&&endTagInTable(h,g));break;case eT.BODY:case eT.COL:case eT.COLGROUP:case eT.HTML:case eT.TBODY:case eT.TD:case eT.TFOOT:case eT.TH:case eT.THEAD:case eT.TR:break;default:endTagInBody(h,g)}}(this,h);break;case ey.IN_COLUMN_GROUP:!function(h,g){switch(g.tagID){case eT.COLGROUP:h.openElements.currentTagId===eT.COLGROUP&&(h.openElements.pop(),h.insertionMode=ey.IN_TABLE);break;case eT.TEMPLATE:templateEndTagInHead(h,g);break;case eT.COL:break;default:tokenInColumnGroup(h,g)}}(this,h);break;case ey.IN_TABLE_BODY:endTagInTableBody(this,h);break;case ey.IN_ROW:endTagInRow(this,h);break;case ey.IN_CELL:!function(h,g){let E=g.tagID;switch(E){case eT.TD:case eT.TH:h.openElements.hasInTableScope(E)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(E),h.activeFormattingElements.clearToLastMarker(),h.insertionMode=ey.IN_ROW);break;case eT.TABLE:case eT.TBODY:case eT.TFOOT:case eT.THEAD:case eT.TR:h.openElements.hasInTableScope(E)&&(h._closeTableCell(),endTagInRow(h,g));break;case eT.BODY:case eT.CAPTION:case eT.COL:case eT.COLGROUP:case eT.HTML:break;default:endTagInBody(h,g)}}(this,h);break;case ey.IN_SELECT:endTagInSelect(this,h);break;case ey.IN_SELECT_IN_TABLE:!function(h,g){let E=g.tagID;E===eT.CAPTION||E===eT.TABLE||E===eT.TBODY||E===eT.TFOOT||E===eT.THEAD||E===eT.TR||E===eT.TD||E===eT.TH?h.openElements.hasInTableScope(E)&&(h.openElements.popUntilTagNamePopped(eT.SELECT),h._resetInsertionMode(),h.onEndTag(g)):endTagInSelect(h,g)}(this,h);break;case ey.IN_TEMPLATE:h.tagID===eT.TEMPLATE&&templateEndTagInHead(this,h);break;case ey.AFTER_BODY:endTagAfterBody(this,h);break;case ey.IN_FRAMESET:h.tagID!==eT.FRAMESET||this.openElements.isRootHtmlElementCurrent()||(this.openElements.pop(),this.fragmentContext||this.openElements.currentTagId===eT.FRAMESET||(this.insertionMode=ey.AFTER_FRAMESET));break;case ey.AFTER_FRAMESET:h.tagID===eT.HTML&&(this.insertionMode=ey.AFTER_AFTER_FRAMESET);break;case ey.AFTER_AFTER_BODY:tokenAfterAfterBody(this,h)}}onEof(h){switch(this.insertionMode){case ey.INITIAL:tokenInInitialMode(this,h);break;case ey.BEFORE_HTML:tokenBeforeHtml(this,h);break;case ey.BEFORE_HEAD:tokenBeforeHead(this,h);break;case ey.IN_HEAD:tokenInHead(this,h);break;case ey.IN_HEAD_NO_SCRIPT:tokenInHeadNoScript(this,h);break;case ey.AFTER_HEAD:tokenAfterHead(this,h);break;case ey.IN_BODY:case ey.IN_TABLE:case ey.IN_CAPTION:case ey.IN_COLUMN_GROUP:case ey.IN_TABLE_BODY:case ey.IN_ROW:case ey.IN_CELL:case ey.IN_SELECT:case ey.IN_SELECT_IN_TABLE:eofInBody(this,h);break;case ey.TEXT:this._err(h,es.eofInElementThatCanContainOnlyText),this.openElements.pop(),this.insertionMode=this.originalInsertionMode,this.onEof(h);break;case ey.IN_TABLE_TEXT:tokenInTableText(this,h);break;case ey.IN_TEMPLATE:eofInTemplate(this,h);break;case ey.AFTER_BODY:case ey.IN_FRAMESET:case ey.AFTER_FRAMESET:case ey.AFTER_AFTER_BODY:case ey.AFTER_AFTER_FRAMESET:stopParsing(this,h)}}onWhitespaceCharacter(h){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,h.chars.charCodeAt(0)===ei.LINE_FEED)){if(1===h.chars.length)return;h.chars=h.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(h);return}switch(this.insertionMode){case ey.IN_HEAD:case ey.IN_HEAD_NO_SCRIPT:case ey.AFTER_HEAD:case ey.TEXT:case ey.IN_COLUMN_GROUP:case ey.IN_SELECT:case ey.IN_SELECT_IN_TABLE:case ey.IN_FRAMESET:case ey.AFTER_FRAMESET:this._insertCharacters(h);break;case ey.IN_BODY:case ey.IN_CAPTION:case ey.IN_CELL:case ey.IN_TEMPLATE:case ey.AFTER_BODY:case ey.AFTER_AFTER_BODY:case ey.AFTER_AFTER_FRAMESET:whitespaceCharacterInBody(this,h);break;case ey.IN_TABLE:case ey.IN_TABLE_BODY:case ey.IN_ROW:characterInTable(this,h);break;case ey.IN_TABLE_TEXT:whitespaceCharacterInTableText(this,h)}}};function callAdoptionAgency(h,g){for(let E=0;E<8;E++){let E=function(h,g){let E=h.activeFormattingElements.getElementEntryInScopeWithTagName(g.tagName);return E?h.openElements.contains(E.element)?h.openElements.hasInScope(g.tagID)||(E=null):(h.activeFormattingElements.removeEntry(E),E=null):genericEndTagInBody(h,g),E}(h,g);if(!E)break;let _=function(h,g){let E=null,_=h.openElements.stackTop;for(;_>=0;_--){let A=h.openElements.items[_];if(A===g.element)break;h._isSpecialElement(A,h.openElements.tagIDs[_])&&(E=A)}return E||(h.openElements.shortenToLength(_<0?0:_),h.activeFormattingElements.removeEntry(g)),E}(h,E);if(!_)break;h.activeFormattingElements.bookmark=E;let A=function(h,g,E){let _=g,A=h.openElements.getCommonAncestor(g);for(let b=0,C=A;C!==E;b++,C=A){A=h.openElements.getCommonAncestor(C);let E=h.activeFormattingElements.getElementEntry(C),k=E&&b>=3,S=!E||k;S?(k&&h.activeFormattingElements.removeEntry(E),h.openElements.remove(C)):(C=function(h,g){let E=h.treeAdapter.getNamespaceURI(g.element),_=h.treeAdapter.createElement(g.token.tagName,E,g.token.attrs);return h.openElements.replace(g.element,_),g.element=_,_}(h,E),_===g&&(h.activeFormattingElements.bookmark=E),h.treeAdapter.detachNode(_),h.treeAdapter.appendChild(C,_),_=C)}return _}(h,_,E.element),b=h.openElements.getCommonAncestor(E.element);h.treeAdapter.detachNode(A),b&&function(h,g,E){let _=h.treeAdapter.getTagName(g),A=getTagID(_);if(h._isElementCausesFosterParenting(A))h._fosterParentElement(E);else{let _=h.treeAdapter.getNamespaceURI(g);A===eT.TEMPLATE&&_===ef.HTML&&(g=h.treeAdapter.getTemplateContent(g)),h.treeAdapter.appendChild(g,E)}}(h,b,A),function(h,g,E){let _=h.treeAdapter.getNamespaceURI(E.element),{token:A}=E,b=h.treeAdapter.createElement(A.tagName,_,A.attrs);h._adoptNodes(g,b),h.treeAdapter.appendChild(g,b),h.activeFormattingElements.insertElementAfterBookmark(b,A),h.activeFormattingElements.removeEntry(E),h.openElements.remove(E.element),h.openElements.insertAfter(g,b,A.tagID)}(h,_,E)}}function appendComment(h,g){h._appendCommentNode(g,h.openElements.currentTmplContentOrNode)}function stopParsing(h,g){if(h.stopped=!0,g.location){let E=h.fragmentContext?0:2;for(let _=h.openElements.stackTop;_>=E;_--)h._setEndLocation(h.openElements.items[_],g);if(!h.fragmentContext&&h.openElements.stackTop>=0){let E=h.openElements.items[0],_=h.treeAdapter.getNodeSourceCodeLocation(E);if(_&&!_.endTag&&(h._setEndLocation(E,g),h.openElements.stackTop>=1)){let E=h.openElements.items[1],_=h.treeAdapter.getNodeSourceCodeLocation(E);_&&!_.endTag&&h._setEndLocation(E,g)}}}}function tokenInInitialMode(h,g){h._err(g,es.missingDoctype,!0),h.treeAdapter.setDocumentMode(h.document,eg.QUIRKS),h.insertionMode=ey.BEFORE_HTML,h._processToken(g)}function tokenBeforeHtml(h,g){h._insertFakeRootElement(),h.insertionMode=ey.BEFORE_HEAD,h._processToken(g)}function tokenBeforeHead(h,g){h._insertFakeElement(eE.HEAD,eT.HEAD),h.headElement=h.openElements.current,h.insertionMode=ey.IN_HEAD,h._processToken(g)}function startTagInHead(h,g){switch(g.tagID){case eT.HTML:startTagInBody(h,g);break;case eT.BASE:case eT.BASEFONT:case eT.BGSOUND:case eT.LINK:case eT.META:h._appendElement(g,ef.HTML),g.ackSelfClosing=!0;break;case eT.TITLE:h._switchToTextParsing(g,rt.RCDATA);break;case eT.NOSCRIPT:h.options.scriptingEnabled?h._switchToTextParsing(g,rt.RAWTEXT):(h._insertElement(g,ef.HTML),h.insertionMode=ey.IN_HEAD_NO_SCRIPT);break;case eT.NOFRAMES:case eT.STYLE:h._switchToTextParsing(g,rt.RAWTEXT);break;case eT.SCRIPT:h._switchToTextParsing(g,rt.SCRIPT_DATA);break;case eT.TEMPLATE:h._insertTemplate(g),h.activeFormattingElements.insertMarker(),h.framesetOk=!1,h.insertionMode=ey.IN_TEMPLATE,h.tmplInsertionModeStack.unshift(ey.IN_TEMPLATE);break;case eT.HEAD:h._err(g,es.misplacedStartTagForHeadElement);break;default:tokenInHead(h,g)}}function templateEndTagInHead(h,g){h.openElements.tmplCount>0?(h.openElements.generateImpliedEndTagsThoroughly(),h.openElements.currentTagId!==eT.TEMPLATE&&h._err(g,es.closingOfElementWithOpenChildElements),h.openElements.popUntilTagNamePopped(eT.TEMPLATE),h.activeFormattingElements.clearToLastMarker(),h.tmplInsertionModeStack.shift(),h._resetInsertionMode()):h._err(g,es.endTagWithoutMatchingOpenElement)}function tokenInHead(h,g){h.openElements.pop(),h.insertionMode=ey.AFTER_HEAD,h._processToken(g)}function tokenInHeadNoScript(h,g){let E=g.type===el.EOF?es.openElementsLeftAfterEof:es.disallowedContentInNoscriptInHead;h._err(g,E),h.openElements.pop(),h.insertionMode=ey.IN_HEAD,h._processToken(g)}function tokenAfterHead(h,g){h._insertFakeElement(eE.BODY,eT.BODY),h.insertionMode=ey.IN_BODY,modeInBody(h,g)}function modeInBody(h,g){switch(g.type){case el.CHARACTER:characterInBody(h,g);break;case el.WHITESPACE_CHARACTER:whitespaceCharacterInBody(h,g);break;case el.COMMENT:appendComment(h,g);break;case el.START_TAG:startTagInBody(h,g);break;case el.END_TAG:endTagInBody(h,g);break;case el.EOF:eofInBody(h,g)}}function whitespaceCharacterInBody(h,g){h._reconstructActiveFormattingElements(),h._insertCharacters(g)}function characterInBody(h,g){h._reconstructActiveFormattingElements(),h._insertCharacters(g),h.framesetOk=!1}function areaStartTagInBody(h,g){h._reconstructActiveFormattingElements(),h._appendElement(g,ef.HTML),h.framesetOk=!1,g.ackSelfClosing=!0}function isHiddenInput(h){let g=getTokenAttr(h,em.TYPE);return null!=g&&"hidden"===g.toLowerCase()}function noembedStartTagInBody(h,g){h._switchToTextParsing(g,rt.RAWTEXT)}function genericStartTagInBody(h,g){h._reconstructActiveFormattingElements(),h._insertElement(g,ef.HTML)}function startTagInBody(h,g){switch(g.tagID){case eT.I:case eT.S:case eT.B:case eT.U:case eT.EM:case eT.TT:case eT.BIG:case eT.CODE:case eT.FONT:case eT.SMALL:case eT.STRIKE:case eT.STRONG:h._reconstructActiveFormattingElements(),h._insertElement(g,ef.HTML),h.activeFormattingElements.pushElement(h.openElements.current,g);break;case eT.A:!function(h,g){let E=h.activeFormattingElements.getElementEntryInScopeWithTagName(eE.A);E&&(callAdoptionAgency(h,g),h.openElements.remove(E.element),h.activeFormattingElements.removeEntry(E)),h._reconstructActiveFormattingElements(),h._insertElement(g,ef.HTML),h.activeFormattingElements.pushElement(h.openElements.current,g)}(h,g);break;case eT.H1:case eT.H2:case eT.H3:case eT.H4:case eT.H5:case eT.H6:h.openElements.hasInButtonScope(eT.P)&&h._closePElement(),isNumberedHeader(h.openElements.currentTagId)&&h.openElements.pop(),h._insertElement(g,ef.HTML);break;case eT.P:case eT.DL:case eT.OL:case eT.UL:case eT.DIV:case eT.DIR:case eT.NAV:case eT.MAIN:case eT.MENU:case eT.ASIDE:case eT.CENTER:case eT.FIGURE:case eT.FOOTER:case eT.HEADER:case eT.HGROUP:case eT.DIALOG:case eT.DETAILS:case eT.ADDRESS:case eT.ARTICLE:case eT.SECTION:case eT.SUMMARY:case eT.FIELDSET:case eT.BLOCKQUOTE:case eT.FIGCAPTION:h.openElements.hasInButtonScope(eT.P)&&h._closePElement(),h._insertElement(g,ef.HTML);break;case eT.LI:case eT.DD:case eT.DT:!function(h,g){h.framesetOk=!1;let E=g.tagID;for(let g=h.openElements.stackTop;g>=0;g--){let _=h.openElements.tagIDs[g];if(E===eT.LI&&_===eT.LI||(E===eT.DD||E===eT.DT)&&(_===eT.DD||_===eT.DT)){h.openElements.generateImpliedEndTagsWithExclusion(_),h.openElements.popUntilTagNamePopped(_);break}if(_!==eT.ADDRESS&&_!==eT.DIV&&_!==eT.P&&h._isSpecialElement(h.openElements.items[g],_))break}h.openElements.hasInButtonScope(eT.P)&&h._closePElement(),h._insertElement(g,ef.HTML)}(h,g);break;case eT.BR:case eT.IMG:case eT.WBR:case eT.AREA:case eT.EMBED:case eT.KEYGEN:areaStartTagInBody(h,g);break;case eT.HR:h.openElements.hasInButtonScope(eT.P)&&h._closePElement(),h._appendElement(g,ef.HTML),h.framesetOk=!1,g.ackSelfClosing=!0;break;case eT.RB:case eT.RTC:h.openElements.hasInScope(eT.RUBY)&&h.openElements.generateImpliedEndTags(),h._insertElement(g,ef.HTML);break;case eT.RT:case eT.RP:h.openElements.hasInScope(eT.RUBY)&&h.openElements.generateImpliedEndTagsWithExclusion(eT.RTC),h._insertElement(g,ef.HTML);break;case eT.PRE:case eT.LISTING:h.openElements.hasInButtonScope(eT.P)&&h._closePElement(),h._insertElement(g,ef.HTML),h.skipNextNewLine=!0,h.framesetOk=!1;break;case eT.XMP:h.openElements.hasInButtonScope(eT.P)&&h._closePElement(),h._reconstructActiveFormattingElements(),h.framesetOk=!1,h._switchToTextParsing(g,rt.RAWTEXT);break;case eT.SVG:h._reconstructActiveFormattingElements(),adjustTokenSVGAttrs(g),adjustTokenXMLAttrs(g),g.selfClosing?h._appendElement(g,ef.SVG):h._insertElement(g,ef.SVG),g.ackSelfClosing=!0;break;case eT.HTML:0===h.openElements.tmplCount&&h.treeAdapter.adoptAttributes(h.openElements.items[0],g.attrs);break;case eT.BASE:case eT.LINK:case eT.META:case eT.STYLE:case eT.TITLE:case eT.SCRIPT:case eT.BGSOUND:case eT.BASEFONT:case eT.TEMPLATE:startTagInHead(h,g);break;case eT.BODY:!function(h,g){let E=h.openElements.tryPeekProperlyNestedBodyElement();E&&0===h.openElements.tmplCount&&(h.framesetOk=!1,h.treeAdapter.adoptAttributes(E,g.attrs))}(h,g);break;case eT.FORM:!function(h,g){let E=h.openElements.tmplCount>0;h.formElement&&!E||(h.openElements.hasInButtonScope(eT.P)&&h._closePElement(),h._insertElement(g,ef.HTML),E||(h.formElement=h.openElements.current))}(h,g);break;case eT.NOBR:h._reconstructActiveFormattingElements(),h.openElements.hasInScope(eT.NOBR)&&(callAdoptionAgency(h,g),h._reconstructActiveFormattingElements()),h._insertElement(g,ef.HTML),h.activeFormattingElements.pushElement(h.openElements.current,g);break;case eT.MATH:h._reconstructActiveFormattingElements(),adjustTokenMathMLAttrs(g),adjustTokenXMLAttrs(g),g.selfClosing?h._appendElement(g,ef.MATHML):h._insertElement(g,ef.MATHML),g.ackSelfClosing=!0;break;case eT.TABLE:h.treeAdapter.getDocumentMode(h.document)!==eg.QUIRKS&&h.openElements.hasInButtonScope(eT.P)&&h._closePElement(),h._insertElement(g,ef.HTML),h.framesetOk=!1,h.insertionMode=ey.IN_TABLE;break;case eT.INPUT:h._reconstructActiveFormattingElements(),h._appendElement(g,ef.HTML),isHiddenInput(g)||(h.framesetOk=!1),g.ackSelfClosing=!0;break;case eT.PARAM:case eT.TRACK:case eT.SOURCE:h._appendElement(g,ef.HTML),g.ackSelfClosing=!0;break;case eT.IMAGE:g.tagName=eE.IMG,g.tagID=eT.IMG,areaStartTagInBody(h,g);break;case eT.BUTTON:h.openElements.hasInScope(eT.BUTTON)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(eT.BUTTON)),h._reconstructActiveFormattingElements(),h._insertElement(g,ef.HTML),h.framesetOk=!1;break;case eT.APPLET:case eT.OBJECT:case eT.MARQUEE:h._reconstructActiveFormattingElements(),h._insertElement(g,ef.HTML),h.activeFormattingElements.insertMarker(),h.framesetOk=!1;break;case eT.IFRAME:h.framesetOk=!1,h._switchToTextParsing(g,rt.RAWTEXT);break;case eT.SELECT:h._reconstructActiveFormattingElements(),h._insertElement(g,ef.HTML),h.framesetOk=!1,h.insertionMode=h.insertionMode===ey.IN_TABLE||h.insertionMode===ey.IN_CAPTION||h.insertionMode===ey.IN_TABLE_BODY||h.insertionMode===ey.IN_ROW||h.insertionMode===ey.IN_CELL?ey.IN_SELECT_IN_TABLE:ey.IN_SELECT;break;case eT.OPTION:case eT.OPTGROUP:h.openElements.currentTagId===eT.OPTION&&h.openElements.pop(),h._reconstructActiveFormattingElements(),h._insertElement(g,ef.HTML);break;case eT.NOEMBED:noembedStartTagInBody(h,g);break;case eT.FRAMESET:!function(h,g){let E=h.openElements.tryPeekProperlyNestedBodyElement();h.framesetOk&&E&&(h.treeAdapter.detachNode(E),h.openElements.popAllUpToHtmlElement(),h._insertElement(g,ef.HTML),h.insertionMode=ey.IN_FRAMESET)}(h,g);break;case eT.TEXTAREA:h._insertElement(g,ef.HTML),h.skipNextNewLine=!0,h.tokenizer.state=rt.RCDATA,h.originalInsertionMode=h.insertionMode,h.framesetOk=!1,h.insertionMode=ey.TEXT;break;case eT.NOSCRIPT:h.options.scriptingEnabled?noembedStartTagInBody(h,g):genericStartTagInBody(h,g);break;case eT.PLAINTEXT:h.openElements.hasInButtonScope(eT.P)&&h._closePElement(),h._insertElement(g,ef.HTML),h.tokenizer.state=rt.PLAINTEXT;break;case eT.COL:case eT.TH:case eT.TD:case eT.TR:case eT.HEAD:case eT.FRAME:case eT.TBODY:case eT.TFOOT:case eT.THEAD:case eT.CAPTION:case eT.COLGROUP:break;default:genericStartTagInBody(h,g)}}function genericEndTagInBody(h,g){let E=g.tagName,_=g.tagID;for(let g=h.openElements.stackTop;g>0;g--){let A=h.openElements.items[g],b=h.openElements.tagIDs[g];if(_===b&&(_!==eT.UNKNOWN||h.treeAdapter.getTagName(A)===E)){h.openElements.generateImpliedEndTagsWithExclusion(_),h.openElements.stackTop>=g&&h.openElements.shortenToLength(g);break}if(h._isSpecialElement(A,b))break}}function endTagInBody(h,g){switch(g.tagID){case eT.A:case eT.B:case eT.I:case eT.S:case eT.U:case eT.EM:case eT.TT:case eT.BIG:case eT.CODE:case eT.FONT:case eT.NOBR:case eT.SMALL:case eT.STRIKE:case eT.STRONG:callAdoptionAgency(h,g);break;case eT.P:h.openElements.hasInButtonScope(eT.P)||h._insertFakeElement(eE.P,eT.P),h._closePElement();break;case eT.DL:case eT.UL:case eT.OL:case eT.DIR:case eT.DIV:case eT.NAV:case eT.PRE:case eT.MAIN:case eT.MENU:case eT.ASIDE:case eT.BUTTON:case eT.CENTER:case eT.FIGURE:case eT.FOOTER:case eT.HEADER:case eT.HGROUP:case eT.DIALOG:case eT.ADDRESS:case eT.ARTICLE:case eT.DETAILS:case eT.SECTION:case eT.SUMMARY:case eT.LISTING:case eT.FIELDSET:case eT.BLOCKQUOTE:case eT.FIGCAPTION:!function(h,g){let E=g.tagID;h.openElements.hasInScope(E)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(E))}(h,g);break;case eT.LI:h.openElements.hasInListItemScope(eT.LI)&&(h.openElements.generateImpliedEndTagsWithExclusion(eT.LI),h.openElements.popUntilTagNamePopped(eT.LI));break;case eT.DD:case eT.DT:!function(h,g){let E=g.tagID;h.openElements.hasInScope(E)&&(h.openElements.generateImpliedEndTagsWithExclusion(E),h.openElements.popUntilTagNamePopped(E))}(h,g);break;case eT.H1:case eT.H2:case eT.H3:case eT.H4:case eT.H5:case eT.H6:h.openElements.hasNumberedHeaderInScope()&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilNumberedHeaderPopped());break;case eT.BR:h._reconstructActiveFormattingElements(),h._insertFakeElement(eE.BR,eT.BR),h.openElements.pop(),h.framesetOk=!1;break;case eT.BODY:!function(h,g){if(h.openElements.hasInScope(eT.BODY)&&(h.insertionMode=ey.AFTER_BODY,h.options.sourceCodeLocationInfo)){let E=h.openElements.tryPeekProperlyNestedBodyElement();E&&h._setEndLocation(E,g)}}(h,g);break;case eT.HTML:h.openElements.hasInScope(eT.BODY)&&(h.insertionMode=ey.AFTER_BODY,endTagAfterBody(h,g));break;case eT.FORM:!function(h){let g=h.openElements.tmplCount>0,{formElement:E}=h;g||(h.formElement=null),(E||g)&&h.openElements.hasInScope(eT.FORM)&&(h.openElements.generateImpliedEndTags(),g?h.openElements.popUntilTagNamePopped(eT.FORM):E&&h.openElements.remove(E))}(h);break;case eT.APPLET:case eT.OBJECT:case eT.MARQUEE:!function(h,g){let E=g.tagID;h.openElements.hasInScope(E)&&(h.openElements.generateImpliedEndTags(),h.openElements.popUntilTagNamePopped(E),h.activeFormattingElements.clearToLastMarker())}(h,g);break;case eT.TEMPLATE:templateEndTagInHead(h,g);break;default:genericEndTagInBody(h,g)}}function eofInBody(h,g){h.tmplInsertionModeStack.length>0?eofInTemplate(h,g):stopParsing(h,g)}function characterInTable(h,g){if(rk.has(h.openElements.currentTagId))switch(h.pendingCharacterTokens.length=0,h.hasNonWhitespacePendingCharacterToken=!1,h.originalInsertionMode=h.insertionMode,h.insertionMode=ey.IN_TABLE_TEXT,g.type){case el.CHARACTER:characterInTableText(h,g);break;case el.WHITESPACE_CHARACTER:whitespaceCharacterInTableText(h,g)}else tokenInTable(h,g)}function startTagInTable(h,g){switch(g.tagID){case eT.TD:case eT.TH:case eT.TR:h.openElements.clearBackToTableContext(),h._insertFakeElement(eE.TBODY,eT.TBODY),h.insertionMode=ey.IN_TABLE_BODY,startTagInTableBody(h,g);break;case eT.STYLE:case eT.SCRIPT:case eT.TEMPLATE:startTagInHead(h,g);break;case eT.COL:h.openElements.clearBackToTableContext(),h._insertFakeElement(eE.COLGROUP,eT.COLGROUP),h.insertionMode=ey.IN_COLUMN_GROUP,startTagInColumnGroup(h,g);break;case eT.FORM:h.formElement||0!==h.openElements.tmplCount||(h._insertElement(g,ef.HTML),h.formElement=h.openElements.current,h.openElements.pop());break;case eT.TABLE:h.openElements.hasInTableScope(eT.TABLE)&&(h.openElements.popUntilTagNamePopped(eT.TABLE),h._resetInsertionMode(),h._processStartTag(g));break;case eT.TBODY:case eT.TFOOT:case eT.THEAD:h.openElements.clearBackToTableContext(),h._insertElement(g,ef.HTML),h.insertionMode=ey.IN_TABLE_BODY;break;case eT.INPUT:isHiddenInput(g)?h._appendElement(g,ef.HTML):tokenInTable(h,g),g.ackSelfClosing=!0;break;case eT.CAPTION:h.openElements.clearBackToTableContext(),h.activeFormattingElements.insertMarker(),h._insertElement(g,ef.HTML),h.insertionMode=ey.IN_CAPTION;break;case eT.COLGROUP:h.openElements.clearBackToTableContext(),h._insertElement(g,ef.HTML),h.insertionMode=ey.IN_COLUMN_GROUP;break;default:tokenInTable(h,g)}}function endTagInTable(h,g){switch(g.tagID){case eT.TABLE:h.openElements.hasInTableScope(eT.TABLE)&&(h.openElements.popUntilTagNamePopped(eT.TABLE),h._resetInsertionMode());break;case eT.TEMPLATE:templateEndTagInHead(h,g);break;case eT.BODY:case eT.CAPTION:case eT.COL:case eT.COLGROUP:case eT.HTML:case eT.TBODY:case eT.TD:case eT.TFOOT:case eT.TH:case eT.THEAD:case eT.TR:break;default:tokenInTable(h,g)}}function tokenInTable(h,g){let E=h.fosterParentingEnabled;h.fosterParentingEnabled=!0,modeInBody(h,g),h.fosterParentingEnabled=E}function whitespaceCharacterInTableText(h,g){h.pendingCharacterTokens.push(g)}function characterInTableText(h,g){h.pendingCharacterTokens.push(g),h.hasNonWhitespacePendingCharacterToken=!0}function tokenInTableText(h,g){let E=0;if(h.hasNonWhitespacePendingCharacterToken)for(;E<h.pendingCharacterTokens.length;E++)tokenInTable(h,h.pendingCharacterTokens[E]);else for(;E<h.pendingCharacterTokens.length;E++)h._insertCharacters(h.pendingCharacterTokens[E]);h.insertionMode=h.originalInsertionMode,h._processToken(g)}let rN=new Set([eT.CAPTION,eT.COL,eT.COLGROUP,eT.TBODY,eT.TD,eT.TFOOT,eT.TH,eT.THEAD,eT.TR]);function startTagInColumnGroup(h,g){switch(g.tagID){case eT.HTML:startTagInBody(h,g);break;case eT.COL:h._appendElement(g,ef.HTML),g.ackSelfClosing=!0;break;case eT.TEMPLATE:startTagInHead(h,g);break;default:tokenInColumnGroup(h,g)}}function tokenInColumnGroup(h,g){h.openElements.currentTagId===eT.COLGROUP&&(h.openElements.pop(),h.insertionMode=ey.IN_TABLE,h._processToken(g))}function startTagInTableBody(h,g){switch(g.tagID){case eT.TR:h.openElements.clearBackToTableBodyContext(),h._insertElement(g,ef.HTML),h.insertionMode=ey.IN_ROW;break;case eT.TH:case eT.TD:h.openElements.clearBackToTableBodyContext(),h._insertFakeElement(eE.TR,eT.TR),h.insertionMode=ey.IN_ROW,startTagInRow(h,g);break;case eT.CAPTION:case eT.COL:case eT.COLGROUP:case eT.TBODY:case eT.TFOOT:case eT.THEAD:h.openElements.hasTableBodyContextInTableScope()&&(h.openElements.clearBackToTableBodyContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE,startTagInTable(h,g));break;default:startTagInTable(h,g)}}function endTagInTableBody(h,g){let E=g.tagID;switch(g.tagID){case eT.TBODY:case eT.TFOOT:case eT.THEAD:h.openElements.hasInTableScope(E)&&(h.openElements.clearBackToTableBodyContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE);break;case eT.TABLE:h.openElements.hasTableBodyContextInTableScope()&&(h.openElements.clearBackToTableBodyContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE,endTagInTable(h,g));break;case eT.BODY:case eT.CAPTION:case eT.COL:case eT.COLGROUP:case eT.HTML:case eT.TD:case eT.TH:case eT.TR:break;default:endTagInTable(h,g)}}function startTagInRow(h,g){switch(g.tagID){case eT.TH:case eT.TD:h.openElements.clearBackToTableRowContext(),h._insertElement(g,ef.HTML),h.insertionMode=ey.IN_CELL,h.activeFormattingElements.insertMarker();break;case eT.CAPTION:case eT.COL:case eT.COLGROUP:case eT.TBODY:case eT.TFOOT:case eT.THEAD:case eT.TR:h.openElements.hasInTableScope(eT.TR)&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE_BODY,startTagInTableBody(h,g));break;default:startTagInTable(h,g)}}function endTagInRow(h,g){switch(g.tagID){case eT.TR:h.openElements.hasInTableScope(eT.TR)&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE_BODY);break;case eT.TABLE:h.openElements.hasInTableScope(eT.TR)&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE_BODY,endTagInTableBody(h,g));break;case eT.TBODY:case eT.TFOOT:case eT.THEAD:(h.openElements.hasInTableScope(g.tagID)||h.openElements.hasInTableScope(eT.TR))&&(h.openElements.clearBackToTableRowContext(),h.openElements.pop(),h.insertionMode=ey.IN_TABLE_BODY,endTagInTableBody(h,g));break;case eT.BODY:case eT.CAPTION:case eT.COL:case eT.COLGROUP:case eT.HTML:case eT.TD:case eT.TH:break;default:endTagInTable(h,g)}}function startTagInSelect(h,g){switch(g.tagID){case eT.HTML:startTagInBody(h,g);break;case eT.OPTION:h.openElements.currentTagId===eT.OPTION&&h.openElements.pop(),h._insertElement(g,ef.HTML);break;case eT.OPTGROUP:h.openElements.currentTagId===eT.OPTION&&h.openElements.pop(),h.openElements.currentTagId===eT.OPTGROUP&&h.openElements.pop(),h._insertElement(g,ef.HTML);break;case eT.INPUT:case eT.KEYGEN:case eT.TEXTAREA:case eT.SELECT:h.openElements.hasInSelectScope(eT.SELECT)&&(h.openElements.popUntilTagNamePopped(eT.SELECT),h._resetInsertionMode(),g.tagID!==eT.SELECT&&h._processStartTag(g));break;case eT.SCRIPT:case eT.TEMPLATE:startTagInHead(h,g)}}function endTagInSelect(h,g){switch(g.tagID){case eT.OPTGROUP:h.openElements.stackTop>0&&h.openElements.currentTagId===eT.OPTION&&h.openElements.tagIDs[h.openElements.stackTop-1]===eT.OPTGROUP&&h.openElements.pop(),h.openElements.currentTagId===eT.OPTGROUP&&h.openElements.pop();break;case eT.OPTION:h.openElements.currentTagId===eT.OPTION&&h.openElements.pop();break;case eT.SELECT:h.openElements.hasInSelectScope(eT.SELECT)&&(h.openElements.popUntilTagNamePopped(eT.SELECT),h._resetInsertionMode());break;case eT.TEMPLATE:templateEndTagInHead(h,g)}}function eofInTemplate(h,g){h.openElements.tmplCount>0?(h.openElements.popUntilTagNamePopped(eT.TEMPLATE),h.activeFormattingElements.clearToLastMarker(),h.tmplInsertionModeStack.shift(),h._resetInsertionMode(),h.onEof(g)):stopParsing(h,g)}function endTagAfterBody(h,g){var E;if(g.tagID===eT.HTML){if(h.fragmentContext||(h.insertionMode=ey.AFTER_AFTER_BODY),h.options.sourceCodeLocationInfo&&h.openElements.tagIDs[0]===eT.HTML){h._setEndLocation(h.openElements.items[0],g);let _=h.openElements.items[1];!_||(null===(E=h.treeAdapter.getNodeSourceCodeLocation(_))||void 0===E?void 0:E.endTag)||h._setEndLocation(_,g)}}else tokenAfterBody(h,g)}function tokenAfterBody(h,g){h.insertionMode=ey.IN_BODY,modeInBody(h,g)}function tokenAfterAfterBody(h,g){h.insertionMode=ey.IN_BODY,modeInBody(h,g)}function popUntilHtmlOrIntegrationPoint(h){for(;h.treeAdapter.getNamespaceURI(h.openElements.current)!==ef.HTML&&!h._isIntegrationPoint(h.openElements.currentTagId,h.openElements.current);)h.openElements.pop()}let rw=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function getEscaper(h,g){return function(E){let _;let A=0,b="";for(;_=h.exec(E);)A!==_.index&&(b+=E.substring(A,_.index)),b+=g.get(_[0].charCodeAt(0)),A=_.index+1;return b+E.substring(A)}}null!=String.prototype.codePointAt||((h,g)=>(64512&h.charCodeAt(g))==55296?(h.charCodeAt(g)-55296)*1024+h.charCodeAt(g+1)-56320+65536:h.charCodeAt(g)),getEscaper(/[&<>'"]/g,rw),getEscaper(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),getEscaper(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),eE.AREA,eE.BASE,eE.BASEFONT,eE.BGSOUND,eE.BR,eE.COL,eE.EMBED,eE.FRAME,eE.HR,eE.IMG,eE.INPUT,eE.KEYGEN,eE.LINK,eE.META,eE.PARAM,eE.SOURCE,eE.TRACK,eE.WBR;let rO=lib_point("end"),rR=lib_point("start");function lib_point(h){return function(g){let E=g&&g.position&&g.position[h]||{};if("number"==typeof E.line&&E.line>0&&"number"==typeof E.column&&E.column>0)return{line:E.line,column:E.column,offset:"number"==typeof E.offset&&E.offset>-1?E.offset:void 0}}}let convert=function(h){if(null==h)return lib_ok;if("function"==typeof h)return castFactory(h);if("object"==typeof h)return Array.isArray(h)?function(h){let g=[],E=-1;for(;++E<h.length;)g[E]=convert(h[E]);return castFactory(function(...h){let E=-1;for(;++E<g.length;)if(g[E].apply(this,h))return!0;return!1})}(h):castFactory(function(g){let E;for(E in h)if(g[E]!==h[E])return!1;return!0});if("string"==typeof h)return castFactory(function(g){return g&&g.type===h});throw Error("Expected function, string, or object as test")};function castFactory(h){return function(g,E,_){var A;return!!(null!==(A=g)&&"object"==typeof A&&"type"in A&&h.call(this,g,"number"==typeof E?E:void 0,_||void 0))}}function lib_ok(){return!0}let rD=[],rL=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),rP={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function raw(h,g){let E=function(h){let g="root"===h.type?h.children[0]:h;return!!(g&&("doctype"===g.type||"element"===g.type&&"html"===g.tagName))}(h),_=zwitch("type",{handlers:{root:lib_root,element:hast_util_raw_lib_element,text:hast_util_raw_lib_text,comment:lib_comment,doctype:lib_doctype,raw:handleRaw},unknown}),A={parser:E?new parser_Parser(rP):parser_Parser.getFragmentParser(void 0,rP),handle(h){_(h,A)},stitches:!1,options:g||{}};_(h,A),resetTokenizer(A,rR());let b=E?A.parser.document:A.parser.getFragment(),C=function(h,g){let E=g||{};return one({file:E.file||void 0,location:!1,schema:"svg"===E.space?nF:nM,verbose:E.verbose||!1},h)}(b,{file:A.options.file});if(A.stitches){let h;h=function(h,g,E){if(h.value.stitch&&E&&void 0!==g){let _=E.children;return _[g]=h.value.stitch,g}},function(h,g,E,_){let A;"function"==typeof g&&"function"!=typeof E?(_=E,E=g):A=g;let b=convert(A),C=_?-1:1;(function factory(h,A,k){let S=h&&"object"==typeof h?h:{};if("string"==typeof S.type){let g="string"==typeof S.tagName?S.tagName:"string"==typeof S.name?S.name:void 0;Object.defineProperty(visit,"name",{value:"node ("+h.type+(g?"<"+g+">":"")+")"})}return visit;function visit(){var S;let N,w,R,L=rD;if((!g||b(h,A,k[k.length-1]||void 0))&&!1===(L=Array.isArray(S=E(h,k))?S:"number"==typeof S?[!0,S]:null==S?rD:[S])[0])return L;if("children"in h&&h.children&&h.children&&"skip"!==L[0])for(w=(_?h.children.length:-1)+C,R=k.concat(h);w>-1&&w<h.children.length;){let g=h.children[w];if(!1===(N=factory(g,w,R)())[0])return N;w="number"==typeof N[1]?N[1]:w+C}return L}})(h,void 0,[])()}(C,"comment",function(g,E){let _=E[E.length-1],A=_?_.children.indexOf(g):void 0;return h(g,A,_)},void 0)}return"root"===C.type&&1===C.children.length&&C.children[0].type===h.type?C.children[0]:C}function hast_util_raw_lib_all(h,g){let E=-1;if(h)for(;++E<h.length;)g.handle(h[E])}function lib_root(h,g){hast_util_raw_lib_all(h.children,g)}function hast_util_raw_lib_element(h,g){(function(h,g){if(g.parser.tokenizer.state===rt.PLAINTEXT)return;resetTokenizer(g,rR(h));let E=g.parser.openElements.current,_="namespaceURI"in E?E.namespaceURI:nW.html;_===nW.html&&"svg"===h.tagName&&(_=nW.svg);let A=function(h,g){let E=(g||nK).space;return nJ(h,"svg"===E?nF:nM)}({...h,children:[]},{space:_===nW.svg?"svg":"html"}),b="attrs"in A?A.attrs:[],C={type:el.START_TAG,tagName:h.tagName,tagID:getTagID(h.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:b,location:createParse5Location(h)};g.parser.currentToken=C,g.parser._processToken(g.parser.currentToken),g.parser.tokenizer.lastStartTagName=h.tagName})(h,g),hast_util_raw_lib_all(h.children,g),function(h,g){if(!g.parser.tokenizer.inForeignNode&&n0.includes(h.tagName)||g.parser.tokenizer.state===rt.PLAINTEXT)return;resetTokenizer(g,rO(h));let E={type:el.END_TAG,tagName:h.tagName,tagID:getTagID(h.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:createParse5Location(h)};g.parser.currentToken=E,g.parser._processToken(g.parser.currentToken),E.tagName===g.parser.tokenizer.lastStartTagName&&(g.parser.tokenizer.state===rt.RCDATA||g.parser.tokenizer.state===rt.RAWTEXT||g.parser.tokenizer.state===rt.SCRIPT_DATA)&&(g.parser.tokenizer.state=rt.DATA)}(h,g)}function hast_util_raw_lib_text(h,g){let E={type:el.CHARACTER,chars:h.value,location:createParse5Location(h)};resetTokenizer(g,rR(h)),g.parser.currentToken=E,g.parser._processToken(g.parser.currentToken)}function lib_doctype(h,g){let E={type:el.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:createParse5Location(h)};resetTokenizer(g,rR(h)),g.parser.currentToken=E,g.parser._processToken(g.parser.currentToken)}function lib_comment(h,g){let E=h.value,_={type:el.COMMENT,data:E,location:createParse5Location(h)};resetTokenizer(g,rR(h)),g.parser.currentToken=_,g.parser._processToken(g.parser.currentToken)}function handleRaw(h,g){if(g.parser.tokenizer.preprocessor.html="",g.parser.tokenizer.preprocessor.pos=-1,g.parser.tokenizer.preprocessor.lastGapPos=-2,g.parser.tokenizer.preprocessor.gapStack=[],g.parser.tokenizer.preprocessor.skipNextNewLine=!1,g.parser.tokenizer.preprocessor.lastChunkWritten=!1,g.parser.tokenizer.preprocessor.endOfChunkHit=!1,g.parser.tokenizer.preprocessor.isEol=!1,setPoint(g,rR(h)),g.parser.tokenizer.write(h.value,!1),g.parser.tokenizer._runParsingLoop(),72===g.parser.tokenizer.state||78===g.parser.tokenizer.state){g.parser.tokenizer.preprocessor.lastChunkWritten=!0;let h=g.parser.tokenizer._consume();g.parser.tokenizer._callState(h)}}function unknown(h,g){if(g.options.passThrough&&g.options.passThrough.includes(h.type))!function(h,g){g.stitches=!0;let E="children"in h?n_({...h,children:[]}):n_(h);if("children"in h&&"children"in E){let _=raw({type:"root",children:h.children},g.options);E.children=_.children}lib_comment({type:"comment",value:{stitch:E}},g)}(h,g);else{let g="";throw rL.has(h.type)&&(g=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),Error("Cannot compile `"+h.type+"` node"+g)}}function resetTokenizer(h,g){setPoint(h,g);let E=h.parser.tokenizer.currentCharacterToken;E&&E.location&&(E.location.endLine=h.parser.tokenizer.preprocessor.line,E.location.endCol=h.parser.tokenizer.preprocessor.col+1,E.location.endOffset=h.parser.tokenizer.preprocessor.offset+1,h.parser.currentToken=E,h.parser._processToken(h.parser.currentToken)),h.parser.tokenizer.paused=!1,h.parser.tokenizer.inLoop=!1,h.parser.tokenizer.active=!1,h.parser.tokenizer.returnState=rt.DATA,h.parser.tokenizer.charRefCode=-1,h.parser.tokenizer.consumedAfterSnapshot=-1,h.parser.tokenizer.currentLocation=null,h.parser.tokenizer.currentCharacterToken=null,h.parser.tokenizer.currentToken=null,h.parser.tokenizer.currentAttr={name:"",value:""}}function setPoint(h,g){if(g&&void 0!==g.offset){let E={startLine:g.line,startCol:g.column,startOffset:g.offset,endLine:-1,endCol:-1,endOffset:-1};h.parser.tokenizer.preprocessor.lineStartPos=-g.column+1,h.parser.tokenizer.preprocessor.droppedBufferSize=g.offset,h.parser.tokenizer.preprocessor.line=g.line,h.parser.tokenizer.currentLocation=E}}function createParse5Location(h){let g=rR(h)||{line:void 0,column:void 0,offset:void 0},E=rO(h)||{line:void 0,column:void 0,offset:void 0},_={startLine:g.line,startCol:g.column,startOffset:g.offset,endLine:E.line,endCol:E.column,endOffset:E.offset};return _}function rehypeRaw(h){return function(g,E){let _=raw(g,{...h,file:E});return _}}let rM=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],rF={nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},rB=["cent","copy","divide","gt","lt","not","para","times"],rH={}.hasOwnProperty,rU={};for(A in rF)rH.call(rF,A)&&(rU[rF[A]]=A);function formatSmart(h,g,E){let _,A=function(h,g,E){let _="&#x"+h.toString(16).toUpperCase();return E&&g&&!/[\dA-Fa-f]/.test(String.fromCharCode(g))?_:_+";"}(h,g,E.omitOptionalSemicolons);if((E.useNamedReferences||E.useShortestReferences)&&(_=function(h,g,E,_){let A=String.fromCharCode(h);if(rH.call(rU,A)){let h=rU[A],b="&"+h;return E&&rM.includes(h)&&!rB.includes(h)&&(!_||g&&61!==g&&/[^\da-z]/i.test(String.fromCharCode(g)))?b:b+";"}return""}(h,g,E.omitOptionalSemicolons,E.attribute)),(E.useShortestReferences||!_)&&E.useShortestReferences){let _=function(h,g,E){let _="&#"+String(h);return E&&g&&!/\d/.test(String.fromCharCode(g))?_:_+";"}(h,g,E.omitOptionalSemicolons);_.length<A.length&&(A=_)}return _&&(!E.useShortestReferences||_.length<A.length)?_:A}function stringifyEntities(h,g){return function(h,g){if(h=h.replace(g.subset?function(h){let g=[],E=-1;for(;++E<h.length;)g.push(h[E].replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"));return RegExp("(?:"+g.join("|")+")","g")}(g.subset):/["&'<>`]/g,basic),g.subset||g.escapeOnly)return h;return h.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,function(h,E,_){return g.format((h.charCodeAt(0)-55296)*1024+h.charCodeAt(1)-56320+65536,_.charCodeAt(E+2),g)}).replace(/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,basic);function basic(h,E,_){return g.format(h.charCodeAt(0),_.charCodeAt(E+1),g)}}(h,Object.assign({format:formatSmart},g))}let rz=/^>|^->|<!--|-->|--!>|<!-$/g,rG=[">"],r$=["<",">"];function ccount(h,g){let E=String(h);if("string"!=typeof g)throw TypeError("Expected character");let _=0,A=E.indexOf(g);for(;-1!==A;)_++,A=E.indexOf(g,A+g.length);return _}let rj=/[ \t\n\f\r]/g;function whitespace(h){return"object"==typeof h?"text"===h.type&&lib_empty(h.value):lib_empty(h)}function lib_empty(h){return""===h.replace(rj,"")}let rV=siblings(1),rq=siblings(-1),rW=[];function siblings(h){return function(g,E,_){let A=g?g.children:rW,b=(E||0)+h,C=A[b];if(!_)for(;C&&whitespace(C);)b+=h,C=A[b];return C}}let rY={}.hasOwnProperty;function omission(h){return function(g,E,_){return rY.call(h,g.tagName)&&h[g.tagName](g,E,_)}}let rQ=omission({body:function(h,g,E){let _=rV(E,g);return!_||"comment"!==_.type},caption:headOrColgroupOrCaption,colgroup:headOrColgroupOrCaption,dd:function(h,g,E){let _=rV(E,g);return!_||"element"===_.type&&("dt"===_.tagName||"dd"===_.tagName)},dt:function(h,g,E){let _=rV(E,g);return!!(_&&"element"===_.type&&("dt"===_.tagName||"dd"===_.tagName))},head:headOrColgroupOrCaption,html:function(h,g,E){let _=rV(E,g);return!_||"comment"!==_.type},li:function(h,g,E){let _=rV(E,g);return!_||"element"===_.type&&"li"===_.tagName},optgroup:function(h,g,E){let _=rV(E,g);return!_||"element"===_.type&&"optgroup"===_.tagName},option:function(h,g,E){let _=rV(E,g);return!_||"element"===_.type&&("option"===_.tagName||"optgroup"===_.tagName)},p:function(h,g,E){let _=rV(E,g);return _?"element"===_.type&&("address"===_.tagName||"article"===_.tagName||"aside"===_.tagName||"blockquote"===_.tagName||"details"===_.tagName||"div"===_.tagName||"dl"===_.tagName||"fieldset"===_.tagName||"figcaption"===_.tagName||"figure"===_.tagName||"footer"===_.tagName||"form"===_.tagName||"h1"===_.tagName||"h2"===_.tagName||"h3"===_.tagName||"h4"===_.tagName||"h5"===_.tagName||"h6"===_.tagName||"header"===_.tagName||"hgroup"===_.tagName||"hr"===_.tagName||"main"===_.tagName||"menu"===_.tagName||"nav"===_.tagName||"ol"===_.tagName||"p"===_.tagName||"pre"===_.tagName||"section"===_.tagName||"table"===_.tagName||"ul"===_.tagName):!E||!("element"===E.type&&("a"===E.tagName||"audio"===E.tagName||"del"===E.tagName||"ins"===E.tagName||"map"===E.tagName||"noscript"===E.tagName||"video"===E.tagName))},rp:rubyElement,rt:rubyElement,tbody:function(h,g,E){let _=rV(E,g);return!_||"element"===_.type&&("tbody"===_.tagName||"tfoot"===_.tagName)},td:cells,tfoot:function(h,g,E){return!rV(E,g)},th:cells,thead:function(h,g,E){let _=rV(E,g);return!!(_&&"element"===_.type&&("tbody"===_.tagName||"tfoot"===_.tagName))},tr:function(h,g,E){let _=rV(E,g);return!_||"element"===_.type&&"tr"===_.tagName}});function headOrColgroupOrCaption(h,g,E){let _=rV(E,g,!0);return!_||"comment"!==_.type&&!("text"===_.type&&whitespace(_.value.charAt(0)))}function rubyElement(h,g,E){let _=rV(E,g);return!_||"element"===_.type&&("rp"===_.tagName||"rt"===_.tagName)}function cells(h,g,E){let _=rV(E,g);return!_||"element"===_.type&&("td"===_.tagName||"th"===_.tagName)}let rX=omission({body:function(h){let g=rV(h,-1,!0);return!g||"comment"!==g.type&&!("text"===g.type&&whitespace(g.value.charAt(0)))&&!("element"===g.type&&("meta"===g.tagName||"link"===g.tagName||"script"===g.tagName||"style"===g.tagName||"template"===g.tagName))},colgroup:function(h,g,E){let _=rq(E,g),A=rV(h,-1,!0);return!(E&&_&&"element"===_.type&&"colgroup"===_.tagName&&rQ(_,E.children.indexOf(_),E))&&!!(A&&"element"===A.type&&"col"===A.tagName)},head:function(h){let g=h.children,E=[],_=-1;for(;++_<g.length;){let h=g[_];if("element"===h.type&&("title"===h.tagName||"base"===h.tagName)){if(E.includes(h.tagName))return!1;E.push(h.tagName)}}return g.length>0},html:function(h){let g=rV(h,-1);return!g||"comment"!==g.type},tbody:function(h,g,E){let _=rq(E,g),A=rV(h,-1);return!(E&&_&&"element"===_.type&&("thead"===_.tagName||"tbody"===_.tagName)&&rQ(_,E.children.indexOf(_),E))&&!!(A&&"element"===A.type&&"tr"===A.tagName)}}),rK={name:[["	\n\f\r &/=>".split(""),"	\n\f\r \"&'/=>`".split("")],["\x00	\n\f\r \"&'/<=>".split(""),"\x00	\n\f\r \"&'/<=>`".split("")]],unquoted:[["	\n\f\r &>".split(""),"\x00	\n\f\r \"&'<=>`".split("")],["\x00	\n\f\r \"&'<=>`".split(""),"\x00	\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\x00&'".split(""),"\x00\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\x00"&'.split(""),"\x00\"&'`".split("")]]},rZ=["<","&"];function text_text(h,g,E,_){return E&&"element"===E.type&&("script"===E.tagName||"style"===E.tagName)?h.value:stringifyEntities(h.value,Object.assign({},_.settings.characterReferences,{subset:rZ}))}let rJ=zwitch("type",{invalid:function(h){throw Error("Expected node, not `"+h+"`")},unknown:function(h){throw Error("Cannot compile unknown node `"+h.type+"`")},handlers:{comment:function(h,g,E,_){return _.settings.bogusComments?"<?"+stringifyEntities(h.value,Object.assign({},_.settings.characterReferences,{subset:rG}))+">":"<!--"+h.value.replace(rz,function(h){return stringifyEntities(h,Object.assign({},_.settings.characterReferences,{subset:r$}))})+"-->"},doctype:function(h,g,E,_){return"<!"+(_.settings.upperDoctype?"DOCTYPE":"doctype")+(_.settings.tightDoctype?"":" ")+"html>"},element:function(h,g,E,_){let A;let b=_.schema,C="svg"!==b.space&&_.settings.omitOptionalTags,k="svg"===b.space?_.settings.closeEmptyElements:_.settings.voids.includes(h.tagName.toLowerCase()),S=[];"html"===b.space&&"svg"===h.tagName&&(_.schema=nF);let N=function(h,g){let E;let _=[],A=-1;if(g){for(E in g)if(null!==g[E]&&void 0!==g[E]){let A=function(h,g,E){let _;let A=find(h.schema,g),b=h.settings.allowParseErrors&&"html"===h.schema.space?0:1,C=h.settings.allowDangerousCharacters?0:1,k=h.quote;if(A.overloadedBoolean&&(E===A.attribute||""===E)?E=!0:(A.boolean||A.overloadedBoolean&&"string"!=typeof E)&&(E=!!E),null==E||!1===E||"number"==typeof E&&Number.isNaN(E))return"";let S=stringifyEntities(A.attribute,Object.assign({},h.settings.characterReferences,{subset:rK.name[b][C]}));return!0===E?S:(E=Array.isArray(E)?(A.commaSeparated?comma_separated_tokens_stringify:space_separated_tokens_stringify)(E,{padLeft:!h.settings.tightCommaSeparatedLists}):String(E),h.settings.collapseEmptyAttributes&&!E)?S:(h.settings.preferUnquoted&&(_=stringifyEntities(E,Object.assign({},h.settings.characterReferences,{attribute:!0,subset:rK.unquoted[b][C]}))),_!==E&&(h.settings.quoteSmart&&ccount(E,k)>ccount(E,h.alternative)&&(k=h.alternative),_=k+stringifyEntities(E,Object.assign({},h.settings.characterReferences,{subset:("'"===k?rK.single:rK.double)[b][C],attribute:!0}))+k),S+(_?"="+_:_))}(h,E,g[E]);A&&_.push(A)}}for(;++A<_.length;){let g=h.settings.tightAttributes?_[A].charAt(_[A].length-1):void 0;A!==_.length-1&&'"'!==g&&"'"!==g&&(_[A]+=" ")}return _.join("")}(_,h.properties),w=_.all("html"===b.space&&"template"===h.tagName?h.content:h);return _.schema=b,w&&(k=!1),!N&&C&&rX(h,g,E)||(S.push("<",h.tagName,N?" "+N:""),k&&("svg"===b.space||_.settings.closeSelfClosing)&&(A=N.charAt(N.length-1),(!_.settings.tightSelfClosing||"/"===A||A&&'"'!==A&&"'"!==A)&&S.push(" "),S.push("/")),S.push(">")),S.push(w),k||C&&rQ(h,g,E)||S.push("</"+h.tagName+">"),S.join("")},raw:function(h,g,E,_){return _.settings.allowDangerousHtml?h.value:text_text(h,g,E,_)},root:function(h,g,E,_){return _.all(h)},text:text_text}}),r0={},r1={},r2=[];function hast_util_to_html_lib_one(h,g,E){return rJ(h,g,E,this)}function hast_util_to_html_lib_all(h){let g=[],E=h&&h.children||r2,_=-1;for(;++_<E.length;)g[_]=this.one(E[_],_,h);return g.join("")}function rehypeStringify(h){let g={...this.data("settings"),...h};this.compiler=function(h){return function(h,g){let E=g||r0,_=E.quote||'"';if('"'!==_&&"'"!==_)throw Error("Invalid quote `"+_+"`, expected `'` or `\"`");let A={one:hast_util_to_html_lib_one,all:hast_util_to_html_lib_all,settings:{omitOptionalTags:E.omitOptionalTags||!1,allowParseErrors:E.allowParseErrors||!1,allowDangerousCharacters:E.allowDangerousCharacters||!1,quoteSmart:E.quoteSmart||!1,preferUnquoted:E.preferUnquoted||!1,tightAttributes:E.tightAttributes||!1,upperDoctype:E.upperDoctype||!1,tightDoctype:E.tightDoctype||!1,bogusComments:E.bogusComments||!1,tightCommaSeparatedLists:E.tightCommaSeparatedLists||!1,tightSelfClosing:E.tightSelfClosing||!1,collapseEmptyAttributes:E.collapseEmptyAttributes||!1,allowDangerousHtml:E.allowDangerousHtml||!1,voids:E.voids||n0,characterReferences:E.characterReferences||r1,closeSelfClosing:E.closeSelfClosing||!1,closeEmptyElements:E.closeEmptyElements||!1},schema:"svg"===E.space?nF:nM,quote:_,alternative:'"'===_?"'":'"'};return A.one(Array.isArray(h)?{type:"root",children:h}:h,void 0,void 0)}(h,g)}}let r3=regexCheck(/[A-Za-z]/),r4=regexCheck(/[\dA-Za-z]/),r5=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(h){return null!==h&&(h<32||127===h)}let r6=regexCheck(/\d/),r8=regexCheck(/[\dA-Fa-f]/),r9=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(h){return null!==h&&h<-2}function markdownLineEndingOrSpace(h){return null!==h&&(h<0||32===h)}function markdownSpace(h){return -2===h||-1===h||32===h}let r7=regexCheck(/\p{P}|\p{S}/u),ie=regexCheck(/\s/);function regexCheck(h){return function(g){return null!==g&&g>-1&&h.test(String.fromCharCode(g))}}let lib_convert=function(h){if(null==h)return unist_util_is_lib_ok;if("function"==typeof h)return lib_castFactory(h);if("object"==typeof h)return Array.isArray(h)?function(h){let g=[],E=-1;for(;++E<h.length;)g[E]=lib_convert(h[E]);return lib_castFactory(function(...h){let E=-1;for(;++E<g.length;)if(g[E].apply(this,h))return!0;return!1})}(h):lib_castFactory(function(g){let E;for(E in h)if(g[E]!==h[E])return!1;return!0});if("string"==typeof h)return lib_castFactory(function(g){return g&&g.type===h});throw Error("Expected function, string, or object as test")};function lib_castFactory(h){return function(g,E,_){var A;return!!(null!==(A=g)&&"object"==typeof A&&"type"in A&&h.call(this,g,"number"==typeof E?E:void 0,_||void 0))}}function unist_util_is_lib_ok(){return!0}let it=[];function lib_visitParents(h,g,E,_){let A;"function"==typeof g&&"function"!=typeof E?(_=E,E=g):A=g;let b=lib_convert(A),C=_?-1:1;(function factory(h,A,k){let S=h&&"object"==typeof h?h:{};if("string"==typeof S.type){let g="string"==typeof S.tagName?S.tagName:"string"==typeof S.name?S.name:void 0;Object.defineProperty(visit,"name",{value:"node ("+h.type+(g?"<"+g+">":"")+")"})}return visit;function visit(){var S;let N,w,R,L=it;if((!g||b(h,A,k[k.length-1]||void 0))&&!1===(L=Array.isArray(S=E(h,k))?S:"number"==typeof S?[!0,S]:null==S?it:[S])[0])return L;if("children"in h&&h.children&&h.children&&"skip"!==L[0])for(w=(_?h.children.length:-1)+C,R=k.concat(h);w>-1&&w<h.children.length;){let g=h.children[w];if(!1===(N=factory(g,w,R)())[0])return N;w="number"==typeof N[1]?N[1]:w+C}return L}})(h,void 0,[])()}let ir="phrasing",ii=["autolink","link","image","label"];function enterLiteralAutolink(h){this.enter({type:"link",title:null,url:"",children:[]},h)}function enterLiteralAutolinkValue(h){this.config.enter.autolinkProtocol.call(this,h)}function exitLiteralAutolinkHttp(h){this.config.exit.autolinkProtocol.call(this,h)}function exitLiteralAutolinkWww(h){this.config.exit.data.call(this,h);let g=this.stack[this.stack.length-1];g.type,g.url="http://"+this.sliceSerialize(h)}function exitLiteralAutolinkEmail(h){this.config.exit.autolinkEmail.call(this,h)}function exitLiteralAutolink(h){this.exit(h)}function transformGfmAutolinkLiterals(h){!function(h,g,E){let _=lib_convert((E||{}).ignore||[]),A=function(h){let g=[];if(!Array.isArray(h))throw TypeError("Expected find and replace tuple or list of tuples");let E=!h[0]||Array.isArray(h[0])?h:[h],_=-1;for(;++_<E.length;){var A;let h=E[_];g.push(["string"==typeof(A=h[0])?RegExp(function(h){if("string"!=typeof h)throw TypeError("Expected a string");return h.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(A),"g"):A,function(h){return"function"==typeof h?h:function(){return h}}(h[1])])}return g}(g),b=-1;for(;++b<A.length;)lib_visitParents(h,"text",visitor);function visitor(h,g){let E,C=-1;for(;++C<g.length;){let h=g[C],A=E?E.children:void 0;if(_(h,A?A.indexOf(h):void 0,E))return;E=h}if(E)return function(h,g){let E=g[g.length-1],_=A[b][0],C=A[b][1],k=0,S=E.children,N=S.indexOf(h),w=!1,R=[];_.lastIndex=0;let L=_.exec(h.value);for(;L;){let E=L.index,A={index:L.index,input:L.input,stack:[...g,h]},b=C(...L,A);if("string"==typeof b&&(b=b.length>0?{type:"text",value:b}:void 0),!1===b?_.lastIndex=E+1:(k!==E&&R.push({type:"text",value:h.value.slice(k,E)}),Array.isArray(b)?R.push(...b):b&&R.push(b),k=E+L[0].length,w=!0),!_.global)break;L=_.exec(h.value)}return w?(k<h.value.length&&R.push({type:"text",value:h.value.slice(k)}),E.children.splice(N,1,...R)):R=[h],N+R.length}(h,g)}}(h,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,findUrl],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,findEmail]],{ignore:["link","linkReference"]})}function findUrl(h,g,E,_,A){let b="";if(!previous(A)||(/^w/i.test(g)&&(E=g+E,g="",b="http://"),!function(h){let g=h.split(".");return!(g.length<2||g[g.length-1]&&(/_/.test(g[g.length-1])||!/[a-zA-Z\d]/.test(g[g.length-1]))||g[g.length-2]&&(/_/.test(g[g.length-2])||!/[a-zA-Z\d]/.test(g[g.length-2])))}(E)))return!1;let C=function(h){let g=/[!"&'),.:;<>?\]}]+$/.exec(h);if(!g)return[h,void 0];h=h.slice(0,g.index);let E=g[0],_=E.indexOf(")"),A=ccount(h,"("),b=ccount(h,")");for(;-1!==_&&A>b;)h+=E.slice(0,_+1),_=(E=E.slice(_+1)).indexOf(")"),b++;return[h,E]}(E+_);if(!C[0])return!1;let k={type:"link",title:null,url:b+g+C[0],children:[{type:"text",value:g+C[0]}]};return C[1]?[k,{type:"text",value:C[1]}]:k}function findEmail(h,g,E,_){return!(!previous(_,!0)||/[-\d_]$/.test(E))&&{type:"link",title:null,url:"mailto:"+g+"@"+E,children:[{type:"text",value:g+"@"+E}]}}function previous(h,g){let E=h.input.charCodeAt(h.index-1);return(0===h.index||ie(E)||r7(E))&&(!g||47!==E)}function normalizeIdentifier(h){return h.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}function enterFootnoteDefinition(h){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},h)}function enterFootnoteDefinitionLabelString(){this.buffer()}function exitFootnoteDefinitionLabelString(h){let g=this.resume(),E=this.stack[this.stack.length-1];E.type,E.label=g,E.identifier=normalizeIdentifier(this.sliceSerialize(h)).toLowerCase()}function exitFootnoteDefinition(h){this.exit(h)}function enterFootnoteCall(h){this.enter({type:"footnoteReference",identifier:"",label:""},h)}function enterFootnoteCallString(){this.buffer()}function exitFootnoteCallString(h){let g=this.resume(),E=this.stack[this.stack.length-1];E.type,E.label=g,E.identifier=normalizeIdentifier(this.sliceSerialize(h)).toLowerCase()}function exitFootnoteCall(h){this.exit(h)}function footnoteReference(h,g,E,_){let A=E.createTracker(_),b=A.move("[^"),C=E.enter("footnoteReference"),k=E.enter("reference");return b+=A.move(E.safe(E.associationId(h),{...A.current(),before:b,after:"]"})),k(),C(),b+=A.move("]")}function footnoteDefinition(h,g,E,_){let A=E.createTracker(_),b=A.move("[^"),C=E.enter("footnoteDefinition"),k=E.enter("label");return b+=A.move(E.safe(E.associationId(h),{...A.current(),before:b,after:"]"})),k(),b+=A.move("]:"+(h.children&&h.children.length>0?" ":"")),A.shift(4),b+=A.move(E.indentLines(E.containerFlow(h,A.current()),map)),C(),b}function map(h,g,E){return 0===g?h:(E?"":"    ")+h}footnoteReference.peek=function(){return"["};let io=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function enterStrikethrough(h){this.enter({type:"delete",children:[]},h)}function exitStrikethrough(h){this.exit(h)}function handleDelete(h,g,E,_){let A=E.createTracker(_),b=E.enter("strikethrough"),C=A.move("~~");return C+=E.containerPhrasing(h,{...A.current(),before:C,after:"~"})+A.move("~~"),b(),C}function defaultStringLength(h){return h.length}function toAlignment(h){let g="string"==typeof h?h.codePointAt(0):0;return 67===g||99===g?99:76===g||108===g?108:82===g||114===g?114:0}function blockquote_map(h,g,E){return">"+(E?"":" ")+h}function listInScope(h,g,E){if("string"==typeof g&&(g=[g]),!g||0===g.length)return E;let _=-1;for(;++_<g.length;)if(h.includes(g[_]))return!0;return!1}function hardBreak(h,g,E,_){let A=-1;for(;++A<E.unsafe.length;){var b,C;if("\n"===E.unsafe[A].character&&listInScope(b=E.stack,(C=E.unsafe[A]).inConstruct,!0)&&!listInScope(b,C.notInConstruct,!1))return/[ \t]/.test(_.before)?"":" "}return"\\\n"}function code_map(h,g,E){return(E?"":"    ")+h}function checkQuote(h){let g=h.options.quote||'"';if('"'!==g&&"'"!==g)throw Error("Cannot serialize title with `"+g+"` for `options.quote`, expected `\"`, or `'`");return g}function emphasis(h,g,E,_){let A=function(h){let g=h.options.emphasis||"*";if("*"!==g&&"_"!==g)throw Error("Cannot serialize emphasis with `"+g+"` for `options.emphasis`, expected `*`, or `_`");return g}(E),b=E.enter("emphasis"),C=E.createTracker(_),k=C.move(A);return k+=C.move(E.containerPhrasing(h,{before:k,after:A,...C.current()}))+C.move(A),b(),k}function lib_visit(h,g,E,_){let A,b,C;"function"==typeof g&&"function"!=typeof E?(b=void 0,C=g,A=E):(b=g,C=E,A=_),lib_visitParents(h,b,function(h,g){let E=g[g.length-1],_=E?E.children.indexOf(h):void 0;return C(h,_,E)},A)}handleDelete.peek=function(){return"~"},emphasis.peek=function(h,g,E){return E.options.emphasis||"*"};let is={};function lib_toString(h,g){let E=g||is,_="boolean"!=typeof E.includeImageAlt||E.includeImageAlt,A="boolean"!=typeof E.includeHtml||E.includeHtml;return mdast_util_to_string_lib_one(h,_,A)}function mdast_util_to_string_lib_one(h,g,E){if(h&&"object"==typeof h){if("value"in h)return"html"!==h.type||E?h.value:"";if(g&&"alt"in h&&h.alt)return h.alt;if("children"in h)return mdast_util_to_string_lib_all(h.children,g,E)}return Array.isArray(h)?mdast_util_to_string_lib_all(h,g,E):""}function mdast_util_to_string_lib_all(h,g,E){let _=[],A=-1;for(;++A<h.length;)_[A]=mdast_util_to_string_lib_one(h[A],g,E);return _.join("")}function html_html(h){return h.value||""}function image_image(h,g,E,_){let A=checkQuote(E),b='"'===A?"Quote":"Apostrophe",C=E.enter("image"),k=E.enter("label"),S=E.createTracker(_),N=S.move("![");return N+=S.move(E.safe(h.alt,{before:N,after:"]",...S.current()}))+S.move("]("),k(),!h.url&&h.title||/[\0- \u007F]/.test(h.url)?(k=E.enter("destinationLiteral"),N+=S.move("<"),N+=S.move(E.safe(h.url,{before:N,after:">",...S.current()}))+S.move(">")):(k=E.enter("destinationRaw"),N+=S.move(E.safe(h.url,{before:N,after:h.title?" ":")",...S.current()}))),k(),h.title&&(k=E.enter(`title${b}`),N+=S.move(" "+A),N+=S.move(E.safe(h.title,{before:N,after:A,...S.current()}))+S.move(A),k()),N+=S.move(")"),C(),N}function imageReference(h,g,E,_){let A=h.referenceType,b=E.enter("imageReference"),C=E.enter("label"),k=E.createTracker(_),S=k.move("!["),N=E.safe(h.alt,{before:S,after:"]",...k.current()});S+=k.move(N+"]["),C();let w=E.stack;E.stack=[],C=E.enter("reference");let R=E.safe(E.associationId(h),{before:S,after:"]",...k.current()});return C(),E.stack=w,b(),"full"!==A&&N&&N===R?"shortcut"===A?S=S.slice(0,-1):S+=k.move("]"):S+=k.move(R+"]"),S}function inlineCode(h,g,E){let _=h.value||"",A="`",b=-1;for(;RegExp("(^|[^`])"+A+"([^`]|$)").test(_);)A+="`";for(/[^ \r\n]/.test(_)&&(/^[ \r\n]/.test(_)&&/[ \r\n]$/.test(_)||/^`|`$/.test(_))&&(_=" "+_+" ");++b<E.unsafe.length;){let h;let g=E.unsafe[b],A=E.compilePattern(g);if(g.atBreak)for(;h=A.exec(_);){let g=h.index;10===_.charCodeAt(g)&&13===_.charCodeAt(g-1)&&g--,_=_.slice(0,g)+" "+_.slice(h.index+1)}}return A+_+A}function formatLinkAsAutolink(h,g){let E=lib_toString(h);return!!(!g.options.resourceLink&&h.url&&!h.title&&h.children&&1===h.children.length&&"text"===h.children[0].type&&(E===h.url||"mailto:"+E===h.url)&&/^[a-z][a-z+.-]+:/i.test(h.url)&&!/[\0- <>\u007F]/.test(h.url))}function link_link(h,g,E,_){let A,b;let C=checkQuote(E),k='"'===C?"Quote":"Apostrophe",S=E.createTracker(_);if(formatLinkAsAutolink(h,E)){let g=E.stack;E.stack=[],A=E.enter("autolink");let _=S.move("<");return _+=S.move(E.containerPhrasing(h,{before:_,after:">",...S.current()}))+S.move(">"),A(),E.stack=g,_}A=E.enter("link"),b=E.enter("label");let N=S.move("[");return N+=S.move(E.containerPhrasing(h,{before:N,after:"](",...S.current()}))+S.move("]("),b(),!h.url&&h.title||/[\0- \u007F]/.test(h.url)?(b=E.enter("destinationLiteral"),N+=S.move("<"),N+=S.move(E.safe(h.url,{before:N,after:">",...S.current()}))+S.move(">")):(b=E.enter("destinationRaw"),N+=S.move(E.safe(h.url,{before:N,after:h.title?" ":")",...S.current()}))),b(),h.title&&(b=E.enter(`title${k}`),N+=S.move(" "+C),N+=S.move(E.safe(h.title,{before:N,after:C,...S.current()}))+S.move(C),b()),N+=S.move(")"),A(),N}function linkReference(h,g,E,_){let A=h.referenceType,b=E.enter("linkReference"),C=E.enter("label"),k=E.createTracker(_),S=k.move("["),N=E.containerPhrasing(h,{before:S,after:"]",...k.current()});S+=k.move(N+"]["),C();let w=E.stack;E.stack=[],C=E.enter("reference");let R=E.safe(E.associationId(h),{before:S,after:"]",...k.current()});return C(),E.stack=w,b(),"full"!==A&&N&&N===R?"shortcut"===A?S=S.slice(0,-1):S+=k.move("]"):S+=k.move(R+"]"),S}function checkBullet(h){let g=h.options.bullet||"*";if("*"!==g&&"+"!==g&&"-"!==g)throw Error("Cannot serialize items with `"+g+"` for `options.bullet`, expected `*`, `+`, or `-`");return g}function checkRule(h){let g=h.options.rule||"*";if("*"!==g&&"-"!==g&&"_"!==g)throw Error("Cannot serialize rules with `"+g+"` for `options.rule`, expected `*`, `-`, or `_`");return g}html_html.peek=function(){return"<"},image_image.peek=function(){return"!"},imageReference.peek=function(){return"!"},inlineCode.peek=function(){return"`"},link_link.peek=function(h,g,E){return formatLinkAsAutolink(h,E)?"<":"["},linkReference.peek=function(){return"["};let il=lib_convert(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function strong(h,g,E,_){let A=function(h){let g=h.options.strong||"*";if("*"!==g&&"_"!==g)throw Error("Cannot serialize strong with `"+g+"` for `options.strong`, expected `*`, or `_`");return g}(E),b=E.enter("strong"),C=E.createTracker(_),k=C.move(A+A);return k+=C.move(E.containerPhrasing(h,{before:k,after:A,...C.current()}))+C.move(A+A),b(),k}strong.peek=function(h,g,E){return E.options.strong||"*"};let ic={blockquote:function(h,g,E,_){let A=E.enter("blockquote"),b=E.createTracker(_);b.move("> "),b.shift(2);let C=E.indentLines(E.containerFlow(h,b.current()),blockquote_map);return A(),C},break:hardBreak,code:function(h,g,E,_){let A=function(h){let g=h.options.fence||"`";if("`"!==g&&"~"!==g)throw Error("Cannot serialize code with `"+g+"` for `options.fence`, expected `` ` `` or `~`");return g}(E),b=h.value||"",C="`"===A?"GraveAccent":"Tilde";if(!1===E.options.fences&&h.value&&!h.lang&&/[^ \r\n]/.test(h.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(h.value)){let h=E.enter("codeIndented"),g=E.indentLines(b,code_map);return h(),g}let k=E.createTracker(_),S=A.repeat(Math.max(function(h,g){let E=String(h),_=E.indexOf(g),A=_,b=0,C=0;if("string"!=typeof g)throw TypeError("Expected substring");for(;-1!==_;)_===A?++b>C&&(C=b):b=1,A=_+g.length,_=E.indexOf(g,A);return C}(b,A)+1,3)),N=E.enter("codeFenced"),w=k.move(S);if(h.lang){let g=E.enter(`codeFencedLang${C}`);w+=k.move(E.safe(h.lang,{before:w,after:" ",encode:["`"],...k.current()})),g()}if(h.lang&&h.meta){let g=E.enter(`codeFencedMeta${C}`);w+=k.move(" "),w+=k.move(E.safe(h.meta,{before:w,after:"\n",encode:["`"],...k.current()})),g()}return w+=k.move("\n"),b&&(w+=k.move(b+"\n")),w+=k.move(S),N(),w},definition:function(h,g,E,_){let A=checkQuote(E),b='"'===A?"Quote":"Apostrophe",C=E.enter("definition"),k=E.enter("label"),S=E.createTracker(_),N=S.move("[");return N+=S.move(E.safe(E.associationId(h),{before:N,after:"]",...S.current()}))+S.move("]: "),k(),!h.url||/[\0- \u007F]/.test(h.url)?(k=E.enter("destinationLiteral"),N+=S.move("<"),N+=S.move(E.safe(h.url,{before:N,after:">",...S.current()}))+S.move(">")):(k=E.enter("destinationRaw"),N+=S.move(E.safe(h.url,{before:N,after:h.title?" ":"\n",...S.current()}))),k(),h.title&&(k=E.enter(`title${b}`),N+=S.move(" "+A),N+=S.move(E.safe(h.title,{before:N,after:A,...S.current()}))+S.move(A),k()),C(),N},emphasis:emphasis,hardBreak:hardBreak,heading:function(h,g,E,_){let A;let b=Math.max(Math.min(6,h.depth||1),1),C=E.createTracker(_);if(A=!1,lib_visit(h,function(h){if("value"in h&&/\r?\n|\r/.test(h.value)||"break"===h.type)return A=!0,!1}),(!h.depth||h.depth<3)&&lib_toString(h)&&(E.options.setext||A)){let g=E.enter("headingSetext"),_=E.enter("phrasing"),A=E.containerPhrasing(h,{...C.current(),before:"\n",after:"\n"});return _(),g(),A+"\n"+(1===b?"=":"-").repeat(A.length-(Math.max(A.lastIndexOf("\r"),A.lastIndexOf("\n"))+1))}let k="#".repeat(b),S=E.enter("headingAtx"),N=E.enter("phrasing");C.move(k+" ");let w=E.containerPhrasing(h,{before:"# ",after:"\n",...C.current()});return/^[\t ]/.test(w)&&(w="&#x"+w.charCodeAt(0).toString(16).toUpperCase()+";"+w.slice(1)),w=w?k+" "+w:k,E.options.closeAtx&&(w+=" "+k),N(),S(),w},html:html_html,image:image_image,imageReference:imageReference,inlineCode:inlineCode,link:link_link,linkReference:linkReference,list:function(h,g,E,_){let A=E.enter("list"),b=E.bulletCurrent,C=h.ordered?function(h){let g=h.options.bulletOrdered||".";if("."!==g&&")"!==g)throw Error("Cannot serialize items with `"+g+"` for `options.bulletOrdered`, expected `.` or `)`");return g}(E):checkBullet(E),k=h.ordered?"."===C?")":".":function(h){let g=checkBullet(h),E=h.options.bulletOther;if(!E)return"*"===g?"-":"*";if("*"!==E&&"+"!==E&&"-"!==E)throw Error("Cannot serialize items with `"+E+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(E===g)throw Error("Expected `bullet` (`"+g+"`) and `bulletOther` (`"+E+"`) to be different");return E}(E),S=!!g&&!!E.bulletLastUsed&&C===E.bulletLastUsed;if(!h.ordered){let g=h.children?h.children[0]:void 0;if("*"!==C&&"-"!==C||!g||g.children&&g.children[0]||"list"!==E.stack[E.stack.length-1]||"listItem"!==E.stack[E.stack.length-2]||"list"!==E.stack[E.stack.length-3]||"listItem"!==E.stack[E.stack.length-4]||0!==E.indexStack[E.indexStack.length-1]||0!==E.indexStack[E.indexStack.length-2]||0!==E.indexStack[E.indexStack.length-3]||(S=!0),checkRule(E)===C&&g){let g=-1;for(;++g<h.children.length;){let E=h.children[g];if(E&&"listItem"===E.type&&E.children&&E.children[0]&&"thematicBreak"===E.children[0].type){S=!0;break}}}}S&&(C=k),E.bulletCurrent=C;let N=E.containerFlow(h,_);return E.bulletLastUsed=C,E.bulletCurrent=b,A(),N},listItem:function(h,g,E,_){let A=function(h){let g=h.options.listItemIndent||"one";if("tab"!==g&&"one"!==g&&"mixed"!==g)throw Error("Cannot serialize items with `"+g+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return g}(E),b=E.bulletCurrent||checkBullet(E);g&&"list"===g.type&&g.ordered&&(b=("number"==typeof g.start&&g.start>-1?g.start:1)+(!1===E.options.incrementListMarker?0:g.children.indexOf(h))+b);let C=b.length+1;("tab"===A||"mixed"===A&&(g&&"list"===g.type&&g.spread||h.spread))&&(C=4*Math.ceil(C/4));let k=E.createTracker(_);k.move(b+" ".repeat(C-b.length)),k.shift(C);let S=E.enter("listItem"),N=E.indentLines(E.containerFlow(h,k.current()),function(h,g,E){return g?(E?"":" ".repeat(C))+h:(E?b:b+" ".repeat(C-b.length))+h});return S(),N},paragraph:function(h,g,E,_){let A=E.enter("paragraph"),b=E.enter("phrasing"),C=E.containerPhrasing(h,_);return b(),A(),C},root:function(h,g,E,_){let A=h.children.some(function(h){return il(h)}),b=A?E.containerPhrasing:E.containerFlow;return b.call(E,h,_)},strong:strong,text:function(h,g,E,_){return E.safe(h.value,_)},thematicBreak:function(h,g,E){let _=(checkRule(E)+(E.options.ruleSpaces?" ":"")).repeat(function(h){let g=h.options.ruleRepetition||3;if(g<3)throw Error("Cannot serialize rules with repetition `"+g+"` for `options.ruleRepetition`, expected `3` or more");return g}(E));return E.options.ruleSpaces?_.slice(0,-1):_}};function enterTable(h){let g=h._align;this.enter({type:"table",align:g.map(function(h){return"none"===h?null:h}),children:[]},h),this.data.inTable=!0}function exitTable(h){this.exit(h),this.data.inTable=void 0}function enterRow(h){this.enter({type:"tableRow",children:[]},h)}function exit(h){this.exit(h)}function enterCell(h){this.enter({type:"tableCell",children:[]},h)}function exitCodeText(h){let g=this.resume();this.data.inTable&&(g=g.replace(/\\([\\|])/g,replace));let E=this.stack[this.stack.length-1];E.type,E.value=g,this.exit(h)}function replace(h,g){return"|"===g?g:h}function exitCheck(h){let g=this.stack[this.stack.length-2];g.type,g.checked="taskListCheckValueChecked"===h.type}function exitParagraphWithTaskListItem(h){let g=this.stack[this.stack.length-2];if(g&&"listItem"===g.type&&"boolean"==typeof g.checked){let h=this.stack[this.stack.length-1];h.type;let E=h.children[0];if(E&&"text"===E.type){let _;let A=g.children,b=-1;for(;++b<A.length;){let h=A[b];if("paragraph"===h.type){_=h;break}}_===h&&(E.value=E.value.slice(1),0===E.value.length?h.children.shift():h.position&&E.position&&"number"==typeof E.position.start.offset&&(E.position.start.column++,E.position.start.offset++,h.position.start=Object.assign({},E.position.start)))}}this.exit(h)}function listItemWithTaskListItem(h,g,E,_){let A=h.children[0],b="boolean"==typeof h.checked&&A&&"paragraph"===A.type,C="["+(h.checked?"x":" ")+"] ",k=E.createTracker(_);b&&k.move(C);let S=ic.listItem(h,g,E,{..._,...k.current()});return b&&(S=S.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(h){return h+C})),S}function splice(h,g,E,_){let A;let b=h.length,C=0;if(g=g<0?-g>b?0:b+g:g>b?b:g,E=E>0?E:0,_.length<1e4)(A=Array.from(_)).unshift(g,E),h.splice(...A);else for(E&&h.splice(g,E);C<_.length;)(A=_.slice(C,C+1e4)).unshift(g,0),h.splice(...A),C+=1e4,g+=1e4}function push(h,g){return h.length>0?(splice(h,h.length,0,g),h):g}let iu={}.hasOwnProperty;function combineExtensions(h){let g={},E=-1;for(;++E<h.length;)!function(h,g){let E;for(E in g){let _;let A=iu.call(h,E)?h[E]:void 0,b=A||(h[E]={}),C=g[E];if(C)for(_ in C){iu.call(b,_)||(b[_]=[]);let h=C[_];!function(h,g){let E=-1,_=[];for(;++E<g.length;)("after"===g[E].add?h:_).push(g[E]);splice(h,0,0,_)}(b[_],Array.isArray(h)?h:h?[h]:[])}}}(g,h[E]);return g}let id={tokenize:function(h,g,E){let _=0;return function wwwPrefixInside(g){return(87===g||119===g)&&_<3?(_++,h.consume(g),wwwPrefixInside):46===g&&3===_?(h.consume(g),wwwPrefixAfter):E(g)};function wwwPrefixAfter(h){return null===h?E(h):g(h)}},partial:!0},ip={tokenize:function(h,g,E){let _,A,b;return domainInside;function domainInside(g){return 46===g||95===g?h.check(im,domainAfter,domainAtPunctuation)(g):null===g||markdownLineEndingOrSpace(g)||ie(g)||45!==g&&r7(g)?domainAfter(g):(b=!0,h.consume(g),domainInside)}function domainAtPunctuation(g){return 95===g?_=!0:(A=_,_=void 0),h.consume(g),domainInside}function domainAfter(h){return A||_||!b?E(h):g(h)}},partial:!0},ih={tokenize:function(h,g){let E=0,_=0;return pathInside;function pathInside(A){return 40===A?(E++,h.consume(A),pathInside):41===A&&_<E?pathAtPunctuation(A):33===A||34===A||38===A||39===A||41===A||42===A||44===A||46===A||58===A||59===A||60===A||63===A||93===A||95===A||126===A?h.check(im,g,pathAtPunctuation)(A):null===A||markdownLineEndingOrSpace(A)||ie(A)?g(A):(h.consume(A),pathInside)}function pathAtPunctuation(g){return 41===g&&_++,h.consume(g),pathInside}},partial:!0},im={tokenize:function(h,g,E){return trail;function trail(_){return 33===_||34===_||39===_||41===_||42===_||44===_||46===_||58===_||59===_||63===_||95===_||126===_?(h.consume(_),trail):38===_?(h.consume(_),trailCharRefStart):93===_?(h.consume(_),trailBracketAfter):60===_||null===_||markdownLineEndingOrSpace(_)||ie(_)?g(_):E(_)}function trailBracketAfter(h){return null===h||40===h||91===h||markdownLineEndingOrSpace(h)||ie(h)?g(h):trail(h)}function trailCharRefStart(g){return r3(g)?function trailCharRefInside(g){return 59===g?(h.consume(g),trail):r3(g)?(h.consume(g),trailCharRefInside):E(g)}(g):E(g)}},partial:!0},ig={tokenize:function(h,g,E){return function(g){return h.consume(g),after};function after(h){return r4(h)?E(h):g(h)}},partial:!0},iE={tokenize:function(h,g,E){let _=this;return function(g){return 87!==g&&119!==g||!previousWww.call(_,_.previous)||previousUnbalanced(_.events)?E(g):(h.enter("literalAutolink"),h.enter("literalAutolinkWww"),h.check(id,h.attempt(ip,h.attempt(ih,wwwAfter),E),E)(g))};function wwwAfter(E){return h.exit("literalAutolinkWww"),h.exit("literalAutolink"),g(E)}},previous:previousWww},iT={tokenize:function(h,g,E){let _=this,A="",b=!1;return function(g){return(72===g||104===g)&&previousProtocol.call(_,_.previous)&&!previousUnbalanced(_.events)?(h.enter("literalAutolink"),h.enter("literalAutolinkHttp"),A+=String.fromCodePoint(g),h.consume(g),protocolPrefixInside):E(g)};function protocolPrefixInside(g){if(r3(g)&&A.length<5)return A+=String.fromCodePoint(g),h.consume(g),protocolPrefixInside;if(58===g){let E=A.toLowerCase();if("http"===E||"https"===E)return h.consume(g),protocolSlashesInside}return E(g)}function protocolSlashesInside(g){return 47===g?(h.consume(g),b)?afterProtocol:(b=!0,protocolSlashesInside):E(g)}function afterProtocol(g){return null===g||asciiControl(g)||markdownLineEndingOrSpace(g)||ie(g)||r7(g)?E(g):h.attempt(ip,h.attempt(ih,protocolAfter),E)(g)}function protocolAfter(E){return h.exit("literalAutolinkHttp"),h.exit("literalAutolink"),g(E)}},previous:previousProtocol},i_={tokenize:function(h,g,E){let _,A;let b=this;return function(g){return!gfmAtext(g)||!previousEmail.call(b,b.previous)||previousUnbalanced(b.events)?E(g):(h.enter("literalAutolink"),h.enter("literalAutolinkEmail"),function atext(g){return gfmAtext(g)?(h.consume(g),atext):64===g?(h.consume(g),emailDomain):E(g)}(g))};function emailDomain(g){return 46===g?h.check(ig,emailDomainAfter,emailDomainDot)(g):45===g||95===g||r4(g)?(A=!0,h.consume(g),emailDomain):emailDomainAfter(g)}function emailDomainDot(g){return h.consume(g),_=!0,emailDomain}function emailDomainAfter(C){return A&&_&&r3(b.previous)?(h.exit("literalAutolinkEmail"),h.exit("literalAutolink"),g(C)):E(C)}},previous:previousEmail},iA={},iy=48;for(;iy<123;)iA[iy]=i_,58==++iy?iy=65:91===iy&&(iy=97);function previousWww(h){return null===h||40===h||42===h||95===h||91===h||93===h||126===h||markdownLineEndingOrSpace(h)}function previousProtocol(h){return!r3(h)}function previousEmail(h){return!(47===h||gfmAtext(h))}function gfmAtext(h){return 43===h||45===h||46===h||95===h||r4(h)}function previousUnbalanced(h){let g=h.length,E=!1;for(;g--;){let _=h[g][1];if(("labelLink"===_.type||"labelImage"===_.type)&&!_._balanced){E=!0;break}if(_._gfmAutolinkLiteralWalkedInto){E=!1;break}}return h.length>0&&!E&&(h[h.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),E}function factorySpace(h,g,E,_){let A=_?_-1:Number.POSITIVE_INFINITY,b=0;return function(_){return markdownSpace(_)?(h.enter(E),function prefix(_){return markdownSpace(_)&&b++<A?(h.consume(_),prefix):(h.exit(E),g(_))}(_)):g(_)}}iA[43]=i_,iA[45]=i_,iA[46]=i_,iA[95]=i_,iA[72]=[i_,iT],iA[104]=[i_,iT],iA[87]=[i_,iE],iA[119]=[i_,iE];let iv={tokenize:function(h,g,E){return function(g){return markdownSpace(g)?factorySpace(h,after,"linePrefix")(g):after(g)};function after(h){return null===h||markdownLineEnding(h)?g(h):E(h)}},partial:!0},ib={tokenize:function(h,g,E){let _=this;return factorySpace(h,function(h){let A=_.events[_.events.length-1];return A&&"gfmFootnoteDefinitionIndent"===A[1].type&&4===A[2].sliceSerialize(A[1],!0).length?g(h):E(h)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function tokenizePotentialGfmFootnoteCall(h,g,E){let _;let A=this,b=A.events.length,C=A.parser.gfmFootnotes||(A.parser.gfmFootnotes=[]);for(;b--;){let h=A.events[b][1];if("labelImage"===h.type){_=h;break}if("gfmFootnoteCall"===h.type||"labelLink"===h.type||"label"===h.type||"image"===h.type||"link"===h.type)break}return function(b){if(!_||!_._balanced)return E(b);let k=normalizeIdentifier(A.sliceSerialize({start:_.end,end:A.now()}));return 94===k.codePointAt(0)&&C.includes(k.slice(1))?(h.enter("gfmFootnoteCallLabelMarker"),h.consume(b),h.exit("gfmFootnoteCallLabelMarker"),g(b)):E(b)}}function resolveToPotentialGfmFootnoteCall(h,g){let E=h.length;for(;E--;)if("labelImage"===h[E][1].type&&"enter"===h[E][0]){h[E][1];break}h[E+1][1].type="data",h[E+3][1].type="gfmFootnoteCallLabelMarker";let _={type:"gfmFootnoteCall",start:Object.assign({},h[E+3][1].start),end:Object.assign({},h[h.length-1][1].end)},A={type:"gfmFootnoteCallMarker",start:Object.assign({},h[E+3][1].end),end:Object.assign({},h[E+3][1].end)};A.end.column++,A.end.offset++,A.end._bufferIndex++;let b={type:"gfmFootnoteCallString",start:Object.assign({},A.end),end:Object.assign({},h[h.length-1][1].start)},C={type:"chunkString",contentType:"string",start:Object.assign({},b.start),end:Object.assign({},b.end)},k=[h[E+1],h[E+2],["enter",_,g],h[E+3],h[E+4],["enter",A,g],["exit",A,g],["enter",b,g],["enter",C,g],["exit",C,g],["exit",b,g],h[h.length-2],h[h.length-1],["exit",_,g]];return h.splice(E,h.length-E+1,...k),h}function tokenizeGfmFootnoteCall(h,g,E){let _;let A=this,b=A.parser.gfmFootnotes||(A.parser.gfmFootnotes=[]),C=0;return function(g){return h.enter("gfmFootnoteCall"),h.enter("gfmFootnoteCallLabelMarker"),h.consume(g),h.exit("gfmFootnoteCallLabelMarker"),callStart};function callStart(g){return 94!==g?E(g):(h.enter("gfmFootnoteCallMarker"),h.consume(g),h.exit("gfmFootnoteCallMarker"),h.enter("gfmFootnoteCallString"),h.enter("chunkString").contentType="string",callData)}function callData(k){if(C>999||93===k&&!_||null===k||91===k||markdownLineEndingOrSpace(k))return E(k);if(93===k){h.exit("chunkString");let _=h.exit("gfmFootnoteCallString");return b.includes(normalizeIdentifier(A.sliceSerialize(_)))?(h.enter("gfmFootnoteCallLabelMarker"),h.consume(k),h.exit("gfmFootnoteCallLabelMarker"),h.exit("gfmFootnoteCall"),g):E(k)}return markdownLineEndingOrSpace(k)||(_=!0),C++,h.consume(k),92===k?callEscape:callData}function callEscape(g){return 91===g||92===g||93===g?(h.consume(g),C++,callData):callData(g)}}function tokenizeDefinitionStart(h,g,E){let _,A;let b=this,C=b.parser.gfmFootnotes||(b.parser.gfmFootnotes=[]),k=0;return function(g){return h.enter("gfmFootnoteDefinition")._container=!0,h.enter("gfmFootnoteDefinitionLabel"),h.enter("gfmFootnoteDefinitionLabelMarker"),h.consume(g),h.exit("gfmFootnoteDefinitionLabelMarker"),labelAtMarker};function labelAtMarker(g){return 94===g?(h.enter("gfmFootnoteDefinitionMarker"),h.consume(g),h.exit("gfmFootnoteDefinitionMarker"),h.enter("gfmFootnoteDefinitionLabelString"),h.enter("chunkString").contentType="string",labelInside):E(g)}function labelInside(g){if(k>999||93===g&&!A||null===g||91===g||markdownLineEndingOrSpace(g))return E(g);if(93===g){h.exit("chunkString");let E=h.exit("gfmFootnoteDefinitionLabelString");return _=normalizeIdentifier(b.sliceSerialize(E)),h.enter("gfmFootnoteDefinitionLabelMarker"),h.consume(g),h.exit("gfmFootnoteDefinitionLabelMarker"),h.exit("gfmFootnoteDefinitionLabel"),labelAfter}return markdownLineEndingOrSpace(g)||(A=!0),k++,h.consume(g),92===g?labelEscape:labelInside}function labelEscape(g){return 91===g||92===g||93===g?(h.consume(g),k++,labelInside):labelInside(g)}function labelAfter(g){return 58===g?(h.enter("definitionMarker"),h.consume(g),h.exit("definitionMarker"),C.includes(_)||C.push(_),factorySpace(h,whitespaceAfter,"gfmFootnoteDefinitionWhitespace")):E(g)}function whitespaceAfter(h){return g(h)}}function tokenizeDefinitionContinuation(h,g,E){return h.check(iv,g,h.attempt(ib,g,E))}function gfmFootnoteDefinitionEnd(h){h.exit("gfmFootnoteDefinition")}function classifyCharacter(h){return null===h||markdownLineEndingOrSpace(h)||ie(h)?1:r7(h)?2:void 0}function resolveAll(h,g,E){let _=[],A=-1;for(;++A<h.length;){let b=h[A].resolveAll;b&&!_.includes(b)&&(g=b(g,E),_.push(b))}return g}let EditMap=class EditMap{constructor(){this.map=[]}add(h,g,E){!function(h,g,E,_){let A=0;if(0!==E||0!==_.length){for(;A<h.map.length;){if(h.map[A][0]===g){h.map[A][1]+=E,h.map[A][2].push(..._);return}A+=1}h.map.push([g,E,_])}}(this,h,g,E)}consume(h){if(this.map.sort(function(h,g){return h[0]-g[0]}),0===this.map.length)return;let g=this.map.length,E=[];for(;g>0;)g-=1,E.push(h.slice(this.map[g][0]+this.map[g][1]),this.map[g][2]),h.length=this.map[g][0];E.push([...h]),h.length=0;let _=E.pop();for(;_;)h.push(..._),_=E.pop();this.map.length=0}};function tokenizeTable(h,g,E){let _;let A=this,b=0,C=0;return function(h){let g=A.events.length-1;for(;g>-1;){let h=A.events[g][1].type;if("lineEnding"===h||"linePrefix"===h)g--;else break}let _=g>-1?A.events[g][1].type:null,b="tableHead"===_||"tableRow"===_?bodyRowStart:headRowBefore;return b===bodyRowStart&&A.parser.lazy[A.now().line]?E(h):b(h)};function headRowBefore(g){return h.enter("tableHead"),h.enter("tableRow"),124===g||(_=!0,C+=1),headRowBreak(g)}function headRowBreak(g){return null===g?E(g):markdownLineEnding(g)?C>1?(C=0,A.interrupt=!0,h.exit("tableRow"),h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),headDelimiterStart):E(g):markdownSpace(g)?factorySpace(h,headRowBreak,"whitespace")(g):(C+=1,_&&(_=!1,b+=1),124===g)?(h.enter("tableCellDivider"),h.consume(g),h.exit("tableCellDivider"),_=!0,headRowBreak):(h.enter("data"),headRowData(g))}function headRowData(g){return null===g||124===g||markdownLineEndingOrSpace(g)?(h.exit("data"),headRowBreak(g)):(h.consume(g),92===g?headRowEscape:headRowData)}function headRowEscape(g){return 92===g||124===g?(h.consume(g),headRowData):headRowData(g)}function headDelimiterStart(g){return(A.interrupt=!1,A.parser.lazy[A.now().line])?E(g):(h.enter("tableDelimiterRow"),_=!1,markdownSpace(g))?factorySpace(h,headDelimiterBefore,"linePrefix",A.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):headDelimiterBefore(g)}function headDelimiterBefore(g){return 45===g||58===g?headDelimiterValueBefore(g):124===g?(_=!0,h.enter("tableCellDivider"),h.consume(g),h.exit("tableCellDivider"),headDelimiterCellBefore):E(g)}function headDelimiterCellBefore(g){return markdownSpace(g)?factorySpace(h,headDelimiterValueBefore,"whitespace")(g):headDelimiterValueBefore(g)}function headDelimiterValueBefore(g){return 58===g?(C+=1,_=!0,h.enter("tableDelimiterMarker"),h.consume(g),h.exit("tableDelimiterMarker"),headDelimiterLeftAlignmentAfter):45===g?(C+=1,headDelimiterLeftAlignmentAfter(g)):null===g||markdownLineEnding(g)?headDelimiterCellAfter(g):E(g)}function headDelimiterLeftAlignmentAfter(g){return 45===g?(h.enter("tableDelimiterFiller"),function headDelimiterFiller(g){return 45===g?(h.consume(g),headDelimiterFiller):58===g?(_=!0,h.exit("tableDelimiterFiller"),h.enter("tableDelimiterMarker"),h.consume(g),h.exit("tableDelimiterMarker"),headDelimiterRightAlignmentAfter):(h.exit("tableDelimiterFiller"),headDelimiterRightAlignmentAfter(g))}(g)):E(g)}function headDelimiterRightAlignmentAfter(g){return markdownSpace(g)?factorySpace(h,headDelimiterCellAfter,"whitespace")(g):headDelimiterCellAfter(g)}function headDelimiterCellAfter(A){return 124===A?headDelimiterBefore(A):null===A||markdownLineEnding(A)?_&&b===C?(h.exit("tableDelimiterRow"),h.exit("tableHead"),g(A)):E(A):E(A)}function bodyRowStart(g){return h.enter("tableRow"),bodyRowBreak(g)}function bodyRowBreak(E){return 124===E?(h.enter("tableCellDivider"),h.consume(E),h.exit("tableCellDivider"),bodyRowBreak):null===E||markdownLineEnding(E)?(h.exit("tableRow"),g(E)):markdownSpace(E)?factorySpace(h,bodyRowBreak,"whitespace")(E):(h.enter("data"),bodyRowData(E))}function bodyRowData(g){return null===g||124===g||markdownLineEndingOrSpace(g)?(h.exit("data"),bodyRowBreak(g)):(h.consume(g),92===g?bodyRowEscape:bodyRowData)}function bodyRowEscape(g){return 92===g||124===g?(h.consume(g),bodyRowData):bodyRowData(g)}}function resolveTable(h,g){let E,_,A,b=-1,C=!0,k=0,S=[0,0,0,0],N=[0,0,0,0],w=!1,R=0,L=new EditMap;for(;++b<h.length;){let P=h[b],z=P[1];"enter"===P[0]?"tableHead"===z.type?(w=!1,0!==R&&(flushTableEnd(L,g,R,E,_),_=void 0,R=0),E={type:"table",start:Object.assign({},z.start),end:Object.assign({},z.end)},L.add(b,0,[["enter",E,g]])):"tableRow"===z.type||"tableDelimiterRow"===z.type?(C=!0,A=void 0,S=[0,0,0,0],N=[0,b+1,0,0],w&&(w=!1,_={type:"tableBody",start:Object.assign({},z.start),end:Object.assign({},z.end)},L.add(b,0,[["enter",_,g]])),k="tableDelimiterRow"===z.type?2:_?3:1):k&&("data"===z.type||"tableDelimiterMarker"===z.type||"tableDelimiterFiller"===z.type)?(C=!1,0===N[2]&&(0!==S[1]&&(N[0]=N[1],A=flushCell(L,g,S,k,void 0,A),S=[0,0,0,0]),N[2]=b)):"tableCellDivider"===z.type&&(C?C=!1:(0!==S[1]&&(N[0]=N[1],A=flushCell(L,g,S,k,void 0,A)),N=[(S=N)[1],b,0,0])):"tableHead"===z.type?(w=!0,R=b):"tableRow"===z.type||"tableDelimiterRow"===z.type?(R=b,0!==S[1]?(N[0]=N[1],A=flushCell(L,g,S,k,b,A)):0!==N[1]&&(A=flushCell(L,g,N,k,b,A)),k=0):k&&("data"===z.type||"tableDelimiterMarker"===z.type||"tableDelimiterFiller"===z.type)&&(N[3]=b)}for(0!==R&&flushTableEnd(L,g,R,E,_),L.consume(g.events),b=-1;++b<g.events.length;){let h=g.events[b];"enter"===h[0]&&"table"===h[1].type&&(h[1]._align=function(h,g){let E=!1,_=[];for(;g<h.length;){let A=h[g];if(E){if("enter"===A[0])"tableContent"===A[1].type&&_.push("tableDelimiterMarker"===h[g+1][1].type?"left":"none");else if("tableContent"===A[1].type){if("tableDelimiterMarker"===h[g-1][1].type){let h=_.length-1;_[h]="left"===_[h]?"center":"right"}}else if("tableDelimiterRow"===A[1].type)break}else"enter"===A[0]&&"tableDelimiterRow"===A[1].type&&(E=!0);g+=1}return _}(g.events,b))}return h}function flushCell(h,g,E,_,A,b){0!==E[0]&&(b.end=Object.assign({},getPoint(g.events,E[0])),h.add(E[0],0,[["exit",b,g]]));let C=getPoint(g.events,E[1]);if(b={type:1===_?"tableHeader":2===_?"tableDelimiter":"tableData",start:Object.assign({},C),end:Object.assign({},C)},h.add(E[1],0,[["enter",b,g]]),0!==E[2]){let A=getPoint(g.events,E[2]),b=getPoint(g.events,E[3]),C={type:"tableContent",start:Object.assign({},A),end:Object.assign({},b)};if(h.add(E[2],0,[["enter",C,g]]),2!==_){let _=g.events[E[2]],A=g.events[E[3]];if(_[1].end=Object.assign({},A[1].end),_[1].type="chunkText",_[1].contentType="text",E[3]>E[2]+1){let g=E[2]+1,_=E[3]-E[2]-1;h.add(g,_,[])}}h.add(E[3]+1,0,[["exit",C,g]])}return void 0!==A&&(b.end=Object.assign({},getPoint(g.events,A)),h.add(A,0,[["exit",b,g]]),b=void 0),b}function flushTableEnd(h,g,E,_,A){let b=[],C=getPoint(g.events,E);A&&(A.end=Object.assign({},C),b.push(["exit",A,g])),_.end=Object.assign({},C),b.push(["exit",_,g]),h.add(E+1,0,b)}function getPoint(h,g){let E=h[g],_="enter"===E[0]?"start":"end";return E[1][_]}let ix={tokenize:function(h,g,E){let _=this;return function(g){return null===_.previous&&_._gfmTasklistFirstContentOfListItem?(h.enter("taskListCheck"),h.enter("taskListCheckMarker"),h.consume(g),h.exit("taskListCheckMarker"),inside):E(g)};function inside(g){return markdownLineEndingOrSpace(g)?(h.enter("taskListCheckValueUnchecked"),h.consume(g),h.exit("taskListCheckValueUnchecked"),close):88===g||120===g?(h.enter("taskListCheckValueChecked"),h.consume(g),h.exit("taskListCheckValueChecked"),close):E(g)}function close(g){return 93===g?(h.enter("taskListCheckMarker"),h.consume(g),h.exit("taskListCheckMarker"),h.exit("taskListCheck"),after):E(g)}function after(_){return markdownLineEnding(_)?g(_):markdownSpace(_)?h.check({tokenize:spaceThenNonSpace},g,E)(_):E(_)}}};function spaceThenNonSpace(h,g,E){return factorySpace(h,function(h){return null===h?E(h):g(h)},"whitespace")}let iC={};function remarkGfm(h){let g=h||iC,E=this.data(),_=E.micromarkExtensions||(E.micromarkExtensions=[]),A=E.fromMarkdownExtensions||(E.fromMarkdownExtensions=[]),b=E.toMarkdownExtensions||(E.toMarkdownExtensions=[]);_.push(combineExtensions([{text:iA},{document:{91:{tokenize:tokenizeDefinitionStart,continuation:{tokenize:tokenizeDefinitionContinuation},exit:gfmFootnoteDefinitionEnd}},text:{91:{tokenize:tokenizeGfmFootnoteCall},93:{add:"after",tokenize:tokenizePotentialGfmFootnoteCall,resolveTo:resolveToPotentialGfmFootnoteCall}}},function(h){let g=(h||{}).singleTilde,E={tokenize:function(h,E,_){let A=this.previous,b=this.events,C=0;return function(k){return 126===A&&"characterEscape"!==b[b.length-1][1].type?_(k):(h.enter("strikethroughSequenceTemporary"),function more(b){let k=classifyCharacter(A);if(126===b)return C>1?_(b):(h.consume(b),C++,more);if(C<2&&!g)return _(b);let S=h.exit("strikethroughSequenceTemporary"),N=classifyCharacter(b);return S._open=!N||2===N&&!!k,S._close=!k||2===k&&!!N,E(b)}(k))}},resolveAll:function(h,g){let E=-1;for(;++E<h.length;)if("enter"===h[E][0]&&"strikethroughSequenceTemporary"===h[E][1].type&&h[E][1]._close){let _=E;for(;_--;)if("exit"===h[_][0]&&"strikethroughSequenceTemporary"===h[_][1].type&&h[_][1]._open&&h[E][1].end.offset-h[E][1].start.offset==h[_][1].end.offset-h[_][1].start.offset){h[E][1].type="strikethroughSequence",h[_][1].type="strikethroughSequence";let A={type:"strikethrough",start:Object.assign({},h[_][1].start),end:Object.assign({},h[E][1].end)},b={type:"strikethroughText",start:Object.assign({},h[_][1].end),end:Object.assign({},h[E][1].start)},C=[["enter",A,g],["enter",h[_][1],g],["exit",h[_][1],g],["enter",b,g]],k=g.parser.constructs.insideSpan.null;k&&splice(C,C.length,0,resolveAll(k,h.slice(_+1,E),g)),splice(C,C.length,0,[["exit",b,g],["enter",h[E][1],g],["exit",h[E][1],g],["exit",A,g]]),splice(h,_-1,E-_+3,C),E=_+C.length-2;break}}for(E=-1;++E<h.length;)"strikethroughSequenceTemporary"===h[E][1].type&&(h[E][1].type="data");return h}};return null==g&&(g=!0),{text:{126:E},insideSpan:{null:[E]},attentionMarkers:{null:[126]}}}(g),{flow:{null:{tokenize:tokenizeTable,resolveAll:resolveTable}}},{text:{91:ix}}])),A.push([{transforms:[transformGfmAutolinkLiterals],enter:{literalAutolink:enterLiteralAutolink,literalAutolinkEmail:enterLiteralAutolinkValue,literalAutolinkHttp:enterLiteralAutolinkValue,literalAutolinkWww:enterLiteralAutolinkValue},exit:{literalAutolink:exitLiteralAutolink,literalAutolinkEmail:exitLiteralAutolinkEmail,literalAutolinkHttp:exitLiteralAutolinkHttp,literalAutolinkWww:exitLiteralAutolinkWww}},{enter:{gfmFootnoteDefinition:enterFootnoteDefinition,gfmFootnoteDefinitionLabelString:enterFootnoteDefinitionLabelString,gfmFootnoteCall:enterFootnoteCall,gfmFootnoteCallString:enterFootnoteCallString},exit:{gfmFootnoteDefinition:exitFootnoteDefinition,gfmFootnoteDefinitionLabelString:exitFootnoteDefinitionLabelString,gfmFootnoteCall:exitFootnoteCall,gfmFootnoteCallString:exitFootnoteCallString}},{canContainEols:["delete"],enter:{strikethrough:enterStrikethrough},exit:{strikethrough:exitStrikethrough}},{enter:{table:enterTable,tableData:enterCell,tableHeader:enterCell,tableRow:enterRow},exit:{codeText:exitCodeText,table:exitTable,tableData:exit,tableHeader:exit,tableRow:exit}},{exit:{taskListCheckValueChecked:exitCheck,taskListCheckValueUnchecked:exitCheck,paragraph:exitParagraphWithTaskListItem}}]),b.push({extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:ir,notInConstruct:ii},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:ir,notInConstruct:ii},{character:":",before:"[ps]",after:"\\/",inConstruct:ir,notInConstruct:ii}]},{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition,footnoteReference}},{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:io}],handlers:{delete:handleDelete}},function(h){let g=h||{},E=g.tableCellPadding,_=g.tablePipeAlign,A=g.stringLength,b=E?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(h,g,E){let _=ic.inlineCode(h,g,E);return E.stack.includes("tableCell")&&(_=_.replace(/\|/g,"\\$&")),_},table:function(h,g,E,_){return serializeData(function(h,g,E){let _=h.children,A=-1,b=[],C=g.enter("table");for(;++A<_.length;)b[A]=handleTableRowAsData(_[A],g,E);return C(),b}(h,E,_),h.align)},tableCell:handleTableCell,tableRow:function(h,g,E,_){let A=handleTableRowAsData(h,E,_),b=serializeData([A]);return b.slice(0,b.indexOf("\n"))}}};function handleTableCell(h,g,E,_){let A=E.enter("tableCell"),C=E.enter("phrasing"),k=E.containerPhrasing(h,{..._,before:b,after:b});return C(),A(),k}function serializeData(h,g){return function(h,g={}){let E=(g.align||[]).concat(),_=g.stringLength||defaultStringLength,A=[],b=[],C=[],k=[],S=0,N=-1;for(;++N<h.length;){let E=[],A=[],R=-1;for(h[N].length>S&&(S=h[N].length);++R<h[N].length;){var w;let b=null==(w=h[N][R])?"":String(w);if(!1!==g.alignDelimiters){let h=_(b);A[R]=h,(void 0===k[R]||h>k[R])&&(k[R]=h)}E.push(b)}b[N]=E,C[N]=A}let R=-1;if("object"==typeof E&&"length"in E)for(;++R<S;)A[R]=toAlignment(E[R]);else{let h=toAlignment(E);for(;++R<S;)A[R]=h}R=-1;let L=[],P=[];for(;++R<S;){let h=A[R],E="",_="";99===h?(E=":",_=":"):108===h?E=":":114===h&&(_=":");let b=!1===g.alignDelimiters?1:Math.max(1,k[R]-E.length-_.length),C=E+"-".repeat(b)+_;!1!==g.alignDelimiters&&((b=E.length+b+_.length)>k[R]&&(k[R]=b),P[R]=b),L[R]=C}b.splice(1,0,L),C.splice(1,0,P),N=-1;let z=[];for(;++N<b.length;){let h=b[N],E=C[N];R=-1;let _=[];for(;++R<S;){let b=h[R]||"",C="",N="";if(!1!==g.alignDelimiters){let h=k[R]-(E[R]||0),g=A[R];114===g?C=" ".repeat(h):99===g?h%2?(C=" ".repeat(h/2+.5),N=" ".repeat(h/2-.5)):N=C=" ".repeat(h/2):N=" ".repeat(h)}!1===g.delimiterStart||R||_.push("|"),!1!==g.padding&&!(!1===g.alignDelimiters&&""===b)&&(!1!==g.delimiterStart||R)&&_.push(" "),!1!==g.alignDelimiters&&_.push(C),_.push(b),!1!==g.alignDelimiters&&_.push(N),!1!==g.padding&&_.push(" "),(!1!==g.delimiterEnd||R!==S-1)&&_.push("|")}z.push(!1===g.delimiterEnd?_.join("").replace(/ +$/,""):_.join(""))}return z.join("\n")}(h,{align:g,alignDelimiters:_,padding:E,stringLength:A})}function handleTableRowAsData(h,g,E){let _=h.children,A=-1,b=[],C=g.enter("tableRow");for(;++A<_.length;)b[A]=handleTableCell(_[A],h,g,E);return C(),b}}(g),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:listItemWithTaskListItem}}]})}let SpliceBuffer=class SpliceBuffer{constructor(h){this.left=h?[...h]:[],this.right=[]}get(h){if(h<0||h>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+h+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return h<this.left.length?this.left[h]:this.right[this.right.length-h+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(h,g){let E=null==g?Number.POSITIVE_INFINITY:g;return E<this.left.length?this.left.slice(h,E):h>this.left.length?this.right.slice(this.right.length-E+this.left.length,this.right.length-h+this.left.length).reverse():this.left.slice(h).concat(this.right.slice(this.right.length-E+this.left.length).reverse())}splice(h,g,E){let _=g||0;this.setCursor(Math.trunc(h));let A=this.right.splice(this.right.length-_,Number.POSITIVE_INFINITY);return E&&chunkedPush(this.left,E),A.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(h){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(h)}pushMany(h){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,h)}unshift(h){this.setCursor(0),this.right.push(h)}unshiftMany(h){this.setCursor(0),chunkedPush(this.right,h.reverse())}setCursor(h){if(h!==this.left.length&&(!(h>this.left.length)||0!==this.right.length)&&(!(h<0)||0!==this.left.length)){if(h<this.left.length){let g=this.left.splice(h,Number.POSITIVE_INFINITY);chunkedPush(this.right,g.reverse())}else{let g=this.right.splice(this.left.length+this.right.length-h,Number.POSITIVE_INFINITY);chunkedPush(this.left,g.reverse())}}}};function chunkedPush(h,g){let E=0;if(g.length<1e4)h.push(...g);else for(;E<g.length;)h.push(...g.slice(E,E+1e4)),E+=1e4}function subtokenize(h){let g,E,_,A,b,C,k;let S={},N=-1,w=new SpliceBuffer(h);for(;++N<w.length;){for(;(N in S);)N=S[N];if(g=w.get(N),N&&"chunkFlow"===g[1].type&&"listItemPrefix"===w.get(N-1)[1].type&&((_=0)<(C=g[1]._tokenizer.events).length&&"lineEndingBlank"===C[_][1].type&&(_+=2),_<C.length&&"content"===C[_][1].type))for(;++_<C.length&&"content"!==C[_][1].type;)"chunkText"===C[_][1].type&&(C[_][1]._isInFirstContentOfListItem=!0,_++);if("enter"===g[0])g[1].contentType&&(Object.assign(S,function(h,g){let E,_;let A=h.get(g)[1],b=h.get(g)[2],C=g-1,k=[],S=A._tokenizer||b.parser[A.contentType](A.start),N=S.events,w=[],R={},L=-1,P=A,z=0,G=0,$=[G];for(;P;){for(;h.get(++C)[1]!==P;);k.push(C),!P._tokenizer&&(E=b.sliceStream(P),P.next||E.push(null),_&&S.defineSkip(P.start),P._isInFirstContentOfListItem&&(S._gfmTasklistFirstContentOfListItem=!0),S.write(E),P._isInFirstContentOfListItem&&(S._gfmTasklistFirstContentOfListItem=void 0)),_=P,P=P.next}for(P=A;++L<N.length;)"exit"===N[L][0]&&"enter"===N[L-1][0]&&N[L][1].type===N[L-1][1].type&&N[L][1].start.line!==N[L][1].end.line&&(G=L+1,$.push(G),P._tokenizer=void 0,P.previous=void 0,P=P.next);for(S.events=[],P?(P._tokenizer=void 0,P.previous=void 0):$.pop(),L=$.length;L--;){let g=N.slice($[L],$[L+1]),E=k.pop();w.push([E,E+g.length-1]),h.splice(E,2,g)}for(w.reverse(),L=-1;++L<w.length;)R[z+w[L][0]]=z+w[L][1],z+=w[L][1]-w[L][0]-1;return R}(w,N)),N=S[N],k=!0);else if(g[1]._container){for(_=N,E=void 0;_--;)if("lineEnding"===(A=w.get(_))[1].type||"lineEndingBlank"===A[1].type)"enter"===A[0]&&(E&&(w.get(E)[1].type="lineEndingBlank"),A[1].type="lineEnding",E=_);else break;E&&(g[1].end=Object.assign({},w.get(E)[1].start),(b=w.slice(E,N)).unshift(g),w.splice(E,N-E+1,b))}}return splice(h,0,Number.POSITIVE_INFINITY,w.slice(0)),!k}let iI={tokenize:function(h){let g;let E=h.attempt(this.parser.constructs.contentInitial,function(g){if(null===g){h.consume(g);return}return h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),factorySpace(h,E,"linePrefix")},function(E){return h.enter("paragraph"),function lineStart(E){let _=h.enter("chunkText",{contentType:"text",previous:g});return g&&(g.next=_),g=_,function data(g){if(null===g){h.exit("chunkText"),h.exit("paragraph"),h.consume(g);return}return markdownLineEnding(g)?(h.consume(g),h.exit("chunkText"),lineStart):(h.consume(g),data)}(E)}(E)});return E}},ik={tokenize:function(h){let g,E,_;let A=this,b=[],C=0;return start;function start(g){if(C<b.length){let E=b[C];return A.containerState=E[1],h.attempt(E[0].continuation,documentContinue,checkNewContainers)(g)}return checkNewContainers(g)}function documentContinue(h){if(C++,A.containerState._closeFlow){let E;A.containerState._closeFlow=void 0,g&&closeFlow();let _=A.events.length,b=_;for(;b--;)if("exit"===A.events[b][0]&&"chunkFlow"===A.events[b][1].type){E=A.events[b][1].end;break}exitContainers(C);let k=_;for(;k<A.events.length;)A.events[k][1].end=Object.assign({},E),k++;return splice(A.events,b+1,0,A.events.slice(_)),A.events.length=k,checkNewContainers(h)}return start(h)}function checkNewContainers(E){if(C===b.length){if(!g)return documentContinued(E);if(g.currentConstruct&&g.currentConstruct.concrete)return flowStart(E);A.interrupt=!!(g.currentConstruct&&!g._gfmTableDynamicInterruptHack)}return A.containerState={},h.check(iS,thereIsANewContainer,thereIsNoNewContainer)(E)}function thereIsANewContainer(h){return g&&closeFlow(),exitContainers(C),documentContinued(h)}function thereIsNoNewContainer(h){return A.parser.lazy[A.now().line]=C!==b.length,_=A.now().offset,flowStart(h)}function documentContinued(g){return A.containerState={},h.attempt(iS,containerContinue,flowStart)(g)}function containerContinue(h){return C++,b.push([A.currentConstruct,A.containerState]),documentContinued(h)}function flowStart(_){if(null===_){g&&closeFlow(),exitContainers(0),h.consume(_);return}return g=g||A.parser.flow(A.now()),h.enter("chunkFlow",{contentType:"flow",previous:E,_tokenizer:g}),function flowContinue(g){if(null===g){writeToChild(h.exit("chunkFlow"),!0),exitContainers(0),h.consume(g);return}return markdownLineEnding(g)?(h.consume(g),writeToChild(h.exit("chunkFlow")),C=0,A.interrupt=void 0,start):(h.consume(g),flowContinue)}(_)}function writeToChild(h,b){let k=A.sliceStream(h);if(b&&k.push(null),h.previous=E,E&&(E.next=h),E=h,g.defineSkip(h.start),g.write(k),A.parser.lazy[h.start.line]){let h,E,b=g.events.length;for(;b--;)if(g.events[b][1].start.offset<_&&(!g.events[b][1].end||g.events[b][1].end.offset>_))return;let k=A.events.length,S=k;for(;S--;)if("exit"===A.events[S][0]&&"chunkFlow"===A.events[S][1].type){if(h){E=A.events[S][1].end;break}h=!0}for(exitContainers(C),b=k;b<A.events.length;)A.events[b][1].end=Object.assign({},E),b++;splice(A.events,S+1,0,A.events.slice(k)),A.events.length=b}}function exitContainers(g){let E=b.length;for(;E-- >g;){let g=b[E];A.containerState=g[1],g[0].exit.call(A,h)}b.length=g}function closeFlow(){g.write([null]),E=void 0,g=void 0,A.containerState._closeFlow=void 0}}},iS={tokenize:function(h,g,E){return factorySpace(h,h.attempt(this.parser.constructs.document,g,E),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},iN={tokenize:function(h,g){let E;return function(g){return h.enter("content"),E=h.enter("chunkContent",{contentType:"content"}),chunkInside(g)};function chunkInside(g){return null===g?contentEnd(g):markdownLineEnding(g)?h.check(iw,contentContinue,contentEnd)(g):(h.consume(g),chunkInside)}function contentEnd(E){return h.exit("chunkContent"),h.exit("content"),g(E)}function contentContinue(g){return h.consume(g),h.exit("chunkContent"),E.next=h.enter("chunkContent",{contentType:"content",previous:E}),E=E.next,chunkInside}},resolve:function(h){return subtokenize(h),h}},iw={tokenize:function(h,g,E){let _=this;return function(g){return h.exit("chunkContent"),h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),factorySpace(h,prefixed,"linePrefix")};function prefixed(A){if(null===A||markdownLineEnding(A))return E(A);let b=_.events[_.events.length-1];return!_.parser.constructs.disable.null.includes("codeIndented")&&b&&"linePrefix"===b[1].type&&b[2].sliceSerialize(b[1],!0).length>=4?g(A):h.interrupt(_.parser.constructs.flow,E,g)(A)}},partial:!0},iO={tokenize:function(h){let g=this,E=h.attempt(iv,function(_){if(null===_){h.consume(_);return}return h.enter("lineEndingBlank"),h.consume(_),h.exit("lineEndingBlank"),g.currentConstruct=void 0,E},h.attempt(this.parser.constructs.flowInitial,afterConstruct,factorySpace(h,h.attempt(this.parser.constructs.flow,afterConstruct,h.attempt(iN,afterConstruct)),"linePrefix")));return E;function afterConstruct(_){if(null===_){h.consume(_);return}return h.enter("lineEnding"),h.consume(_),h.exit("lineEnding"),g.currentConstruct=void 0,E}}},iR={resolveAll:createResolver()},iD=initializeFactory("string"),iL=initializeFactory("text");function initializeFactory(h){return{tokenize:function(g){let E=this,_=this.parser.constructs[h],A=g.attempt(_,start,notText);return start;function start(h){return atBreak(h)?A(h):notText(h)}function notText(h){if(null===h){g.consume(h);return}return g.enter("data"),g.consume(h),data}function data(h){return atBreak(h)?(g.exit("data"),A(h)):(g.consume(h),data)}function atBreak(h){if(null===h)return!0;let g=_[h],A=-1;if(g)for(;++A<g.length;){let h=g[A];if(!h.previous||h.previous.call(E,E.previous))return!0}return!1}},resolveAll:createResolver("text"===h?resolveAllLineSuffixes:void 0)}}function createResolver(h){return function(g,E){let _,A=-1;for(;++A<=g.length;)void 0===_?g[A]&&"data"===g[A][1].type&&(_=A,A++):g[A]&&"data"===g[A][1].type||(A!==_+2&&(g[_][1].end=g[A-1][1].end,g.splice(_+2,A-_-2),A=_+2),_=void 0);return h?h(g,E):g}}function resolveAllLineSuffixes(h,g){let E=0;for(;++E<=h.length;)if((E===h.length||"lineEnding"===h[E][1].type)&&"data"===h[E-1][1].type){let _;let A=h[E-1][1],b=g.sliceStream(A),C=b.length,k=-1,S=0;for(;C--;){let h=b[C];if("string"==typeof h){for(k=h.length;32===h.charCodeAt(k-1);)S++,k--;if(k)break;k=-1}else if(-2===h)_=!0,S++;else if(-1===h);else{C++;break}}if(S){let b={type:E===h.length||_||S<2?"lineSuffix":"hardBreakTrailing",start:{line:A.end.line,column:A.end.column-S,offset:A.end.offset-S,_index:A.start._index+C,_bufferIndex:C?k:A.start._bufferIndex+k},end:Object.assign({},A.end)};A.end=Object.assign({},b.start),A.start.offset===A.end.offset?Object.assign(A,b):(h.splice(E,0,["enter",b,g],["exit",b,g]),E+=2)}E++}return h}let iP={name:"thematicBreak",tokenize:function(h,g,E){let _,A=0;return function(b){return h.enter("thematicBreak"),_=b,function atBreak(b){return b===_?(h.enter("thematicBreakSequence"),function sequence(g){return g===_?(h.consume(g),A++,sequence):(h.exit("thematicBreakSequence"),markdownSpace(g)?factorySpace(h,atBreak,"whitespace")(g):atBreak(g))}(b)):A>=3&&(null===b||markdownLineEnding(b))?(h.exit("thematicBreak"),g(b)):E(b)}(b)}}},iM={name:"list",tokenize:function(h,g,E){let _=this,A=_.events[_.events.length-1],b=A&&"linePrefix"===A[1].type?A[2].sliceSerialize(A[1],!0).length:0,C=0;return function(g){let A=_.containerState.type||(42===g||43===g||45===g?"listUnordered":"listOrdered");if("listUnordered"===A?!_.containerState.marker||g===_.containerState.marker:r6(g)){if(_.containerState.type||(_.containerState.type=A,h.enter(A,{_container:!0})),"listUnordered"===A)return h.enter("listItemPrefix"),42===g||45===g?h.check(iP,E,atMarker)(g):atMarker(g);if(!_.interrupt||49===g)return h.enter("listItemPrefix"),h.enter("listItemValue"),function inside(g){return r6(g)&&++C<10?(h.consume(g),inside):(!_.interrupt||C<2)&&(_.containerState.marker?g===_.containerState.marker:41===g||46===g)?(h.exit("listItemValue"),atMarker(g)):E(g)}(g)}return E(g)};function atMarker(g){return h.enter("listItemMarker"),h.consume(g),h.exit("listItemMarker"),_.containerState.marker=_.containerState.marker||g,h.check(iv,_.interrupt?E:onBlank,h.attempt(iF,endOfPrefix,otherPrefix))}function onBlank(h){return _.containerState.initialBlankLine=!0,b++,endOfPrefix(h)}function otherPrefix(g){return markdownSpace(g)?(h.enter("listItemPrefixWhitespace"),h.consume(g),h.exit("listItemPrefixWhitespace"),endOfPrefix):E(g)}function endOfPrefix(E){return _.containerState.size=b+_.sliceSerialize(h.exit("listItemPrefix"),!0).length,g(E)}},continuation:{tokenize:function(h,g,E){let _=this;return _.containerState._closeFlow=void 0,h.check(iv,function(E){return _.containerState.furtherBlankLines=_.containerState.furtherBlankLines||_.containerState.initialBlankLine,factorySpace(h,g,"listItemIndent",_.containerState.size+1)(E)},function(E){return _.containerState.furtherBlankLines||!markdownSpace(E)?(_.containerState.furtherBlankLines=void 0,_.containerState.initialBlankLine=void 0,notInCurrentItem(E)):(_.containerState.furtherBlankLines=void 0,_.containerState.initialBlankLine=void 0,h.attempt(iB,g,notInCurrentItem)(E))});function notInCurrentItem(A){return _.containerState._closeFlow=!0,_.interrupt=void 0,factorySpace(h,h.attempt(iM,g,E),"linePrefix",_.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A)}}},exit:function(h){h.exit(this.containerState.type)}},iF={tokenize:function(h,g,E){let _=this;return factorySpace(h,function(h){let A=_.events[_.events.length-1];return!markdownSpace(h)&&A&&"listItemPrefixWhitespace"===A[1].type?g(h):E(h)},"listItemPrefixWhitespace",_.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},iB={tokenize:function(h,g,E){let _=this;return factorySpace(h,function(h){let A=_.events[_.events.length-1];return A&&"listItemIndent"===A[1].type&&A[2].sliceSerialize(A[1],!0).length===_.containerState.size?g(h):E(h)},"listItemIndent",_.containerState.size+1)},partial:!0},iH={name:"blockQuote",tokenize:function(h,g,E){let _=this;return function(g){if(62===g){let E=_.containerState;return E.open||(h.enter("blockQuote",{_container:!0}),E.open=!0),h.enter("blockQuotePrefix"),h.enter("blockQuoteMarker"),h.consume(g),h.exit("blockQuoteMarker"),after}return E(g)};function after(E){return markdownSpace(E)?(h.enter("blockQuotePrefixWhitespace"),h.consume(E),h.exit("blockQuotePrefixWhitespace"),h.exit("blockQuotePrefix"),g):(h.exit("blockQuotePrefix"),g(E))}},continuation:{tokenize:function(h,g,E){let _=this;return function(g){return markdownSpace(g)?factorySpace(h,contBefore,"linePrefix",_.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):contBefore(g)};function contBefore(_){return h.attempt(iH,g,E)(_)}}},exit:function(h){h.exit("blockQuote")}};function factoryDestination(h,g,E,_,A,b,C,k,S){let N=S||Number.POSITIVE_INFINITY,w=0;return function(g){return 60===g?(h.enter(_),h.enter(A),h.enter(b),h.consume(g),h.exit(b),enclosedBefore):null===g||32===g||41===g||asciiControl(g)?E(g):(h.enter(_),h.enter(C),h.enter(k),h.enter("chunkString",{contentType:"string"}),raw(g))};function enclosedBefore(E){return 62===E?(h.enter(b),h.consume(E),h.exit(b),h.exit(A),h.exit(_),g):(h.enter(k),h.enter("chunkString",{contentType:"string"}),enclosed(E))}function enclosed(g){return 62===g?(h.exit("chunkString"),h.exit(k),enclosedBefore(g)):null===g||60===g||markdownLineEnding(g)?E(g):(h.consume(g),92===g?enclosedEscape:enclosed)}function enclosedEscape(g){return 60===g||62===g||92===g?(h.consume(g),enclosed):enclosed(g)}function raw(A){return!w&&(null===A||41===A||markdownLineEndingOrSpace(A))?(h.exit("chunkString"),h.exit(k),h.exit(C),h.exit(_),g(A)):w<N&&40===A?(h.consume(A),w++,raw):41===A?(h.consume(A),w--,raw):null===A||32===A||40===A||asciiControl(A)?E(A):(h.consume(A),92===A?rawEscape:raw)}function rawEscape(g){return 40===g||41===g||92===g?(h.consume(g),raw):raw(g)}}function factoryLabel(h,g,E,_,A,b){let C;let k=this,S=0;return function(g){return h.enter(_),h.enter(A),h.consume(g),h.exit(A),h.enter(b),atBreak};function atBreak(N){return S>999||null===N||91===N||93===N&&!C||94===N&&!S&&"_hiddenFootnoteSupport"in k.parser.constructs?E(N):93===N?(h.exit(b),h.enter(A),h.consume(N),h.exit(A),h.exit(_),g):markdownLineEnding(N)?(h.enter("lineEnding"),h.consume(N),h.exit("lineEnding"),atBreak):(h.enter("chunkString",{contentType:"string"}),labelInside(N))}function labelInside(g){return null===g||91===g||93===g||markdownLineEnding(g)||S++>999?(h.exit("chunkString"),atBreak(g)):(h.consume(g),C||(C=!markdownSpace(g)),92===g?labelEscape:labelInside)}function labelEscape(g){return 91===g||92===g||93===g?(h.consume(g),S++,labelInside):labelInside(g)}}function factoryTitle(h,g,E,_,A,b){let C;return function(g){return 34===g||39===g||40===g?(h.enter(_),h.enter(A),h.consume(g),h.exit(A),C=40===g?41:g,begin):E(g)};function begin(E){return E===C?(h.enter(A),h.consume(E),h.exit(A),h.exit(_),g):(h.enter(b),atBreak(E))}function atBreak(g){return g===C?(h.exit(b),begin(C)):null===g?E(g):markdownLineEnding(g)?(h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),factorySpace(h,atBreak,"linePrefix")):(h.enter("chunkString",{contentType:"string"}),inside(g))}function inside(g){return g===C||null===g||markdownLineEnding(g)?(h.exit("chunkString"),atBreak(g)):(h.consume(g),92===g?escape:inside)}function escape(g){return g===C||92===g?(h.consume(g),inside):inside(g)}}function factoryWhitespace(h,g){let E;return function start(_){return markdownLineEnding(_)?(h.enter("lineEnding"),h.consume(_),h.exit("lineEnding"),E=!0,start):markdownSpace(_)?factorySpace(h,start,E?"linePrefix":"lineSuffix")(_):g(_)}}let iU={tokenize:function(h,g,E){return function(g){return markdownLineEndingOrSpace(g)?factoryWhitespace(h,beforeMarker)(g):E(g)};function beforeMarker(g){return factoryTitle(h,titleAfter,E,"definitionTitle","definitionTitleMarker","definitionTitleString")(g)}function titleAfter(g){return markdownSpace(g)?factorySpace(h,titleAfterOptionalWhitespace,"whitespace")(g):titleAfterOptionalWhitespace(g)}function titleAfterOptionalWhitespace(h){return null===h||markdownLineEnding(h)?g(h):E(h)}},partial:!0},iz={name:"codeIndented",tokenize:function(h,g,E){let _=this;return function(g){return h.enter("codeIndented"),factorySpace(h,afterPrefix,"linePrefix",5)(g)};function afterPrefix(g){let A=_.events[_.events.length-1];return A&&"linePrefix"===A[1].type&&A[2].sliceSerialize(A[1],!0).length>=4?function atBreak(g){return null===g?after(g):markdownLineEnding(g)?h.attempt(iG,atBreak,after)(g):(h.enter("codeFlowValue"),function inside(g){return null===g||markdownLineEnding(g)?(h.exit("codeFlowValue"),atBreak(g)):(h.consume(g),inside)}(g))}(g):E(g)}function after(E){return h.exit("codeIndented"),g(E)}}},iG={tokenize:function(h,g,E){let _=this;return furtherStart;function furtherStart(g){return _.parser.lazy[_.now().line]?E(g):markdownLineEnding(g)?(h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),furtherStart):factorySpace(h,afterPrefix,"linePrefix",5)(g)}function afterPrefix(h){let A=_.events[_.events.length-1];return A&&"linePrefix"===A[1].type&&A[2].sliceSerialize(A[1],!0).length>=4?g(h):markdownLineEnding(h)?furtherStart(h):E(h)}},partial:!0},i$={name:"setextUnderline",tokenize:function(h,g,E){let _;let A=this;return function(g){let b,C=A.events.length;for(;C--;)if("lineEnding"!==A.events[C][1].type&&"linePrefix"!==A.events[C][1].type&&"content"!==A.events[C][1].type){b="paragraph"===A.events[C][1].type;break}return!A.parser.lazy[A.now().line]&&(A.interrupt||b)?(h.enter("setextHeadingLine"),_=g,h.enter("setextHeadingLineSequence"),function inside(g){return g===_?(h.consume(g),inside):(h.exit("setextHeadingLineSequence"),markdownSpace(g)?factorySpace(h,after,"lineSuffix")(g):after(g))}(g)):E(g)};function after(_){return null===_||markdownLineEnding(_)?(h.exit("setextHeadingLine"),g(_)):E(_)}},resolveTo:function(h,g){let E,_,A,b=h.length;for(;b--;)if("enter"===h[b][0]){if("content"===h[b][1].type){E=b;break}"paragraph"===h[b][1].type&&(_=b)}else"content"===h[b][1].type&&h.splice(b,1),A||"definition"!==h[b][1].type||(A=b);let C={type:"setextHeading",start:Object.assign({},h[_][1].start),end:Object.assign({},h[h.length-1][1].end)};return h[_][1].type="setextHeadingText",A?(h.splice(_,0,["enter",C,g]),h.splice(A+1,0,["exit",h[E][1],g]),h[E][1].end=Object.assign({},h[A][1].end)):h[E][1]=C,h.push(["exit",C,g]),h}},ij=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],iV=["pre","script","style","textarea"],iq={tokenize:function(h,g,E){return function(_){return h.enter("lineEnding"),h.consume(_),h.exit("lineEnding"),h.attempt(iv,g,E)}},partial:!0},iW={tokenize:function(h,g,E){let _=this;return function(g){return markdownLineEnding(g)?(h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),after):E(g)};function after(h){return _.parser.lazy[_.now().line]?E(h):g(h)}},partial:!0},iY={tokenize:function(h,g,E){let _=this;return function(g){return null===g?E(g):(h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),lineStart)};function lineStart(h){return _.parser.lazy[_.now().line]?E(h):g(h)}},partial:!0},iQ={name:"codeFenced",tokenize:function(h,g,E){let _;let A=this,b={tokenize:function(h,g,E){let b=0;return function(g){return h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),start};function start(g){return h.enter("codeFencedFence"),markdownSpace(g)?factorySpace(h,beforeSequenceClose,"linePrefix",A.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):beforeSequenceClose(g)}function beforeSequenceClose(g){return g===_?(h.enter("codeFencedFenceSequence"),function sequenceClose(g){return g===_?(b++,h.consume(g),sequenceClose):b>=k?(h.exit("codeFencedFenceSequence"),markdownSpace(g)?factorySpace(h,sequenceCloseAfter,"whitespace")(g):sequenceCloseAfter(g)):E(g)}(g)):E(g)}function sequenceCloseAfter(_){return null===_||markdownLineEnding(_)?(h.exit("codeFencedFence"),g(_)):E(_)}},partial:!0},C=0,k=0;return function(g){return function(g){let b=A.events[A.events.length-1];return C=b&&"linePrefix"===b[1].type?b[2].sliceSerialize(b[1],!0).length:0,_=g,h.enter("codeFenced"),h.enter("codeFencedFence"),h.enter("codeFencedFenceSequence"),function sequenceOpen(g){return g===_?(k++,h.consume(g),sequenceOpen):k<3?E(g):(h.exit("codeFencedFenceSequence"),markdownSpace(g)?factorySpace(h,infoBefore,"whitespace")(g):infoBefore(g))}(g)}(g)};function infoBefore(b){return null===b||markdownLineEnding(b)?(h.exit("codeFencedFence"),A.interrupt?g(b):h.check(iY,atNonLazyBreak,after)(b)):(h.enter("codeFencedFenceInfo"),h.enter("chunkString",{contentType:"string"}),function info(g){return null===g||markdownLineEnding(g)?(h.exit("chunkString"),h.exit("codeFencedFenceInfo"),infoBefore(g)):markdownSpace(g)?(h.exit("chunkString"),h.exit("codeFencedFenceInfo"),factorySpace(h,metaBefore,"whitespace")(g)):96===g&&g===_?E(g):(h.consume(g),info)}(b))}function metaBefore(g){return null===g||markdownLineEnding(g)?infoBefore(g):(h.enter("codeFencedFenceMeta"),h.enter("chunkString",{contentType:"string"}),function meta(g){return null===g||markdownLineEnding(g)?(h.exit("chunkString"),h.exit("codeFencedFenceMeta"),infoBefore(g)):96===g&&g===_?E(g):(h.consume(g),meta)}(g))}function atNonLazyBreak(g){return h.attempt(b,after,contentBefore)(g)}function contentBefore(g){return h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),contentStart}function contentStart(g){return C>0&&markdownSpace(g)?factorySpace(h,beforeContentChunk,"linePrefix",C+1)(g):beforeContentChunk(g)}function beforeContentChunk(g){return null===g||markdownLineEnding(g)?h.check(iY,atNonLazyBreak,after)(g):(h.enter("codeFlowValue"),function contentChunk(g){return null===g||markdownLineEnding(g)?(h.exit("codeFlowValue"),beforeContentChunk(g)):(h.consume(g),contentChunk)}(g))}function after(E){return h.exit("codeFenced"),g(E)}},concrete:!0},iX=document.createElement("i");function decodeNamedCharacterReference(h){let g="&"+h+";";iX.innerHTML=g;let E=iX.textContent;return(59!==E.charCodeAt(E.length-1)||"semi"===h)&&E!==g&&E}let iK={name:"characterReference",tokenize:function(h,g,E){let _,A;let b=this,C=0;return function(g){return h.enter("characterReference"),h.enter("characterReferenceMarker"),h.consume(g),h.exit("characterReferenceMarker"),open};function open(g){return 35===g?(h.enter("characterReferenceMarkerNumeric"),h.consume(g),h.exit("characterReferenceMarkerNumeric"),numeric):(h.enter("characterReferenceValue"),_=31,A=r4,value(g))}function numeric(g){return 88===g||120===g?(h.enter("characterReferenceMarkerHexadecimal"),h.consume(g),h.exit("characterReferenceMarkerHexadecimal"),h.enter("characterReferenceValue"),_=6,A=r8,value):(h.enter("characterReferenceValue"),_=7,A=r6,value(g))}function value(k){if(59===k&&C){let _=h.exit("characterReferenceValue");return A!==r4||decodeNamedCharacterReference(b.sliceSerialize(_))?(h.enter("characterReferenceMarker"),h.consume(k),h.exit("characterReferenceMarker"),h.exit("characterReference"),g):E(k)}return A(k)&&C++<_?(h.consume(k),value):E(k)}}},iZ={name:"characterEscape",tokenize:function(h,g,E){return function(g){return h.enter("characterEscape"),h.enter("escapeMarker"),h.consume(g),h.exit("escapeMarker"),inside};function inside(_){return r9(_)?(h.enter("characterEscapeValue"),h.consume(_),h.exit("characterEscapeValue"),h.exit("characterEscape"),g):E(_)}}},iJ={name:"lineEnding",tokenize:function(h,g){return function(E){return h.enter("lineEnding"),h.consume(E),h.exit("lineEnding"),factorySpace(h,g,"linePrefix")}}},i0={name:"labelEnd",tokenize:function(h,g,E){let _,A;let b=this,C=b.events.length;for(;C--;)if(("labelImage"===b.events[C][1].type||"labelLink"===b.events[C][1].type)&&!b.events[C][1]._balanced){_=b.events[C][1];break}return function(g){return _?_._inactive?labelEndNok(g):(A=b.parser.defined.includes(normalizeIdentifier(b.sliceSerialize({start:_.end,end:b.now()}))),h.enter("labelEnd"),h.enter("labelMarker"),h.consume(g),h.exit("labelMarker"),h.exit("labelEnd"),after):E(g)};function after(g){return 40===g?h.attempt(i1,labelEndOk,A?labelEndOk:labelEndNok)(g):91===g?h.attempt(i2,labelEndOk,A?referenceNotFull:labelEndNok)(g):A?labelEndOk(g):labelEndNok(g)}function referenceNotFull(g){return h.attempt(i3,labelEndOk,labelEndNok)(g)}function labelEndOk(h){return g(h)}function labelEndNok(h){return _._balanced=!0,E(h)}},resolveTo:function(h,g){let E,_,A,b,C=h.length,k=0;for(;C--;)if(E=h[C][1],_){if("link"===E.type||"labelLink"===E.type&&E._inactive)break;"enter"===h[C][0]&&"labelLink"===E.type&&(E._inactive=!0)}else if(A){if("enter"===h[C][0]&&("labelImage"===E.type||"labelLink"===E.type)&&!E._balanced&&(_=C,"labelLink"!==E.type)){k=2;break}}else"labelEnd"===E.type&&(A=C);let S={type:"labelLink"===h[_][1].type?"link":"image",start:Object.assign({},h[_][1].start),end:Object.assign({},h[h.length-1][1].end)},N={type:"label",start:Object.assign({},h[_][1].start),end:Object.assign({},h[A][1].end)},w={type:"labelText",start:Object.assign({},h[_+k+2][1].end),end:Object.assign({},h[A-2][1].start)};return b=push(b=[["enter",S,g],["enter",N,g]],h.slice(_+1,_+k+3)),b=push(b,[["enter",w,g]]),b=push(b,resolveAll(g.parser.constructs.insideSpan.null,h.slice(_+k+4,A-3),g)),b=push(b,[["exit",w,g],h[A-2],h[A-1],["exit",N,g]]),b=push(b,h.slice(A+1)),b=push(b,[["exit",S,g]]),splice(h,_,h.length,b),h},resolveAll:function(h){let g=-1;for(;++g<h.length;){let E=h[g][1];("labelImage"===E.type||"labelLink"===E.type||"labelEnd"===E.type)&&(h.splice(g+1,"labelImage"===E.type?4:2),E.type="data",g++)}return h}},i1={tokenize:function(h,g,E){return function(g){return h.enter("resource"),h.enter("resourceMarker"),h.consume(g),h.exit("resourceMarker"),resourceBefore};function resourceBefore(g){return markdownLineEndingOrSpace(g)?factoryWhitespace(h,resourceOpen)(g):resourceOpen(g)}function resourceOpen(g){return 41===g?resourceEnd(g):factoryDestination(h,resourceDestinationAfter,resourceDestinationMissing,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function resourceDestinationAfter(g){return markdownLineEndingOrSpace(g)?factoryWhitespace(h,resourceBetween)(g):resourceEnd(g)}function resourceDestinationMissing(h){return E(h)}function resourceBetween(g){return 34===g||39===g||40===g?factoryTitle(h,resourceTitleAfter,E,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):resourceEnd(g)}function resourceTitleAfter(g){return markdownLineEndingOrSpace(g)?factoryWhitespace(h,resourceEnd)(g):resourceEnd(g)}function resourceEnd(_){return 41===_?(h.enter("resourceMarker"),h.consume(_),h.exit("resourceMarker"),h.exit("resource"),g):E(_)}}},i2={tokenize:function(h,g,E){let _=this;return function(g){return factoryLabel.call(_,h,referenceFullAfter,referenceFullMissing,"reference","referenceMarker","referenceString")(g)};function referenceFullAfter(h){return _.parser.defined.includes(normalizeIdentifier(_.sliceSerialize(_.events[_.events.length-1][1]).slice(1,-1)))?g(h):E(h)}function referenceFullMissing(h){return E(h)}}},i3={tokenize:function(h,g,E){return function(g){return h.enter("reference"),h.enter("referenceMarker"),h.consume(g),h.exit("referenceMarker"),referenceCollapsedOpen};function referenceCollapsedOpen(_){return 93===_?(h.enter("referenceMarker"),h.consume(_),h.exit("referenceMarker"),h.exit("reference"),g):E(_)}}},i4={name:"labelStartImage",tokenize:function(h,g,E){let _=this;return function(g){return h.enter("labelImage"),h.enter("labelImageMarker"),h.consume(g),h.exit("labelImageMarker"),open};function open(g){return 91===g?(h.enter("labelMarker"),h.consume(g),h.exit("labelMarker"),h.exit("labelImage"),after):E(g)}function after(h){return 94===h&&"_hiddenFootnoteSupport"in _.parser.constructs?E(h):g(h)}},resolveAll:i0.resolveAll},i5={name:"attention",tokenize:function(h,g){let E;let _=this.parser.constructs.attentionMarkers.null,A=this.previous,b=classifyCharacter(A);return function(C){return E=C,h.enter("attentionSequence"),function inside(C){if(C===E)return h.consume(C),inside;let k=h.exit("attentionSequence"),S=classifyCharacter(C),N=!S||2===S&&b||_.includes(C),w=!b||2===b&&S||_.includes(A);return k._open=!!(42===E?N:N&&(b||!w)),k._close=!!(42===E?w:w&&(S||!N)),g(C)}(C)}},resolveAll:function(h,g){let E,_,A,b,C,k,S,N,w=-1;for(;++w<h.length;)if("enter"===h[w][0]&&"attentionSequence"===h[w][1].type&&h[w][1]._close){for(E=w;E--;)if("exit"===h[E][0]&&"attentionSequence"===h[E][1].type&&h[E][1]._open&&g.sliceSerialize(h[E][1]).charCodeAt(0)===g.sliceSerialize(h[w][1]).charCodeAt(0)){if((h[E][1]._close||h[w][1]._open)&&(h[w][1].end.offset-h[w][1].start.offset)%3&&!((h[E][1].end.offset-h[E][1].start.offset+h[w][1].end.offset-h[w][1].start.offset)%3))continue;k=h[E][1].end.offset-h[E][1].start.offset>1&&h[w][1].end.offset-h[w][1].start.offset>1?2:1;let R=Object.assign({},h[E][1].end),L=Object.assign({},h[w][1].start);movePoint(R,-k),movePoint(L,k),b={type:k>1?"strongSequence":"emphasisSequence",start:R,end:Object.assign({},h[E][1].end)},C={type:k>1?"strongSequence":"emphasisSequence",start:Object.assign({},h[w][1].start),end:L},A={type:k>1?"strongText":"emphasisText",start:Object.assign({},h[E][1].end),end:Object.assign({},h[w][1].start)},_={type:k>1?"strong":"emphasis",start:Object.assign({},b.start),end:Object.assign({},C.end)},h[E][1].end=Object.assign({},b.start),h[w][1].start=Object.assign({},C.end),S=[],h[E][1].end.offset-h[E][1].start.offset&&(S=push(S,[["enter",h[E][1],g],["exit",h[E][1],g]])),S=push(S,[["enter",_,g],["enter",b,g],["exit",b,g],["enter",A,g]]),S=push(S,resolveAll(g.parser.constructs.insideSpan.null,h.slice(E+1,w),g)),S=push(S,[["exit",A,g],["enter",C,g],["exit",C,g],["exit",_,g]]),h[w][1].end.offset-h[w][1].start.offset?(N=2,S=push(S,[["enter",h[w][1],g],["exit",h[w][1],g]])):N=0,splice(h,E-1,w-E+3,S),w=E+S.length-N-2;break}}for(w=-1;++w<h.length;)"attentionSequence"===h[w][1].type&&(h[w][1].type="data");return h}};function movePoint(h,g){h.column+=g,h.offset+=g,h._bufferIndex+=g}let i6={name:"labelStartLink",tokenize:function(h,g,E){let _=this;return function(g){return h.enter("labelLink"),h.enter("labelMarker"),h.consume(g),h.exit("labelMarker"),h.exit("labelLink"),after};function after(h){return 94===h&&"_hiddenFootnoteSupport"in _.parser.constructs?E(h):g(h)}},resolveAll:i0.resolveAll},i8={42:iM,43:iM,45:iM,48:iM,49:iM,50:iM,51:iM,52:iM,53:iM,54:iM,55:iM,56:iM,57:iM,62:iH},i9={91:{name:"definition",tokenize:function(h,g,E){let _;let A=this;return function(g){return h.enter("definition"),factoryLabel.call(A,h,labelAfter,E,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)};function labelAfter(g){return(_=normalizeIdentifier(A.sliceSerialize(A.events[A.events.length-1][1]).slice(1,-1)),58===g)?(h.enter("definitionMarker"),h.consume(g),h.exit("definitionMarker"),markerAfter):E(g)}function markerAfter(g){return markdownLineEndingOrSpace(g)?factoryWhitespace(h,destinationBefore)(g):destinationBefore(g)}function destinationBefore(g){return factoryDestination(h,destinationAfter,E,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function destinationAfter(g){return h.attempt(iU,after,after)(g)}function after(g){return markdownSpace(g)?factorySpace(h,afterWhitespace,"whitespace")(g):afterWhitespace(g)}function afterWhitespace(b){return null===b||markdownLineEnding(b)?(h.exit("definition"),A.parser.defined.push(_),g(b)):E(b)}}}},i7={[-2]:iz,[-1]:iz,32:iz},ae={35:{name:"headingAtx",tokenize:function(h,g,E){let _=0;return function(A){return h.enter("atxHeading"),h.enter("atxHeadingSequence"),function sequenceOpen(A){return 35===A&&_++<6?(h.consume(A),sequenceOpen):null===A||markdownLineEndingOrSpace(A)?(h.exit("atxHeadingSequence"),function atBreak(E){return 35===E?(h.enter("atxHeadingSequence"),function sequenceFurther(g){return 35===g?(h.consume(g),sequenceFurther):(h.exit("atxHeadingSequence"),atBreak(g))}(E)):null===E||markdownLineEnding(E)?(h.exit("atxHeading"),g(E)):markdownSpace(E)?factorySpace(h,atBreak,"whitespace")(E):(h.enter("atxHeadingText"),function data(g){return null===g||35===g||markdownLineEndingOrSpace(g)?(h.exit("atxHeadingText"),atBreak(g)):(h.consume(g),data)}(E))}(A)):E(A)}(A)}},resolve:function(h,g){let E,_,A=h.length-2,b=3;return"whitespace"===h[3][1].type&&(b+=2),A-2>b&&"whitespace"===h[A][1].type&&(A-=2),"atxHeadingSequence"===h[A][1].type&&(b===A-1||A-4>b&&"whitespace"===h[A-2][1].type)&&(A-=b+1===A?2:4),A>b&&(E={type:"atxHeadingText",start:h[b][1].start,end:h[A][1].end},_={type:"chunkText",start:h[b][1].start,end:h[A][1].end,contentType:"text"},splice(h,b,A-b+1,[["enter",E,g],["enter",_,g],["exit",_,g],["exit",E,g]])),h}},42:iP,45:[i$,iP],60:{name:"htmlFlow",tokenize:function(h,g,E){let _,A,b,C,k;let S=this;return function(g){return h.enter("htmlFlow"),h.enter("htmlFlowData"),h.consume(g),open};function open(C){return 33===C?(h.consume(C),declarationOpen):47===C?(h.consume(C),A=!0,tagCloseStart):63===C?(h.consume(C),_=3,S.interrupt?g:continuationDeclarationInside):r3(C)?(h.consume(C),b=String.fromCharCode(C),tagName):E(C)}function declarationOpen(A){return 45===A?(h.consume(A),_=2,commentOpenInside):91===A?(h.consume(A),_=5,C=0,cdataOpenInside):r3(A)?(h.consume(A),_=4,S.interrupt?g:continuationDeclarationInside):E(A)}function commentOpenInside(_){return 45===_?(h.consume(_),S.interrupt?g:continuationDeclarationInside):E(_)}function cdataOpenInside(_){let A="CDATA[";return _===A.charCodeAt(C++)?(h.consume(_),C===A.length)?S.interrupt?g:continuation:cdataOpenInside:E(_)}function tagCloseStart(g){return r3(g)?(h.consume(g),b=String.fromCharCode(g),tagName):E(g)}function tagName(C){if(null===C||47===C||62===C||markdownLineEndingOrSpace(C)){let k=47===C,N=b.toLowerCase();return!k&&!A&&iV.includes(N)?(_=1,S.interrupt?g(C):continuation(C)):ij.includes(b.toLowerCase())?(_=6,k)?(h.consume(C),basicSelfClosing):S.interrupt?g(C):continuation(C):(_=7,S.interrupt&&!S.parser.lazy[S.now().line]?E(C):A?function completeClosingTagAfter(g){return markdownSpace(g)?(h.consume(g),completeClosingTagAfter):completeEnd(g)}(C):completeAttributeNameBefore(C))}return 45===C||r4(C)?(h.consume(C),b+=String.fromCharCode(C),tagName):E(C)}function basicSelfClosing(_){return 62===_?(h.consume(_),S.interrupt?g:continuation):E(_)}function completeAttributeNameBefore(g){return 47===g?(h.consume(g),completeEnd):58===g||95===g||r3(g)?(h.consume(g),completeAttributeName):markdownSpace(g)?(h.consume(g),completeAttributeNameBefore):completeEnd(g)}function completeAttributeName(g){return 45===g||46===g||58===g||95===g||r4(g)?(h.consume(g),completeAttributeName):completeAttributeNameAfter(g)}function completeAttributeNameAfter(g){return 61===g?(h.consume(g),completeAttributeValueBefore):markdownSpace(g)?(h.consume(g),completeAttributeNameAfter):completeAttributeNameBefore(g)}function completeAttributeValueBefore(g){return null===g||60===g||61===g||62===g||96===g?E(g):34===g||39===g?(h.consume(g),k=g,completeAttributeValueQuoted):markdownSpace(g)?(h.consume(g),completeAttributeValueBefore):function completeAttributeValueUnquoted(g){return null===g||34===g||39===g||47===g||60===g||61===g||62===g||96===g||markdownLineEndingOrSpace(g)?completeAttributeNameAfter(g):(h.consume(g),completeAttributeValueUnquoted)}(g)}function completeAttributeValueQuoted(g){return g===k?(h.consume(g),k=null,completeAttributeValueQuotedAfter):null===g||markdownLineEnding(g)?E(g):(h.consume(g),completeAttributeValueQuoted)}function completeAttributeValueQuotedAfter(h){return 47===h||62===h||markdownSpace(h)?completeAttributeNameBefore(h):E(h)}function completeEnd(g){return 62===g?(h.consume(g),completeAfter):E(g)}function completeAfter(g){return null===g||markdownLineEnding(g)?continuation(g):markdownSpace(g)?(h.consume(g),completeAfter):E(g)}function continuation(g){return 45===g&&2===_?(h.consume(g),continuationCommentInside):60===g&&1===_?(h.consume(g),continuationRawTagOpen):62===g&&4===_?(h.consume(g),continuationClose):63===g&&3===_?(h.consume(g),continuationDeclarationInside):93===g&&5===_?(h.consume(g),continuationCdataInside):markdownLineEnding(g)&&(6===_||7===_)?(h.exit("htmlFlowData"),h.check(iq,continuationAfter,continuationStart)(g)):null===g||markdownLineEnding(g)?(h.exit("htmlFlowData"),continuationStart(g)):(h.consume(g),continuation)}function continuationStart(g){return h.check(iW,continuationStartNonLazy,continuationAfter)(g)}function continuationStartNonLazy(g){return h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),continuationBefore}function continuationBefore(g){return null===g||markdownLineEnding(g)?continuationStart(g):(h.enter("htmlFlowData"),continuation(g))}function continuationCommentInside(g){return 45===g?(h.consume(g),continuationDeclarationInside):continuation(g)}function continuationRawTagOpen(g){return 47===g?(h.consume(g),b="",continuationRawEndTag):continuation(g)}function continuationRawEndTag(g){if(62===g){let E=b.toLowerCase();return iV.includes(E)?(h.consume(g),continuationClose):continuation(g)}return r3(g)&&b.length<8?(h.consume(g),b+=String.fromCharCode(g),continuationRawEndTag):continuation(g)}function continuationCdataInside(g){return 93===g?(h.consume(g),continuationDeclarationInside):continuation(g)}function continuationDeclarationInside(g){return 62===g?(h.consume(g),continuationClose):45===g&&2===_?(h.consume(g),continuationDeclarationInside):continuation(g)}function continuationClose(g){return null===g||markdownLineEnding(g)?(h.exit("htmlFlowData"),continuationAfter(g)):(h.consume(g),continuationClose)}function continuationAfter(E){return h.exit("htmlFlow"),g(E)}},resolveTo:function(h){let g=h.length;for(;g--&&("enter"!==h[g][0]||"htmlFlow"!==h[g][1].type););return g>1&&"linePrefix"===h[g-2][1].type&&(h[g][1].start=h[g-2][1].start,h[g+1][1].start=h[g-2][1].start,h.splice(g-2,2)),h},concrete:!0},61:i$,95:iP,96:iQ,126:iQ},at={38:iK,92:iZ},an={[-5]:iJ,[-4]:iJ,[-3]:iJ,33:i4,38:iK,42:i5,60:[{name:"autolink",tokenize:function(h,g,E){let _=0;return function(g){return h.enter("autolink"),h.enter("autolinkMarker"),h.consume(g),h.exit("autolinkMarker"),h.enter("autolinkProtocol"),open};function open(g){return r3(g)?(h.consume(g),schemeOrEmailAtext):64===g?E(g):emailAtext(g)}function schemeOrEmailAtext(g){return 43===g||45===g||46===g||r4(g)?(_=1,function schemeInsideOrEmailAtext(g){return 58===g?(h.consume(g),_=0,urlInside):(43===g||45===g||46===g||r4(g))&&_++<32?(h.consume(g),schemeInsideOrEmailAtext):(_=0,emailAtext(g))}(g)):emailAtext(g)}function urlInside(_){return 62===_?(h.exit("autolinkProtocol"),h.enter("autolinkMarker"),h.consume(_),h.exit("autolinkMarker"),h.exit("autolink"),g):null===_||32===_||60===_||asciiControl(_)?E(_):(h.consume(_),urlInside)}function emailAtext(g){return 64===g?(h.consume(g),emailAtSignOrDot):r5(g)?(h.consume(g),emailAtext):E(g)}function emailAtSignOrDot(A){return r4(A)?function emailLabel(A){return 46===A?(h.consume(A),_=0,emailAtSignOrDot):62===A?(h.exit("autolinkProtocol").type="autolinkEmail",h.enter("autolinkMarker"),h.consume(A),h.exit("autolinkMarker"),h.exit("autolink"),g):function emailValue(g){if((45===g||r4(g))&&_++<63){let E=45===g?emailValue:emailLabel;return h.consume(g),E}return E(g)}(A)}(A):E(A)}}},{name:"htmlText",tokenize:function(h,g,E){let _,A,b;let C=this;return function(g){return h.enter("htmlText"),h.enter("htmlTextData"),h.consume(g),open};function open(g){return 33===g?(h.consume(g),declarationOpen):47===g?(h.consume(g),tagCloseStart):63===g?(h.consume(g),instruction):r3(g)?(h.consume(g),tagOpen):E(g)}function declarationOpen(g){return 45===g?(h.consume(g),commentOpenInside):91===g?(h.consume(g),A=0,cdataOpenInside):r3(g)?(h.consume(g),declaration):E(g)}function commentOpenInside(g){return 45===g?(h.consume(g),commentEnd):E(g)}function comment(g){return null===g?E(g):45===g?(h.consume(g),commentClose):markdownLineEnding(g)?(b=comment,lineEndingBefore(g)):(h.consume(g),comment)}function commentClose(g){return 45===g?(h.consume(g),commentEnd):comment(g)}function commentEnd(h){return 62===h?end(h):45===h?commentClose(h):comment(h)}function cdataOpenInside(g){let _="CDATA[";return g===_.charCodeAt(A++)?(h.consume(g),A===_.length?cdata:cdataOpenInside):E(g)}function cdata(g){return null===g?E(g):93===g?(h.consume(g),cdataClose):markdownLineEnding(g)?(b=cdata,lineEndingBefore(g)):(h.consume(g),cdata)}function cdataClose(g){return 93===g?(h.consume(g),cdataEnd):cdata(g)}function cdataEnd(g){return 62===g?end(g):93===g?(h.consume(g),cdataEnd):cdata(g)}function declaration(g){return null===g||62===g?end(g):markdownLineEnding(g)?(b=declaration,lineEndingBefore(g)):(h.consume(g),declaration)}function instruction(g){return null===g?E(g):63===g?(h.consume(g),instructionClose):markdownLineEnding(g)?(b=instruction,lineEndingBefore(g)):(h.consume(g),instruction)}function instructionClose(h){return 62===h?end(h):instruction(h)}function tagCloseStart(g){return r3(g)?(h.consume(g),tagClose):E(g)}function tagClose(g){return 45===g||r4(g)?(h.consume(g),tagClose):function tagCloseBetween(g){return markdownLineEnding(g)?(b=tagCloseBetween,lineEndingBefore(g)):markdownSpace(g)?(h.consume(g),tagCloseBetween):end(g)}(g)}function tagOpen(g){return 45===g||r4(g)?(h.consume(g),tagOpen):47===g||62===g||markdownLineEndingOrSpace(g)?tagOpenBetween(g):E(g)}function tagOpenBetween(g){return 47===g?(h.consume(g),end):58===g||95===g||r3(g)?(h.consume(g),tagOpenAttributeName):markdownLineEnding(g)?(b=tagOpenBetween,lineEndingBefore(g)):markdownSpace(g)?(h.consume(g),tagOpenBetween):end(g)}function tagOpenAttributeName(g){return 45===g||46===g||58===g||95===g||r4(g)?(h.consume(g),tagOpenAttributeName):function tagOpenAttributeNameAfter(g){return 61===g?(h.consume(g),tagOpenAttributeValueBefore):markdownLineEnding(g)?(b=tagOpenAttributeNameAfter,lineEndingBefore(g)):markdownSpace(g)?(h.consume(g),tagOpenAttributeNameAfter):tagOpenBetween(g)}(g)}function tagOpenAttributeValueBefore(g){return null===g||60===g||61===g||62===g||96===g?E(g):34===g||39===g?(h.consume(g),_=g,tagOpenAttributeValueQuoted):markdownLineEnding(g)?(b=tagOpenAttributeValueBefore,lineEndingBefore(g)):markdownSpace(g)?(h.consume(g),tagOpenAttributeValueBefore):(h.consume(g),tagOpenAttributeValueUnquoted)}function tagOpenAttributeValueQuoted(g){return g===_?(h.consume(g),_=void 0,tagOpenAttributeValueQuotedAfter):null===g?E(g):markdownLineEnding(g)?(b=tagOpenAttributeValueQuoted,lineEndingBefore(g)):(h.consume(g),tagOpenAttributeValueQuoted)}function tagOpenAttributeValueUnquoted(g){return null===g||34===g||39===g||60===g||61===g||96===g?E(g):47===g||62===g||markdownLineEndingOrSpace(g)?tagOpenBetween(g):(h.consume(g),tagOpenAttributeValueUnquoted)}function tagOpenAttributeValueQuotedAfter(h){return 47===h||62===h||markdownLineEndingOrSpace(h)?tagOpenBetween(h):E(h)}function end(_){return 62===_?(h.consume(_),h.exit("htmlTextData"),h.exit("htmlText"),g):E(_)}function lineEndingBefore(g){return h.exit("htmlTextData"),h.enter("lineEnding"),h.consume(g),h.exit("lineEnding"),lineEndingAfter}function lineEndingAfter(g){return markdownSpace(g)?factorySpace(h,lineEndingAfterPrefix,"linePrefix",C.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):lineEndingAfterPrefix(g)}function lineEndingAfterPrefix(g){return h.enter("htmlTextData"),b(g)}}}],91:i6,92:[{name:"hardBreakEscape",tokenize:function(h,g,E){return function(g){return h.enter("hardBreakEscape"),h.consume(g),after};function after(_){return markdownLineEnding(_)?(h.exit("hardBreakEscape"),g(_)):E(_)}}},iZ],93:i0,95:i5,96:{name:"codeText",tokenize:function(h,g,E){let _,A,b=0;return function(g){return h.enter("codeText"),h.enter("codeTextSequence"),function sequenceOpen(g){return 96===g?(h.consume(g),b++,sequenceOpen):(h.exit("codeTextSequence"),between(g))}(g)};function between(C){return null===C?E(C):32===C?(h.enter("space"),h.consume(C),h.exit("space"),between):96===C?(A=h.enter("codeTextSequence"),_=0,function sequenceClose(E){return 96===E?(h.consume(E),_++,sequenceClose):_===b?(h.exit("codeTextSequence"),h.exit("codeText"),g(E)):(A.type="codeTextData",data(E))}(C)):markdownLineEnding(C)?(h.enter("lineEnding"),h.consume(C),h.exit("lineEnding"),between):(h.enter("codeTextData"),data(C))}function data(g){return null===g||32===g||96===g||markdownLineEnding(g)?(h.exit("codeTextData"),between(g)):(h.consume(g),data)}},resolve:function(h){let g,E,_=h.length-4,A=3;if(("lineEnding"===h[3][1].type||"space"===h[A][1].type)&&("lineEnding"===h[_][1].type||"space"===h[_][1].type)){for(g=A;++g<_;)if("codeTextData"===h[g][1].type){h[A][1].type="codeTextPadding",h[_][1].type="codeTextPadding",A+=2,_-=2;break}}for(g=A-1,_++;++g<=_;)void 0===E?g!==_&&"lineEnding"!==h[g][1].type&&(E=g):(g===_||"lineEnding"===h[g][1].type)&&(h[E][1].type="codeTextData",g!==E+2&&(h[E][1].end=h[g-1][1].end,h.splice(E+2,g-E-2),_-=g-E-2,g=E+2),E=void 0);return h},previous:function(h){return 96!==h||"characterEscape"===this.events[this.events.length-1][1].type}}},ar={null:[i5,iR]},ai={null:[42,95]},aa={null:[]},ao=/[\0\t\n\r]/g;function decodeNumericCharacterReference(h,g){let E=Number.parseInt(h,g);return E<9||11===E||E>13&&E<32||E>126&&E<160||E>55295&&E<57344||E>64975&&E<65008||(65535&E)==65535||(65535&E)==65534||E>1114111?"":String.fromCodePoint(E)}let al=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decode(h,g,E){if(g)return g;let _=E.charCodeAt(0);if(35===_){let h=E.charCodeAt(1),g=120===h||88===h;return decodeNumericCharacterReference(E.slice(g?2:1),g?16:10)}return decodeNamedCharacterReference(E)||h}function stringifyPosition(h){return h&&"object"==typeof h?"position"in h||"type"in h?unist_util_stringify_position_lib_position(h.position):"start"in h||"end"in h?unist_util_stringify_position_lib_position(h):"line"in h||"column"in h?unist_util_stringify_position_lib_point(h):"":""}function unist_util_stringify_position_lib_point(h){return index(h&&h.line)+":"+index(h&&h.column)}function unist_util_stringify_position_lib_position(h){return unist_util_stringify_position_lib_point(h&&h.start)+"-"+unist_util_stringify_position_lib_point(h&&h.end)}function index(h){return h&&"number"==typeof h?h:1}let ac={}.hasOwnProperty;function mdast_util_from_markdown_lib_point(h){return{line:h.line,column:h.column,offset:h.offset}}function defaultOnError(h,g){if(h)throw Error("Cannot close `"+h.type+"` ("+stringifyPosition({start:h.start,end:h.end})+"): a different token (`"+g.type+"`, "+stringifyPosition({start:g.start,end:g.end})+") is open");throw Error("Cannot close document, a token (`"+g.type+"`, "+stringifyPosition({start:g.start,end:g.end})+") is still open")}function remarkParse(h){let g=this;g.parser=function(E){var _,A;let b,C,k,S;return"string"!=typeof(_={...g.data("settings"),...h,extensions:g.data("micromarkExtensions")||[],mdastExtensions:g.data("fromMarkdownExtensions")||[]})&&(A=_,_=void 0),(function(h){let g={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:opener(link),autolinkProtocol:onenterdata,autolinkEmail:onenterdata,atxHeading:opener(heading),blockQuote:opener(function(){return{type:"blockquote",children:[]}}),characterEscape:onenterdata,characterReference:onenterdata,codeFenced:opener(codeFlow),codeFencedFenceInfo:buffer,codeFencedFenceMeta:buffer,codeIndented:opener(codeFlow,buffer),codeText:opener(function(){return{type:"inlineCode",value:""}},buffer),codeTextData:onenterdata,data:onenterdata,codeFlowValue:onenterdata,definition:opener(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:buffer,definitionLabelString:buffer,definitionTitleString:buffer,emphasis:opener(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:opener(hardBreak),hardBreakTrailing:opener(hardBreak),htmlFlow:opener(html,buffer),htmlFlowData:onenterdata,htmlText:opener(html,buffer),htmlTextData:onenterdata,image:opener(function(){return{type:"image",title:null,url:"",alt:null}}),label:buffer,link:opener(link),listItem:opener(function(h){return{type:"listItem",spread:h._spread,checked:null,children:[]}}),listItemValue:function(h){if(this.data.expectingFirstListItemValue){let g=this.stack[this.stack.length-2];g.start=Number.parseInt(this.sliceSerialize(h),10),this.data.expectingFirstListItemValue=void 0}},listOrdered:opener(list,function(){this.data.expectingFirstListItemValue=!0}),listUnordered:opener(list),paragraph:opener(function(){return{type:"paragraph",children:[]}}),reference:function(){this.data.referenceType="collapsed"},referenceString:buffer,resourceDestinationString:buffer,resourceTitleString:buffer,setextHeading:opener(heading),strong:opener(function(){return{type:"strong",children:[]}}),thematicBreak:opener(function(){return{type:"thematicBreak"}})},exit:{atxHeading:closer(),atxHeadingSequence:function(h){let g=this.stack[this.stack.length-1];if(!g.depth){let E=this.sliceSerialize(h).length;g.depth=E}},autolink:closer(),autolinkEmail:function(h){onexitdata.call(this,h);let g=this.stack[this.stack.length-1];g.url="mailto:"+this.sliceSerialize(h)},autolinkProtocol:function(h){onexitdata.call(this,h);let g=this.stack[this.stack.length-1];g.url=this.sliceSerialize(h)},blockQuote:closer(),characterEscapeValue:onexitdata,characterReferenceMarkerHexadecimal:onexitcharacterreferencemarker,characterReferenceMarkerNumeric:onexitcharacterreferencemarker,characterReferenceValue:function(h){let g;let E=this.sliceSerialize(h),_=this.data.characterReferenceType;if(_)g=decodeNumericCharacterReference(E,"characterReferenceMarkerNumeric"===_?10:16),this.data.characterReferenceType=void 0;else{let h=decodeNamedCharacterReference(E);g=h}let A=this.stack.pop();A.value+=g,A.position.end=mdast_util_from_markdown_lib_point(h.end)},codeFenced:closer(function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.value=h.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}),codeFencedFence:function(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)},codeFencedFenceInfo:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.lang=h},codeFencedFenceMeta:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.meta=h},codeFlowValue:onexitdata,codeIndented:closer(function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.value=h.replace(/(\r?\n|\r)$/g,"")}),codeText:closer(function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.value=h}),codeTextData:onexitdata,data:onexitdata,definition:closer(),definitionDestinationString:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.url=h},definitionLabelString:function(h){let g=this.resume(),E=this.stack[this.stack.length-1];E.label=g,E.identifier=normalizeIdentifier(this.sliceSerialize(h)).toLowerCase()},definitionTitleString:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.title=h},emphasis:closer(),hardBreakEscape:closer(onexithardbreak),hardBreakTrailing:closer(onexithardbreak),htmlFlow:closer(function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.value=h}),htmlFlowData:onexitdata,htmlText:closer(function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.value=h}),htmlTextData:onexitdata,image:closer(function(){let h=this.stack[this.stack.length-1];if(this.data.inReference){let g=this.data.referenceType||"shortcut";h.type+="Reference",h.referenceType=g,delete h.url,delete h.title}else delete h.identifier,delete h.label;this.data.referenceType=void 0}),label:function(){let h=this.stack[this.stack.length-1],g=this.resume(),E=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===E.type){let g=h.children;E.children=g}else E.alt=g},labelText:function(h){let g=this.sliceSerialize(h),E=this.stack[this.stack.length-2];E.label=g.replace(al,decode),E.identifier=normalizeIdentifier(g).toLowerCase()},lineEnding:function(h){let E=this.stack[this.stack.length-1];if(this.data.atHardBreak){let g=E.children[E.children.length-1];g.position.end=mdast_util_from_markdown_lib_point(h.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&g.canContainEols.includes(E.type)&&(onenterdata.call(this,h),onexitdata.call(this,h))},link:closer(function(){let h=this.stack[this.stack.length-1];if(this.data.inReference){let g=this.data.referenceType||"shortcut";h.type+="Reference",h.referenceType=g,delete h.url,delete h.title}else delete h.identifier,delete h.label;this.data.referenceType=void 0}),listItem:closer(),listOrdered:closer(),listUnordered:closer(),paragraph:closer(),referenceString:function(h){let g=this.resume(),E=this.stack[this.stack.length-1];E.label=g,E.identifier=normalizeIdentifier(this.sliceSerialize(h)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.url=h},resourceTitleString:function(){let h=this.resume(),g=this.stack[this.stack.length-1];g.title=h},resource:function(){this.data.inReference=void 0},setextHeading:closer(function(){this.data.setextHeadingSlurpLineEnding=void 0}),setextHeadingLineSequence:function(h){let g=this.stack[this.stack.length-1];g.depth=61===this.sliceSerialize(h).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:closer(),thematicBreak:closer()}};(function configure(h,g){let E=-1;for(;++E<g.length;){let _=g[E];Array.isArray(_)?configure(h,_):function(h,g){let E;for(E in g)if(ac.call(g,E))switch(E){case"canContainEols":{let _=g[E];_&&h[E].push(..._);break}case"transforms":{let _=g[E];_&&h[E].push(..._);break}case"enter":case"exit":{let _=g[E];_&&Object.assign(h[E],_)}}}(h,_)}})(g,(h||{}).mdastExtensions||[]);let E={};return function(h){let _={type:"root",children:[]},A={stack:[_],tokenStack:[],config:g,enter,exit,buffer,resume,data:E},b=[],C=-1;for(;++C<h.length;)if("listOrdered"===h[C][1].type||"listUnordered"===h[C][1].type){if("enter"===h[C][0])b.push(C);else{let g=b.pop();C=function(h,g,E){let _,A,b,C,k=g-1,S=-1,N=!1;for(;++k<=E;){let g=h[k];switch(g[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===g[0]?S++:S--,C=void 0;break;case"lineEndingBlank":"enter"===g[0]&&(!_||C||S||b||(b=k),C=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:C=void 0}if(!S&&"enter"===g[0]&&"listItemPrefix"===g[1].type||-1===S&&"exit"===g[0]&&("listUnordered"===g[1].type||"listOrdered"===g[1].type)){if(_){let C=k;for(A=void 0;C--;){let g=h[C];if("lineEnding"===g[1].type||"lineEndingBlank"===g[1].type){if("exit"===g[0])continue;A&&(h[A][1].type="lineEndingBlank",N=!0),g[1].type="lineEnding",A=C}else if("linePrefix"===g[1].type||"blockQuotePrefix"===g[1].type||"blockQuotePrefixWhitespace"===g[1].type||"blockQuoteMarker"===g[1].type||"listItemIndent"===g[1].type);else break}b&&(!A||b<A)&&(_._spread=!0),_.end=Object.assign({},A?h[A][1].start:g[1].end),h.splice(A||k,0,["exit",_,g[2]]),k++,E++}if("listItemPrefix"===g[1].type){let A={type:"listItem",_spread:!1,start:Object.assign({},g[1].start),end:void 0};_=A,h.splice(k,0,["enter",A,g[2]]),k++,E++,b=void 0,C=!0}}}return h[g][1]._spread=N,E}(h,g,C)}}for(C=-1;++C<h.length;){let E=g[h[C][0]];ac.call(E,h[C][1].type)&&E[h[C][1].type].call(Object.assign({sliceSerialize:h[C][2].sliceSerialize},A),h[C][1])}if(A.tokenStack.length>0){let h=A.tokenStack[A.tokenStack.length-1],g=h[1]||defaultOnError;g.call(A,void 0,h[0])}for(_.position={start:mdast_util_from_markdown_lib_point(h.length>0?h[0][1].start:{line:1,column:1,offset:0}),end:mdast_util_from_markdown_lib_point(h.length>0?h[h.length-2][1].end:{line:1,column:1,offset:0})},C=-1;++C<g.transforms.length;)_=g.transforms[C](_)||_;return _};function opener(h,g){return function(E){enter.call(this,h(E),E),g&&g.call(this,E)}}function buffer(){this.stack.push({type:"fragment",children:[]})}function enter(h,g,E){let _=this.stack[this.stack.length-1],A=_.children;A.push(h),this.stack.push(h),this.tokenStack.push([g,E]),h.position={start:mdast_util_from_markdown_lib_point(g.start),end:void 0}}function closer(h){return function(g){h&&h.call(this,g),exit.call(this,g)}}function exit(h,g){let E=this.stack.pop(),_=this.tokenStack.pop();if(_){if(_[0].type!==h.type){if(g)g.call(this,h,_[0]);else{let g=_[1]||defaultOnError;g.call(this,h,_[0])}}}else throw Error("Cannot close `"+h.type+"` ("+stringifyPosition({start:h.start,end:h.end})+"): its not open");E.position.end=mdast_util_from_markdown_lib_point(h.end)}function resume(){return lib_toString(this.stack.pop())}function onenterdata(h){let g=this.stack[this.stack.length-1],E=g.children,_=E[E.length-1];_&&"text"===_.type||((_={type:"text",value:""}).position={start:mdast_util_from_markdown_lib_point(h.start),end:void 0},E.push(_)),this.stack.push(_)}function onexitdata(h){let g=this.stack.pop();g.value+=this.sliceSerialize(h),g.position.end=mdast_util_from_markdown_lib_point(h.end)}function onexithardbreak(){this.data.atHardBreak=!0}function onexitcharacterreferencemarker(h){this.data.characterReferenceType=h.type}function codeFlow(){return{type:"code",lang:null,meta:null,value:""}}function heading(){return{type:"heading",depth:0,children:[]}}function hardBreak(){return{type:"break"}}function html(){return{type:"html",value:""}}function link(){return{type:"link",title:null,url:"",children:[]}}function list(h){return{type:"list",ordered:"listOrdered"===h.type,start:null,spread:h._spread,children:[]}}})(A)(function(h){for(;!subtokenize(h););return h}((function(h){let g=combineExtensions([ek,...(h||{}).extensions||[]]),E={defined:[],lazy:{},constructs:g,content:create(iI),document:create(ik),flow:create(iO),string:create(iD),text:create(iL)};return E;function create(h){return function(g){return function(h,g,E){let _=Object.assign(E?Object.assign({},E):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),A={},b=[],C=[],k=[],S={consume:function(h){markdownLineEnding(h)?(_.line++,_.column=1,_.offset+=-3===h?2:1,accountForPotentialSkip()):-1!==h&&(_.column++,_.offset++),_._bufferIndex<0?_._index++:(_._bufferIndex++,_._bufferIndex===C[_._index].length&&(_._bufferIndex=-1,_._index++)),N.previous=h},enter:function(h,g){let E=g||{};return E.type=h,E.start=now(),N.events.push(["enter",E,N]),k.push(E),E},exit:function(h){let g=k.pop();return g.end=now(),N.events.push(["exit",g,N]),g},attempt:constructFactory(function(h,g){addResult(h,g.from)}),check:constructFactory(onsuccessfulcheck),interrupt:constructFactory(onsuccessfulcheck,{interrupt:!0})},N={previous:null,code:null,containerState:{},events:[],parser:h,sliceStream,sliceSerialize:function(h,g){return function(h,g){let E,_=-1,A=[];for(;++_<h.length;){let b;let C=h[_];if("string"==typeof C)b=C;else switch(C){case -5:b="\r";break;case -4:b="\n";break;case -3:b="\r\n";break;case -2:b=g?" ":"	";break;case -1:if(!g&&E)continue;b=" ";break;default:b=String.fromCharCode(C)}E=-2===C,A.push(b)}return A.join("")}(sliceStream(h),g)},now,defineSkip:function(h){A[h.line]=h.column,accountForPotentialSkip()},write:function(h){return(C=push(C,h),function(){let h;for(;_._index<C.length;){var g;let E=C[_._index];if("string"==typeof E)for(h=_._index,_._bufferIndex<0&&(_._bufferIndex=0);_._index===h&&_._bufferIndex<E.length;)g=E.charCodeAt(_._bufferIndex),w=w(g);else w=w(E)}}(),null!==C[C.length-1])?[]:(addResult(g,0),N.events=resolveAll(b,N.events,N),N.events)}},w=g.tokenize.call(N,S);return g.resolveAll&&b.push(g),N;function sliceStream(h){return function(h,g){let E;let _=g.start._index,A=g.start._bufferIndex,b=g.end._index,C=g.end._bufferIndex;if(_===b)E=[h[_].slice(A,C)];else{if(E=h.slice(_,b),A>-1){let h=E[0];"string"==typeof h?E[0]=h.slice(A):E.shift()}C>0&&E.push(h[b].slice(0,C))}return E}(C,h)}function now(){let{line:h,column:g,offset:E,_index:A,_bufferIndex:b}=_;return{line:h,column:g,offset:E,_index:A,_bufferIndex:b}}function onsuccessfulcheck(h,g){g.restore()}function constructFactory(h,g){return function(E,A,b){let C,w,R,L;return Array.isArray(E)?handleListOfConstructs(E):"tokenize"in E?handleListOfConstructs([E]):function(h){let g=null!==h&&E[h],_=null!==h&&E.null,A=[...Array.isArray(g)?g:g?[g]:[],...Array.isArray(_)?_:_?[_]:[]];return handleListOfConstructs(A)(h)};function handleListOfConstructs(h){return(C=h,w=0,0===h.length)?b:handleConstruct(h[w])}function handleConstruct(h){return function(E){return(L=function(){let h=now(),g=N.previous,E=N.currentConstruct,A=N.events.length,b=Array.from(k);return{restore:function(){_=h,N.previous=g,N.currentConstruct=E,N.events.length=A,k=b,accountForPotentialSkip()},from:A}}(),R=h,h.partial||(N.currentConstruct=h),h.name&&N.parser.constructs.disable.null.includes(h.name))?nok(E):h.tokenize.call(g?Object.assign(Object.create(N),g):N,S,ok,nok)(E)}}function ok(g){return h(R,L),A}function nok(h){return(L.restore(),++w<C.length)?handleConstruct(C[w]):b}}}function addResult(h,g){h.resolveAll&&!b.includes(h)&&b.push(h),h.resolve&&splice(N.events,g,N.events.length-g,h.resolve(N.events.slice(g),N)),h.resolveTo&&(N.events=h.resolveTo(N.events,N))}function accountForPotentialSkip(){_.line in A&&_.column<2&&(_.column=A[_.line],_.offset+=A[_.line]-1)}}(E,h,g)}}})(A).document().write((C=1,k="",S=!0,function(h,g,E){let _,A,N,w,R;let L=[];for(h=k+("string"==typeof h?h.toString():new TextDecoder(g||void 0).decode(h)),N=0,k="",S&&(65279===h.charCodeAt(0)&&N++,S=void 0);N<h.length;){if(ao.lastIndex=N,w=(_=ao.exec(h))&&void 0!==_.index?_.index:h.length,R=h.charCodeAt(w),!_){k=h.slice(N);break}if(10===R&&N===w&&b)L.push(-3),b=void 0;else switch(b&&(L.push(-5),b=void 0),N<w&&(L.push(h.slice(N,w)),C+=w-N),R){case 0:L.push(65533),C++;break;case 9:for(A=4*Math.ceil(C/4),L.push(-2);C++<A;)L.push(-1);break;case 10:L.push(-4),C=1;break;default:b=!0,C=1}N=w+1}return E&&(b&&L.push(-5),k&&L.push(k),L.push(null)),L})(E,_,!0))))}}function normalizeUri(h){let g=[],E=-1,_=0,A=0;for(;++E<h.length;){let b=h.charCodeAt(E),C="";if(37===b&&r4(h.charCodeAt(E+1))&&r4(h.charCodeAt(E+2)))A=2;else if(b<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(b))||(C=String.fromCharCode(b));else if(b>55295&&b<57344){let g=h.charCodeAt(E+1);b<56320&&g>56319&&g<57344?(C=String.fromCharCode(b,g),A=1):C=""}else C=String.fromCharCode(b);C&&(g.push(h.slice(_,E),encodeURIComponent(C)),_=E+A+1,C=""),A&&(E+=A,A=0)}return g.join("")+h.slice(_)}function defaultFootnoteBackContent(h,g){let E=[{type:"text",value:""}];return g>1&&E.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(g)}]}),E}function defaultFootnoteBackLabel(h,g){return"Back to reference "+(h+1)+(g>1?"-"+g:"")}let au=unist_util_position_lib_point("end"),ad=unist_util_position_lib_point("start");function unist_util_position_lib_point(h){return function(g){let E=g&&g.position&&g.position[h]||{};if("number"==typeof E.line&&E.line>0&&"number"==typeof E.column&&E.column>0)return{line:E.line,column:E.column,offset:"number"==typeof E.offset&&E.offset>-1?E.offset:void 0}}}function revert(h,g){let E=g.referenceType,_="]";if("collapsed"===E?_+="[]":"full"===E&&(_+="["+(g.label||g.identifier)+"]"),"imageReference"===g.type)return[{type:"text",value:"!["+g.alt+_}];let A=h.all(g),b=A[0];b&&"text"===b.type?b.value="["+b.value:A.unshift({type:"text",value:"["});let C=A[A.length-1];return C&&"text"===C.type?C.value+=_:A.push({type:"text",value:_}),A}function listItemLoose(h){let g=h.spread;return null==g?h.children.length>1:g}function trimLine(h,g,E){let _=0,A=h.length;if(g){let g=h.codePointAt(_);for(;9===g||32===g;)_++,g=h.codePointAt(_)}if(E){let g=h.codePointAt(A-1);for(;9===g||32===g;)A--,g=h.codePointAt(A-1)}return A>_?h.slice(_,A):""}let ap={blockquote:function(h,g){let E={type:"element",tagName:"blockquote",properties:{},children:h.wrap(h.all(g),!0)};return h.patch(g,E),h.applyData(g,E)},break:function(h,g){let E={type:"element",tagName:"br",properties:{},children:[]};return h.patch(g,E),[h.applyData(g,E),{type:"text",value:"\n"}]},code:function(h,g){let E=g.value?g.value+"\n":"",_={};g.lang&&(_.className=["language-"+g.lang]);let A={type:"element",tagName:"code",properties:_,children:[{type:"text",value:E}]};return g.meta&&(A.data={meta:g.meta}),h.patch(g,A),A={type:"element",tagName:"pre",properties:{},children:[A=h.applyData(g,A)]},h.patch(g,A),A},delete:function(h,g){let E={type:"element",tagName:"del",properties:{},children:h.all(g)};return h.patch(g,E),h.applyData(g,E)},emphasis:function(h,g){let E={type:"element",tagName:"em",properties:{},children:h.all(g)};return h.patch(g,E),h.applyData(g,E)},footnoteReference:function(h,g){let E;let _="string"==typeof h.options.clobberPrefix?h.options.clobberPrefix:"user-content-",A=String(g.identifier).toUpperCase(),b=normalizeUri(A.toLowerCase()),C=h.footnoteOrder.indexOf(A),k=h.footnoteCounts.get(A);void 0===k?(k=0,h.footnoteOrder.push(A),E=h.footnoteOrder.length):E=C+1,k+=1,h.footnoteCounts.set(A,k);let S={type:"element",tagName:"a",properties:{href:"#"+_+"fn-"+b,id:_+"fnref-"+b+(k>1?"-"+k:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(E)}]};h.patch(g,S);let N={type:"element",tagName:"sup",properties:{},children:[S]};return h.patch(g,N),h.applyData(g,N)},heading:function(h,g){let E={type:"element",tagName:"h"+g.depth,properties:{},children:h.all(g)};return h.patch(g,E),h.applyData(g,E)},html:function(h,g){if(h.options.allowDangerousHtml){let E={type:"raw",value:g.value};return h.patch(g,E),h.applyData(g,E)}},imageReference:function(h,g){let E=String(g.identifier).toUpperCase(),_=h.definitionById.get(E);if(!_)return revert(h,g);let A={src:normalizeUri(_.url||""),alt:g.alt};null!==_.title&&void 0!==_.title&&(A.title=_.title);let b={type:"element",tagName:"img",properties:A,children:[]};return h.patch(g,b),h.applyData(g,b)},image:function(h,g){let E={src:normalizeUri(g.url)};null!==g.alt&&void 0!==g.alt&&(E.alt=g.alt),null!==g.title&&void 0!==g.title&&(E.title=g.title);let _={type:"element",tagName:"img",properties:E,children:[]};return h.patch(g,_),h.applyData(g,_)},inlineCode:function(h,g){let E={type:"text",value:g.value.replace(/\r?\n|\r/g," ")};h.patch(g,E);let _={type:"element",tagName:"code",properties:{},children:[E]};return h.patch(g,_),h.applyData(g,_)},linkReference:function(h,g){let E=String(g.identifier).toUpperCase(),_=h.definitionById.get(E);if(!_)return revert(h,g);let A={href:normalizeUri(_.url||"")};null!==_.title&&void 0!==_.title&&(A.title=_.title);let b={type:"element",tagName:"a",properties:A,children:h.all(g)};return h.patch(g,b),h.applyData(g,b)},link:function(h,g){let E={href:normalizeUri(g.url)};null!==g.title&&void 0!==g.title&&(E.title=g.title);let _={type:"element",tagName:"a",properties:E,children:h.all(g)};return h.patch(g,_),h.applyData(g,_)},listItem:function(h,g,E){let _=h.all(g),A=E?function(h){let g=!1;if("list"===h.type){g=h.spread||!1;let E=h.children,_=-1;for(;!g&&++_<E.length;)g=listItemLoose(E[_])}return g}(E):listItemLoose(g),b={},C=[];if("boolean"==typeof g.checked){let h;let E=_[0];E&&"element"===E.type&&"p"===E.tagName?h=E:(h={type:"element",tagName:"p",properties:{},children:[]},_.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:g.checked,disabled:!0},children:[]}),b.className=["task-list-item"]}let k=-1;for(;++k<_.length;){let h=_[k];(A||0!==k||"element"!==h.type||"p"!==h.tagName)&&C.push({type:"text",value:"\n"}),"element"!==h.type||"p"!==h.tagName||A?C.push(h):C.push(...h.children)}let S=_[_.length-1];S&&(A||"element"!==S.type||"p"!==S.tagName)&&C.push({type:"text",value:"\n"});let N={type:"element",tagName:"li",properties:b,children:C};return h.patch(g,N),h.applyData(g,N)},list:function(h,g){let E={},_=h.all(g),A=-1;for("number"==typeof g.start&&1!==g.start&&(E.start=g.start);++A<_.length;){let h=_[A];if("element"===h.type&&"li"===h.tagName&&h.properties&&Array.isArray(h.properties.className)&&h.properties.className.includes("task-list-item")){E.className=["contains-task-list"];break}}let b={type:"element",tagName:g.ordered?"ol":"ul",properties:E,children:h.wrap(_,!0)};return h.patch(g,b),h.applyData(g,b)},paragraph:function(h,g){let E={type:"element",tagName:"p",properties:{},children:h.all(g)};return h.patch(g,E),h.applyData(g,E)},root:function(h,g){let E={type:"root",children:h.wrap(h.all(g))};return h.patch(g,E),h.applyData(g,E)},strong:function(h,g){let E={type:"element",tagName:"strong",properties:{},children:h.all(g)};return h.patch(g,E),h.applyData(g,E)},table:function(h,g){let E=h.all(g),_=E.shift(),A=[];if(_){let E={type:"element",tagName:"thead",properties:{},children:h.wrap([_],!0)};h.patch(g.children[0],E),A.push(E)}if(E.length>0){let _={type:"element",tagName:"tbody",properties:{},children:h.wrap(E,!0)},b=ad(g.children[1]),C=au(g.children[g.children.length-1]);b&&C&&(_.position={start:b,end:C}),A.push(_)}let b={type:"element",tagName:"table",properties:{},children:h.wrap(A,!0)};return h.patch(g,b),h.applyData(g,b)},tableCell:function(h,g){let E={type:"element",tagName:"td",properties:{},children:h.all(g)};return h.patch(g,E),h.applyData(g,E)},tableRow:function(h,g,E){let _=E?E.children:void 0,A=_?_.indexOf(g):1,b=0===A?"th":"td",C=E&&"table"===E.type?E.align:void 0,k=C?C.length:g.children.length,S=-1,N=[];for(;++S<k;){let E=g.children[S],_={},A=C?C[S]:void 0;A&&(_.align=A);let k={type:"element",tagName:b,properties:_,children:[]};E&&(k.children=h.all(E),h.patch(E,k),k=h.applyData(E,k)),N.push(k)}let w={type:"element",tagName:"tr",properties:{},children:h.wrap(N,!0)};return h.patch(g,w),h.applyData(g,w)},text:function(h,g){let E={type:"text",value:function(h){let g=String(h),E=/\r?\n|\r/g,_=E.exec(g),A=0,b=[];for(;_;)b.push(trimLine(g.slice(A,_.index),A>0,!0),_[0]),A=_.index+_[0].length,_=E.exec(g);return b.push(trimLine(g.slice(A),A>0,!1)),b.join("")}(String(g.value))};return h.patch(g,E),h.applyData(g,E)},thematicBreak:function(h,g){let E={type:"element",tagName:"hr",properties:{},children:[]};return h.patch(g,E),h.applyData(g,E)},toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}let ah={}.hasOwnProperty,af={};function state_patch(h,g){h.position&&(g.position=function(h){let g=ad(h),E=au(h);if(g&&E)return{start:g,end:E}}(h))}function applyData(h,g){let E=g;if(h&&h.data){let g=h.data.hName,_=h.data.hChildren,A=h.data.hProperties;if("string"==typeof g){if("element"===E.type)E.tagName=g;else{let h="children"in E?E.children:[E];E={type:"element",tagName:g,properties:{},children:h}}}"element"===E.type&&A&&Object.assign(E.properties,n_(A)),"children"in E&&E.children&&null!=_&&(E.children=_)}return E}function defaultUnknownHandler(h,g){let E=g.data||{},_="value"in g&&!(ah.call(E,"hProperties")||ah.call(E,"hChildren"))?{type:"text",value:g.value}:{type:"element",tagName:"div",properties:{},children:h.all(g)};return h.patch(g,_),h.applyData(g,_)}function wrap(h,g){let E=[],_=-1;for(g&&E.push({type:"text",value:"\n"});++_<h.length;)_&&E.push({type:"text",value:"\n"}),E.push(h[_]);return g&&h.length>0&&E.push({type:"text",value:"\n"}),E}function trimMarkdownSpaceStart(h){let g=0,E=h.charCodeAt(g);for(;9===E||32===E;)g++,E=h.charCodeAt(g);return h.slice(g)}function toHast(h,g){let E=function(h,g){let E=g||af,_=new Map,A=new Map,b=new Map,C={...ap,...E.handlers},k={all:function(h){let g=[];if("children"in h){let E=h.children,_=-1;for(;++_<E.length;){let A=k.one(E[_],h);if(A){if(_&&"break"===E[_-1].type&&(Array.isArray(A)||"text"!==A.type||(A.value=trimMarkdownSpaceStart(A.value)),!Array.isArray(A)&&"element"===A.type)){let h=A.children[0];h&&"text"===h.type&&(h.value=trimMarkdownSpaceStart(h.value))}Array.isArray(A)?g.push(...A):g.push(A)}}}return g},applyData,definitionById:_,footnoteById:A,footnoteCounts:b,footnoteOrder:[],handlers:C,one:function(h,g){let E=h.type,_=k.handlers[E];if(ah.call(k.handlers,E)&&_)return _(k,h,g);if(k.options.passThrough&&k.options.passThrough.includes(E)){if("children"in h){let{children:g,...E}=h,_=n_(E);return _.children=k.all(h),_}return n_(h)}let A=k.options.unknownHandler||defaultUnknownHandler;return A(k,h,g)},options:E,patch:state_patch,wrap};return lib_visit(h,function(h){if("definition"===h.type||"footnoteDefinition"===h.type){let g="definition"===h.type?_:A,E=String(h.identifier).toUpperCase();g.has(E)||g.set(E,h)}}),k}(h,g),_=E.one(h,void 0),A=function(h){let g="string"==typeof h.options.clobberPrefix?h.options.clobberPrefix:"user-content-",E=h.options.footnoteBackContent||defaultFootnoteBackContent,_=h.options.footnoteBackLabel||defaultFootnoteBackLabel,A=h.options.footnoteLabel||"Footnotes",b=h.options.footnoteLabelTagName||"h2",C=h.options.footnoteLabelProperties||{className:["sr-only"]},k=[],S=-1;for(;++S<h.footnoteOrder.length;){let A=h.footnoteById.get(h.footnoteOrder[S]);if(!A)continue;let b=h.all(A),C=String(A.identifier).toUpperCase(),N=normalizeUri(C.toLowerCase()),w=0,R=[],L=h.footnoteCounts.get(C);for(;void 0!==L&&++w<=L;){R.length>0&&R.push({type:"text",value:" "});let h="string"==typeof E?E:E(S,w);"string"==typeof h&&(h={type:"text",value:h}),R.push({type:"element",tagName:"a",properties:{href:"#"+g+"fnref-"+N+(w>1?"-"+w:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof _?_:_(S,w),className:["data-footnote-backref"]},children:Array.isArray(h)?h:[h]})}let P=b[b.length-1];if(P&&"element"===P.type&&"p"===P.tagName){let h=P.children[P.children.length-1];h&&"text"===h.type?h.value+=" ":P.children.push({type:"text",value:" "}),P.children.push(...R)}else b.push(...R);let z={type:"element",tagName:"li",properties:{id:g+"fn-"+N},children:h.wrap(b,!0)};h.patch(A,z),k.push(z)}if(0!==k.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:b,properties:{...n_(C),id:"footnote-label"},children:[{type:"text",value:A}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:h.wrap(k,!0)},{type:"text",value:"\n"}]}}(E),b=Array.isArray(_)?{type:"root",children:_}:_||{type:"root",children:[]};return A&&b.children.push({type:"text",value:"\n"},A),b}function remarkRehype(h,g){return h&&"run"in h?async function(E,_){let A=toHast(E,{file:_,...g});await h.run(A,_)}:function(E,_){return toHast(E,{file:_,...g||h})}}function bail(h){if(h)throw h}var am=E(4470);function is_plain_obj_isPlainObject(h){if("object"!=typeof h||null===h)return!1;let g=Object.getPrototypeOf(h);return(null===g||g===Object.prototype||null===Object.getPrototypeOf(g))&&!(Symbol.toStringTag in h)&&!(Symbol.iterator in h)}let VFileMessage=class VFileMessage extends Error{constructor(h,g,E){super(),"string"==typeof g&&(E=g,g=void 0);let _="",A={},b=!1;if(g&&(A="line"in g&&"column"in g?{place:g}:"start"in g&&"end"in g?{place:g}:"type"in g?{ancestors:[g],place:g.position}:{...g}),"string"==typeof h?_=h:!A.cause&&h&&(b=!0,_=h.message,A.cause=h),!A.ruleId&&!A.source&&"string"==typeof E){let h=E.indexOf(":");-1===h?A.ruleId=E:(A.source=E.slice(0,h),A.ruleId=E.slice(h+1))}if(!A.place&&A.ancestors&&A.ancestors){let h=A.ancestors[A.ancestors.length-1];h&&(A.place=h.position)}let C=A.place&&"start"in A.place?A.place.start:A.place;this.ancestors=A.ancestors||void 0,this.cause=A.cause||void 0,this.column=C?C.column:void 0,this.fatal=void 0,this.file,this.message=_,this.line=C?C.line:void 0,this.name=stringifyPosition(A.place)||"1:1",this.place=A.place||void 0,this.reason=this.message,this.ruleId=A.ruleId||void 0,this.source=A.source||void 0,this.stack=b&&A.cause&&"string"==typeof A.cause.stack?A.cause.stack:"",this.actual,this.expected,this.note,this.url}};VFileMessage.prototype.file="",VFileMessage.prototype.name="",VFileMessage.prototype.reason="",VFileMessage.prototype.message="",VFileMessage.prototype.stack="",VFileMessage.prototype.column=void 0,VFileMessage.prototype.line=void 0,VFileMessage.prototype.ancestors=void 0,VFileMessage.prototype.cause=void 0,VFileMessage.prototype.fatal=void 0,VFileMessage.prototype.place=void 0,VFileMessage.prototype.ruleId=void 0,VFileMessage.prototype.source=void 0;let ag={basename:function(h,g){let E;if(void 0!==g&&"string"!=typeof g)throw TypeError('"ext" argument must be a string');assertPath(h);let _=0,A=-1,b=h.length;if(void 0===g||0===g.length||g.length>h.length){for(;b--;)if(47===h.codePointAt(b)){if(E){_=b+1;break}}else A<0&&(E=!0,A=b+1);return A<0?"":h.slice(_,A)}if(g===h)return"";let C=-1,k=g.length-1;for(;b--;)if(47===h.codePointAt(b)){if(E){_=b+1;break}}else C<0&&(E=!0,C=b+1),k>-1&&(h.codePointAt(b)===g.codePointAt(k--)?k<0&&(A=b):(k=-1,A=C));return _===A?A=C:A<0&&(A=h.length),h.slice(_,A)},dirname:function(h){let g;if(assertPath(h),0===h.length)return".";let E=-1,_=h.length;for(;--_;)if(47===h.codePointAt(_)){if(g){E=_;break}}else g||(g=!0);return E<0?47===h.codePointAt(0)?"/":".":1===E&&47===h.codePointAt(0)?"//":h.slice(0,E)},extname:function(h){let g;assertPath(h);let E=h.length,_=-1,A=0,b=-1,C=0;for(;E--;){let k=h.codePointAt(E);if(47===k){if(g){A=E+1;break}continue}_<0&&(g=!0,_=E+1),46===k?b<0?b=E:1!==C&&(C=1):b>-1&&(C=-1)}return b<0||_<0||0===C||1===C&&b===_-1&&b===A+1?"":h.slice(b,_)},join:function(...h){let g,E=-1;for(;++E<h.length;)assertPath(h[E]),h[E]&&(g=void 0===g?h[E]:g+"/"+h[E]);return void 0===g?".":function(h){assertPath(h);let g=47===h.codePointAt(0),E=function(h,g){let E,_,A="",b=0,C=-1,k=0,S=-1;for(;++S<=h.length;){if(S<h.length)E=h.codePointAt(S);else if(47===E)break;else E=47;if(47===E){if(C===S-1||1===k);else if(C!==S-1&&2===k){if(A.length<2||2!==b||46!==A.codePointAt(A.length-1)||46!==A.codePointAt(A.length-2)){if(A.length>2){if((_=A.lastIndexOf("/"))!==A.length-1){_<0?(A="",b=0):b=(A=A.slice(0,_)).length-1-A.lastIndexOf("/"),C=S,k=0;continue}}else if(A.length>0){A="",b=0,C=S,k=0;continue}}g&&(A=A.length>0?A+"/..":"..",b=2)}else A.length>0?A+="/"+h.slice(C+1,S):A=h.slice(C+1,S),b=S-C-1;C=S,k=0}else 46===E&&k>-1?k++:k=-1}return A}(h,!g);return 0!==E.length||g||(E="."),E.length>0&&47===h.codePointAt(h.length-1)&&(E+="/"),g?"/"+E:E}(g)},sep:"/"};function assertPath(h){if("string"!=typeof h)throw TypeError("Path must be a string. Received "+JSON.stringify(h))}function isUrl(h){return!!(null!==h&&"object"==typeof h&&"href"in h&&h.href&&"protocol"in h&&h.protocol&&void 0===h.auth)}let aE=["history","path","basename","stem","extname","dirname"];let VFile=class VFile{constructor(h){let g,E;g=h?isUrl(h)?{path:h}:"string"==typeof h||h&&"object"==typeof h&&"byteLength"in h&&"byteOffset"in h?{value:h}:h:{},this.cwd="/",this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let _=-1;for(;++_<aE.length;){let h=aE[_];h in g&&void 0!==g[h]&&null!==g[h]&&(this[h]="history"===h?[...g[h]]:g[h])}for(E in g)aE.includes(E)||(this[E]=g[E])}get basename(){return"string"==typeof this.path?ag.basename(this.path):void 0}set basename(h){assertNonEmpty(h,"basename"),assertPart(h,"basename"),this.path=ag.join(this.dirname||"",h)}get dirname(){return"string"==typeof this.path?ag.dirname(this.path):void 0}set dirname(h){lib_assertPath(this.basename,"dirname"),this.path=ag.join(h||"",this.basename)}get extname(){return"string"==typeof this.path?ag.extname(this.path):void 0}set extname(h){if(assertPart(h,"extname"),lib_assertPath(this.dirname,"extname"),h){if(46!==h.codePointAt(0))throw Error("`extname` must start with `.`");if(h.includes(".",1))throw Error("`extname` cannot contain multiple dots")}this.path=ag.join(this.dirname,this.stem+(h||""))}get path(){return this.history[this.history.length-1]}set path(h){isUrl(h)&&(h=function(h){if("string"==typeof h)h=new URL(h);else if(!isUrl(h)){let g=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+h+"`");throw g.code="ERR_INVALID_ARG_TYPE",g}if("file:"!==h.protocol){let h=TypeError("The URL must be of scheme file");throw h.code="ERR_INVALID_URL_SCHEME",h}return function(h){if(""!==h.hostname){let h=TypeError('File URL host must be "localhost" or empty on darwin');throw h.code="ERR_INVALID_FILE_URL_HOST",h}let g=h.pathname,E=-1;for(;++E<g.length;)if(37===g.codePointAt(E)&&50===g.codePointAt(E+1)){let h=g.codePointAt(E+2);if(70===h||102===h){let h=TypeError("File URL path must not include encoded / characters");throw h.code="ERR_INVALID_FILE_URL_PATH",h}}return decodeURIComponent(g)}(h)}(h)),assertNonEmpty(h,"path"),this.path!==h&&this.history.push(h)}get stem(){return"string"==typeof this.path?ag.basename(this.path,this.extname):void 0}set stem(h){assertNonEmpty(h,"stem"),assertPart(h,"stem"),this.path=ag.join(this.dirname||"",h+(this.extname||""))}fail(h,g,E){let _=this.message(h,g,E);throw _.fatal=!0,_}info(h,g,E){let _=this.message(h,g,E);return _.fatal=void 0,_}message(h,g,E){let _=new VFileMessage(h,g,E);return this.path&&(_.name=this.path+":"+_.name,_.file=this.path),_.fatal=!1,this.messages.push(_),_}toString(h){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;let g=new TextDecoder(h||void 0);return g.decode(this.value)}};function assertPart(h,g){if(h&&h.includes(ag.sep))throw Error("`"+g+"` cannot be a path: did not expect `"+ag.sep+"`")}function assertNonEmpty(h,g){if(!h)throw Error("`"+g+"` cannot be empty")}function lib_assertPath(h,g){if(!h)throw Error("Setting `"+g+"` requires `path` to be set too")}let CallableInstance=function(h){let g=this.constructor,E=g.prototype,_=E[h],apply=function(){return _.apply(apply,arguments)};Object.setPrototypeOf(apply,E);let A=Object.getOwnPropertyNames(_);for(let h of A){let g=Object.getOwnPropertyDescriptor(_,h);g&&Object.defineProperty(apply,h,g)}return apply},aT={}.hasOwnProperty;let Processor=class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=function(){let h=[],g={run:function(...g){let E=-1,_=g.pop();if("function"!=typeof _)throw TypeError("Expected function as last argument, not "+_);(function next(A,...b){let C=h[++E],k=-1;if(A){_(A);return}for(;++k<g.length;)(null===b[k]||void 0===b[k])&&(b[k]=g[k]);g=b,C?(function(h,g){let E;return function(...g){let _;let A=h.length>g.length;A&&g.push(done);try{_=h.apply(this,g)}catch(h){if(A&&E)throw h;return done(h)}A||(_ instanceof Promise?_.then(then,done):_ instanceof Error?done(_):then(_))};function done(h,..._){E||(E=!0,g(h,..._))}function then(h){done(null,h)}})(C,next)(...b):_(null,...b)})(null,...g)},use:function(E){if("function"!=typeof E)throw TypeError("Expected `middelware` to be a function, not "+E);return h.push(E),g}};return g}()}copy(){let h=new Processor,g=-1;for(;++g<this.attachers.length;){let E=this.attachers[g];h.use(...E)}return h.data(am(!0,{},this.namespace)),h}data(h,g){return"string"==typeof h?2==arguments.length?(assertUnfrozen("data",this.frozen),this.namespace[h]=g,this):aT.call(this.namespace,h)&&this.namespace[h]||void 0:h?(assertUnfrozen("data",this.frozen),this.namespace=h,this):this.namespace}freeze(){if(this.frozen)return this;for(;++this.freezeIndex<this.attachers.length;){let[h,...g]=this.attachers[this.freezeIndex];if(!1===g[0])continue;!0===g[0]&&(g[0]=void 0);let E=h.call(this,...g);"function"==typeof E&&this.transformers.use(E)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(h){this.freeze();let g=vfile(h),E=this.parser||this.Parser;return assertParser("parse",E),E(String(g),g)}process(h,g){let E=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),g?executor(void 0,g):new Promise(executor);function executor(_,A){let b=vfile(h),C=E.parse(b);function realDone(h,E){h||!E?A(h):_?_(E):g(void 0,E)}E.run(C,b,function(h,g,_){if(h||!g||!_)return realDone(h);let A=E.stringify(g,_);"string"==typeof A||A&&"object"==typeof A&&"byteLength"in A&&"byteOffset"in A?_.value=A:_.result=A,realDone(h,_)})}}processSync(h){let g,E=!1;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(h,function(h,_){E=!0,bail(h),g=_}),assertDone("processSync","process",E),g}run(h,g,E){assertNode(h),this.freeze();let _=this.transformers;return E||"function"!=typeof g||(E=g,g=void 0),E?executor(void 0,E):new Promise(executor);function executor(A,b){let C=vfile(g);_.run(h,C,function(g,_,C){let k=_||h;g?b(g):A?A(k):E(void 0,k,C)})}}runSync(h,g){let E,_=!1;return this.run(h,g,function(h,g){bail(h),E=g,_=!0}),assertDone("runSync","run",_),E}stringify(h,g){this.freeze();let E=vfile(g),_=this.compiler||this.Compiler;return assertCompiler("stringify",_),assertNode(h),_(h,E)}use(h,...g){let E=this.attachers,_=this.namespace;if(assertUnfrozen("use",this.frozen),null==h);else if("function"==typeof h)addPlugin(h,g);else if("object"==typeof h)Array.isArray(h)?addList(h):addPreset(h);else throw TypeError("Expected usable value, not `"+h+"`");return this;function addPreset(h){if(!("plugins"in h)&&!("settings"in h))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");addList(h.plugins),h.settings&&(_.settings=am(!0,_.settings,h.settings))}function addList(h){let g=-1;if(null==h);else if(Array.isArray(h))for(;++g<h.length;){let E=h[g];!function(h){if("function"==typeof h)addPlugin(h,[]);else if("object"==typeof h){if(Array.isArray(h)){let[g,...E]=h;addPlugin(g,E)}else addPreset(h)}else throw TypeError("Expected usable value, not `"+h+"`")}(E)}else throw TypeError("Expected a list of plugins, not `"+h+"`")}function addPlugin(h,g){let _=-1,A=-1;for(;++_<E.length;)if(E[_][0]===h){A=_;break}if(-1===A)E.push([h,...g]);else if(g.length>0){let[_,...b]=g,C=E[A][1];is_plain_obj_isPlainObject(C)&&is_plain_obj_isPlainObject(_)&&(_=am(!0,C,_)),E[A]=[h,_,...b]}}}};let a_=new Processor().freeze();function assertParser(h,g){if("function"!=typeof g)throw TypeError("Cannot `"+h+"` without `parser`")}function assertCompiler(h,g){if("function"!=typeof g)throw TypeError("Cannot `"+h+"` without `compiler`")}function assertUnfrozen(h,g){if(g)throw Error("Cannot call `"+h+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(h){if(!is_plain_obj_isPlainObject(h)||"string"!=typeof h.type)throw TypeError("Expected node, got `"+h+"`")}function assertDone(h,g,E){if(!E)throw Error("`"+h+"` finished async. Use `"+g+"` instead")}function vfile(h){return h&&"object"==typeof h&&"message"in h&&"messages"in h?h:new VFile(h)}var aA={exports:{}},ay={};aA.exports=function(){if(ev)return ay;ev=1;var h=Symbol.for("react.element"),g=Symbol.for("react.fragment"),E=Object.prototype.hasOwnProperty,_=eO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A={key:!0,ref:!0,__self:!0,__source:!0};function x(g,b,C){var k,S={},N=null,w=null;for(k in void 0!==C&&(N=""+C),void 0!==b.key&&(N=""+b.key),void 0!==b.ref&&(w=b.ref),b)E.call(b,k)&&!A.hasOwnProperty(k)&&(S[k]=b[k]);if(g&&g.defaultProps)for(k in b=g.defaultProps)void 0===S[k]&&(S[k]=b[k]);return{$$typeof:h,type:g,key:N,ref:w,props:S,_owner:_.current}}return ay.Fragment=g,ay.jsx=x,ay.jsxs=x,ay}();var av=aA.exports;async function mr(h){let g=await a_().use(remarkParse).use(remarkGfm).use(remarkRehype,{allowDangerousHtml:!0}).use(rehypeRaw).use(rehypeStringify).processSync(h);return String(g)}var ab=E(4921);let ax={annotations:[],manifest:void 0,searchString:void 0,options:{offset:0},vault:new Vault};function te(h,g){switch(g.type){case"updateAnnotations":return{...h,annotations:g.payload};case"updateSearchString":return{...h,searchString:g.payload};default:return h}}let aC=(0,eO.createContext)({dispatch:()=>null,state:ax}),scroll_re=h=>{let{children:g,manifest:E}=h,_={...ax.options,...h.options},[A,b]=(0,eO.useReducer)(te,ax);return eO.createElement(aC.Provider,{value:{state:{...A,manifest:E,options:_},dispatch:b}},g)},scroll_ne=(h,g="none")=>{if(!h)return null;if("string"==typeof h)return[h];if(!h[g]){let g=Object.getOwnPropertyNames(h);if(g.length>0)return h[g[0]]}return h[g]&&Array.isArray(h[g])?h[g]:null},scroll_A=(h,g="none",E=", ")=>{let _=scroll_ne(h,g);return Array.isArray(_)?_.join(`${E}`):_};function scroll_M(h,g){let E=Object.keys(h).filter(h=>g.includes(h)?null:h),_={};return E.forEach(g=>{_[g]=h[g]}),_}let{styled:aI,css:ak,keyframes:aS,createTheme:aN}=(0,ew.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:{xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"}}),aw=aI("span",{}),scroll_F=h=>{let{as:g,label:E}=h,_=scroll_M(h,["as","label"]);return eO.createElement(aw,{as:g,..._},scroll_A(E,_.lang))};aI("img",{objectFit:"cover"}),aI("a",{});let aO={delimiter:", "},aR=(0,eO.createContext)(void 0),de=()=>{let h=(0,eO.useContext)(aR);if(void 0===h)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return h},me=({children:h,initialState:g=aO})=>{let E=ue(g,"delimiter");return eO.createElement(aR.Provider,{value:{delimiter:E}},h)},ue=(h,g)=>Object.hasOwn(h,g)?h[g].toString():void 0,aD=aI("span",{}),H=h=>{let{as:g,markup:E}=h,{delimiter:_}=de();if(!E)return eO.createElement(eO.Fragment,null);let A=scroll_M(h,["as","markup"]),b={__html:nf(scroll_A(E,A.lang,_),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return eO.createElement(aD,{as:g,...A,dangerouslySetInnerHTML:b})},he=h=>eO.useContext(aR)?eO.createElement(H,{...h}):eO.createElement(me,null,eO.createElement(H,{...h}));aI("span",{}),aI("dl",{}),aI("li",{}),aI("ul",{}),aI("li",{}),aI("ul",{}),aI("dl",{}),aI("li",{}),aI("ul",{});let ge=h=>{let{as:g,summary:E}=h,_=scroll_M(h,["as","customValueDelimiter","summary"]);return eO.createElement(he,{as:g,markup:E,..._})},aL=aI("div",{display:"flex",flexDirection:"column",justifyContent:"space-between"}),aP=aI("aside",{margin:"0",padding:"0",position:"relative",zIndex:2,flexGrow:"1",flexShrink:"0",[`& ${aL}`]:{position:"absolute",width:"50%",top:0},"&.anchor":{[`& ${aL}`]:{position:"fixed",width:"50%"}}}),aM=aI("header",{display:"flex",justifyContent:"space-between",fontSize:"1",flexGrow:"1",flexShrink:"0",marginBottom:"1.618rem",strong:{fontWeight:"400",fontSize:"1.33rem"}}),aF=aI("section",{margin:"0",gap:"1rem"}),we=({label:h})=>eO.createElement(aM,null,eO.createElement("strong",null,eO.createElement(scroll_F,{label:h}))),aB=aI("article",{transition:"all 0.382s ease-in-out",display:"flex",flexDirection:"row",flexWrap:"nowrap",gap:"2.618rem"}),aH=aI("div",{transition:"$all",width:"50%",opacity:0,transform:"translateX(2.618rem)",zIndex:-1}),aU=aI("div",{width:"50%",display:"flex",flexDirection:"column",justifyContent:"flex-start"}),az=aI("hr",{margin:"0",borderColor:"transparent",height:"1.618rem",position:"relative",zIndex:0,display:"flex",justifyContent:"flex-end",marginTop:"2.618rem","&::before":{content:"attr(aria-label)",position:"absolute",right:"1.618rem",bottom:"0",zIndex:1,display:"flex",fontSize:"0.7222rem",fontWeight:"400",lineHeight:"1rem",background:"inherit",opacity:.7},"&::after":{content:"",width:"100%",position:"absolute",zIndex:0,height:"1px",background:"#6662"}}),aG=aI("div",{position:"relative",zIndex:"1",display:"flex",flexDirection:"column",gap:"2.618rem","&[data-figures-visible='true']":{[`& ${aH}`]:{opacity:1,zIndex:0,transform:"translateX(0)"}}}),Ie=({canvas:h,canvasInfo:{current:g,total:E}})=>eO.createElement("figcaption",null,eO.createElement("em",null,g," / ",E),(null==h?void 0:h.label)&&eO.createElement(scroll_F,{label:null==h?void 0:h.label}),(null==h?void 0:h.summary)&&eO.createElement(ge,{summary:null==h?void 0:h.summary,as:"p"})),a$=window.OpenSeadragon;if(!a$&&!(a$=eS))throw Error("OpenSeadragon is missing.");let aj="http://www.w3.org/2000/svg";a$.Viewer&&(a$.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new scroll_V(this)),this._svgOverlayInfo});let scroll_V=function(h){let g=this;this._viewer=h,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(aj,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(aj,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){g.resize()}),this._viewer.addHandler("open",function(){g.resize()}),this._viewer.addHandler("rotate",function(){g.resize()}),this._viewer.addHandler("flip",function(){g.resize()}),this._viewer.addHandler("resize",function(){g.resize()}),this.resize()};scroll_V.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let h=this._viewer.viewport.pixelFromPoint(new a$.Point(0,0),!0),g=this._viewer.viewport.getZoom(!0),E=this._viewer.viewport.getRotation(),_=this._viewer.viewport.getFlip(),A=this._viewer.viewport._containerInnerSize.x,b=A*g,C=b;_&&(b=-b,h.x=-h.x+A),this._node.setAttribute("transform","translate("+h.x+","+h.y+") scale("+b+","+C+") rotate("+E+")")},onClick:function(h,g){new a$.MouseTracker({element:h,clickHandler:g}).setTracking(!0)}};let ke=h=>fetch(`${h.replace(/\/$/,"")}/info.json`).then(h=>h.json()).then(h=>h).catch(g=>{console.error(`The IIIF tilesource ${h.replace(/\/$/,"")}/info.json failed to load: ${g}`)}),Ce=h=>{let g,E;return Array.isArray(h)&&(g=h[0])&&(E="@id"in g?g["@id"]:g.id),E};var aV=((et=aV||{}).TiledImage="tiledImage",et.SimpleImage="simpleImage",et);let ze=h=>{let g=Array.isArray(null==h?void 0:h.service)&&(null==h?void 0:h.service.length)>0,E=g?Ce(null==h?void 0:h.service):null==h?void 0:h.id,_=g?aV.TiledImage:aV.SimpleImage;return{uri:E,imageType:_}},$e=(h,g)=>{let E=g?aV.TiledImage:aV.SimpleImage;return{uri:h,imageType:E}},aq=aI("div",{display:"flex",flexDirection:"column",alignItems:"center"}),aW=aI("p",{fontWeight:"bold",fontSize:"x-large"}),aY=aI("span",{fontSize:"medium"}),Ae=({error:h})=>{let{message:g}=h;return eO.createElement(aq,{role:"alert"},eO.createElement(aW,{"data-testid":"headline"},"Something went wrong"),g&&eO.createElement(aY,null,`Error message: ${g}`," "))},aQ=aI("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),aX=aI("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),aK=aI("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${aQ}`]:{display:"block"}},false:{[`${aQ}`]:{display:"none"}}}}}),aZ=aI("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),scroll_E=({className:h,id:g,label:E,children:_})=>{let A=E.toLowerCase().replace(/\s/g,"-");return eO.createElement(aZ,{id:g,className:h,"data-testid":"openseadragon-button","data-button":A},eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${g}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",{id:`${g}-svg-title`},E),_))},aJ=aI("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),Re=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),scroll_Te=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),We=()=>eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),Oe=()=>eO.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),scroll_T=()=>eO.createElement(eO.Fragment,null,eO.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),eO.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),De=({_cloverViewerHasPlaceholder:h,config:g})=>eO.createElement(aJ,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:h},g.showZoomControl&&eO.createElement(eO.Fragment,null,eO.createElement(scroll_E,{id:g.zoomInButton,label:"zoom in"},eO.createElement(Re,null)),eO.createElement(scroll_E,{id:g.zoomOutButton,label:"zoom out"},eO.createElement(scroll_Te,null))),g.showFullPageControl&&eO.createElement(scroll_E,{id:g.fullPageButton,label:"full page"},eO.createElement(We,null)),g.showRotationControl&&eO.createElement(eO.Fragment,null,eO.createElement(scroll_E,{id:g.rotateRightButton,label:"rotate right"},eO.createElement(scroll_T,null)),eO.createElement(scroll_E,{id:g.rotateLeftButton,label:"rotate left"},eO.createElement(scroll_T,null))),g.showHomeControl&&eO.createElement(scroll_E,{id:g.homeButton,label:"reset"},eO.createElement(Oe,null))),je=({ariaLabel:h,config:g,uri:E,_cloverViewerHasPlaceholder:_,imageType:A,openSeadragonCallback:b})=>{let[C,k]=(0,eO.useState)(),[S,N]=(0,eO.useState)(),w=(0,eO.useRef)(!1);return(0,eO.useEffect)(()=>(w.current||(w.current=!0,S||N(eS(g))),()=>null==S?void 0:S.destroy()),[]),(0,eO.useEffect)(()=>{S&&b&&b(S)},[S,b]),(0,eO.useEffect)(()=>{S&&E!==C&&(null==S||S.forceRedraw(),k(E))},[S,C,E]),(0,eO.useEffect)(()=>{if(C&&S)switch(A){case"simpleImage":null==S||S.addSimpleImage({url:C});break;case"tiledImage":ke(C).then(h=>{try{if(!h)throw Error(`No tile source found for ${C}`);null==S||S.addTiledImage({tileSource:h})}catch(h){console.error(h)}});break;default:null==S||S.close(),console.warn(`Unable to render ${C} in OpenSeadragon as type: "${A}"`)}},[A,C]),eO.createElement(aK,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":g.id,hasNavigator:g.showNavigator},eO.createElement(De,{_cloverViewerHasPlaceholder:_,config:g}),g.showNavigator&&eO.createElement(aQ,{id:g.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),eO.createElement(aX,{id:g.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...h&&{"aria-label":h}}))},Ne=({_cloverViewerHasPlaceholder:h=!1,body:g,instanceId:E,isTiledImage:_=!1,label:A,src:b="",openSeadragonCallback:C,openSeadragonConfig:k={}})=>{let S=E||esm_browser_v4(),N="string"==typeof A?A:scroll_A(A),w={id:`openseadragon-${S}`,navigatorId:`openseadragon-navigator-${S}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${S}`,homeButton:`reset-${S}`,rotateLeftButton:`rotateLeft-${S}`,rotateRightButton:`rotateRight-${S}`,zoomInButton:`zoomIn-${S}`,zoomOutButton:`zoomOut-${S}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...k},{imageType:R,uri:L}=g?ze(g):$e(b,_);return L?eO.createElement(eN.SV,{FallbackComponent:Ae},eO.createElement(je,{_cloverViewerHasPlaceholder:h,ariaLabel:N,config:w,imageType:R,key:S,uri:L,openSeadragonCallback:C})):null},a0=aI("div",{width:"100%",height:"400px",background:"#6662",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"}),Xe=({body:h,label:g})=>eO.createElement(a0,{"data-testid":"scroll-figure-image"},eO.createElement(Ne,{body:h,openSeadragonConfig:{showNavigator:!1,showHomeControl:!1},...g&&{label:g}})),a1=aI("figure",{figcaption:{display:"flex",flexDirection:"column",margin:"1.618rem 0 0",opacity:.9,em:{fontSize:"0.9em",fontStyle:"normal",opacity:.7}}}),Ge=(h,g,E,_)=>{var A,b;let C={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(C.canvas=h.get(g),C.canvas&&(C.annotationPage=h.get(C.canvas.items[0]),C.accompanyingCanvas=null!=(A=C.canvas)&&A.accompanyingCanvas?h.get(null==(b=C.canvas)?void 0:b.accompanyingCanvas):void 0),C.annotationPage){let A=h.get(C.annotationPage.items).map(g=>({body:h.get(g.body[0].id),motivation:g.motivation,type:"Annotation"})),b=[];A.forEach(g=>{"Choice"===g.body.type?g.body.items.forEach(E=>b.push({...g,id:E.id,body:h.get(E.id)})):b.push(g)}),C.annotations=b.filter(A=>{if(A){if(!A.body||!A.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",A);return}let b=A.body;Array.isArray(b)&&(b=b[0]);let C=h.get(b.id);if(C)switch(E){case"painting":return A.target===g.id&&A.motivation&&"painting"===A.motivation[0]&&_.includes(C.type)&&(A.body=C),!!A;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return C},qe=(h,g)=>{let E=Ge(h,{id:g,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==E.annotations.length&&E.annotations&&E.annotations)return E.annotations.map(h=>null==h?void 0:h.body)},Ke=({canvas:h,canvasInfo:g})=>{let{state:E}=(0,eO.useContext)(aC),{vault:_}=E,A=qe(_,h.id);return A?eO.createElement(a1,null,null==A?void 0:A.map(g=>eO.createElement(Xe,{body:g,key:null==g?void 0:g.id,label:null==h?void 0:h.label})),eO.createElement(Ie,{canvas:h,canvasInfo:g})):null},a2="255, 197, 32",a3=aI("div",{ul:{padding:"1rem"},li:{listStyleType:"disc",li:{listStyleType:"circle"}},"span.highlight":{position:"relative",fontWeight:"bold","&::before":{top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",borderRadius:"3px",border:`1px solid rgba(${a2}, 0.2)`,borderBottom:`1px solid rgba(${a2}, 0.618)`,boxShadow:"1px 1px 1px #6661"},"&::after":{left:"0",top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",marginTop:"-1px",borderRadius:"3px",backgroundColor:`rgba(${a2}, 0.2)`,zIndex:-1}}}),Je=({searchString:h="",content:g,stringLength:E=150})=>{let _=g.toLowerCase().indexOf(h.toLowerCase());if(-1!==_){let A=Math.max(0,_-E/2),b=Math.min(g.length,_+h.length+E/2);if(A>0){let h=g.lastIndexOf(" ",A+1);A=h>0?h+1:A}if(b<g.length){let h=g.indexOf(" ",b-1);b=h>-1?h:b}g=(A>0?"... ":"")+g.substring(A,b)+(b<g.length?" ...":"")}else g=g.substring(0,E)+"...";return g},scroll_N=({body:h,stringLength:g,type:E="content"})=>{let _;let{state:A}=(0,eO.useContext)(aC),{searchString:b}=A,C=String(h.value);"snippet"==E&&(C=Je({searchString:b,content:C,stringLength:g}));let k=function(h){let[g,E]=eO.useState("");return eO.useEffect(()=>{(async()=>{let g=await mr(h);E(g)})()},[h]),{html:g,jsx:av.jsx("div",{dangerouslySetInnerHTML:{__html:g}})}}(C);if("text/plain"===h.format&&(_=null==C?void 0:C.replace(/\n/g,"<br />")),"text/markdown"===h.format&&(_=null==k?void 0:k.html),"text/html"===h.format&&(_=C),b&&_){let h=RegExp(`(${b})`,"gi");_=null==_?void 0:_.replace(h,h=>`<span class="highlight">${h}</span>`)}let S=[h.id,E].join("-"),N=["ar"].includes(String(h.language));return _?eO.createElement(a3,{dangerouslySetInnerHTML:{__html:_},"data-body-id":S,"data-testid":"scroll-item-body",id:S,dir:N?"rtl":"ltr",css:{fontSize:N?"1.3em":"1em"}}):null},a4=eO.memo(({hasItemBreak:h,isLastItem:g,item:E,itemCount:_,itemNumber:A})=>{var b;let{state:C}=eO.useContext(aC),{annotations:k,vault:S}=C,N=null==S?void 0:S.get(E),w=null==(b=null==k?void 0:k.filter(h=>h.target===E.id))?void 0:b.map(h=>{var g;return null==(g=null==h?void 0:h.body)?void 0:g.map((h,g)=>eO.createElement(scroll_N,{body:h,key:g}))}),R={current:A,total:_};return eO.createElement(aB,{"data-page-break":h,"data-page-number":A,"data-last-item":g},eO.createElement(aH,null,N&&eO.createElement(Ke,{canvas:N,canvasInfo:R})),eO.createElement(aU,null,(null==N?void 0:N.label)&&eO.createElement("strong",null,eO.createElement(scroll_F,{label:null==N?void 0:N.label})," ",`(${R.current} / ${R.total})`),eO.createElement("div",null,w||eO.createElement("p",null,"[Blank]")),h&&eO.createElement(az,{"aria-label":"Page Break"})))}),a5="255, 197, 32",a6=aI("span",{fontWeight:"700"}),a8=aI("div",{display:"flex",gap:"0.25rem"}),a9=aI("div",{fontSize:"0.9rem",padding:"1rem 0.618rem"}),a7=aI("div",{display:"flex",flexDirection:"column",gap:"0.5rem",hr:{margin:"0.618rem",border:"none",borderBottom:"1px solid #6662"},button:{backgroundColor:"#6660",opacity:"0.7",transition:"$all",padding:"0.5rem 0.618rem",fontSize:"0.9rem",lineHeight:"1.1rem",textAlign:"left",borderRadius:"6px",border:"1px solid #6662",display:"flex",flexDirection:"column",gap:"0.25rem","&:hover":{opacity:"1",boxShadow:"5px 5px 13px #6662"},"&[data-result=true]":{backgroundColor:`rgba(${a5}, 0.2)`,borderColor:`rgba(${a5}, 0.2)`,opacity:"1","&:hover":{backgroundColor:`rgba(${a5}, 0.2)`}}}}),oe=aI("input",{margin:"0",padding:"0 1rem 0 2rem",background:"none",zIndex:"2",height:"2rem",marginLeft:"1rem",marginTop:"1rem",justifyContent:"center",display:"flex",alignItems:"center",fontSize:"1rem",borderRadius:"2rem",fontFamily:"inherit",backgroundColor:"$primary",border:"none",color:"$secondary",cursor:"text",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important",flexGrow:"0",width:"100%","&:placeholder":{color:"inherit"}}),ot=aI("span",{position:"absolute",zIndex:"3",width:"2rem",height:"2rem",padding:"8px",marginTop:"1rem",marginLeft:"1rem",color:"$secondary",fill:"$secondary",stroke:"$secondary",transition:"$all",cursor:"text"}),on=aI("button",{opacity:"1",display:"flex",alignItems:"center",borderRadius:"2rem",width:"2rem",height:"2rem",alignSelf:"center",marginTop:"1rem",gap:"0.35rem",backgroundColor:"$accent",fill:"$secondary",flexShrink:"0",svg:{padding:"6px",color:"inherit",fill:"inherit"},'&[aria-disabled="true"]':{opacity:"0",display:"none"}}),oi=aI("form",{display:"flex",justifyContent:"space-between",gap:"1rem",width:"100%",variants:{isPanelExpanded:{true:{[`${ot}`]:{marginLeft:"0"},[`& ${oe}`]:{marginLeft:"0",backgroundColor:"$primary",width:"auto",flexGrow:"1"}},false:{}}}}),oa=aI("div",{}),scroll_W=({annotation:h,isResult:g})=>{var E,_;let A=[null==(E=null==h?void 0:h.body)?void 0:E.id,"content"].join("-"),a=h=>{var g;h&&(null==(g=document.getElementById(h))||g.scrollIntoView({behavior:"smooth"}))};return eO.createElement("button",{"data-result":g?"true":"false",onClick:()=>a(A),key:A},eO.createElement(a8,null,eO.createElement(a6,null,h.motivation),eO.createElement("span",null,null==(_=null==h?void 0:h.body)?void 0:_.language)),eO.createElement(scroll_N,{body:h.body,stringLength:144,type:"snippet"}))},st=({results:h})=>eO.createElement(a7,null,h.found.map(h=>eO.createElement(scroll_W,{annotation:h,isResult:!0,key:h.id})),eO.createElement("hr",null),h.notFound.map(h=>eO.createElement(scroll_W,{annotation:h,key:h.id}))),oo={charset:"latin:extra, arabic:extra, cyrillic:extra, cjk:extra",optimize:!0,tokenize:"full",resolution:9,document:{id:"id",index:"content"}},scroll_dt=()=>{var h;let{state:g}=(0,eO.useContext)(aC),{annotations:E,searchString:_=""}=g,A=new ab.Z.Document(oo),b=[];function i(h){return h.map(h=>null==E?void 0:E.filter(g=>g.body.find(g=>g.id===h)).map(g=>{let E=g.body.findIndex(g=>g.id===h);return{...g,body:g.body[E]}}).shift())}null==E||E.forEach(h=>{var g;null==(g=null==h?void 0:h.body)||g.forEach(h=>{var g;let E=null==(g=null==h?void 0:h.value)?void 0:g.replace(/\n/g,"");b.push(null==h?void 0:h.id),A.add({id:null==h?void 0:h.id,content:E})})});let C=null==A?void 0:A.search(_).reduce((h,g)=>[...new Set([...h,...g.result])],[]),k={found:i(C),notFound:i(b.filter(h=>!C.includes(h)))};return eO.createElement(oa,null,_&&eO.createElement(a9,null,null==(h=k.found)?void 0:h.length," results for ",eO.createElement("strong",null,_)),eO.createElement(st,{results:k}))},mt=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Search"),eO.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),ut=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Close"),eO.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),pt=({togglePanel:h,isPanelExpanded:g})=>{let{dispatch:E,state:_}=(0,eO.useContext)(aC),{searchString:A}=_,b=(0,eO.useRef)(null),l=()=>b.current===document.activeElement&&h(!0),s=()=>{var g;null==(g=b.current)||g.blur(),u(),h(!1),E({payload:"",type:"updateSearchString"})},u=()=>{b.current&&(b.current.value="")},p=h=>{"Escape"===h.key&&(h.preventDefault(),s())};return(0,eO.useEffect)(()=>(null==document||document.addEventListener("keydown",p),()=>{null==document||document.removeEventListener("keydown",p)}),[]),(0,eO.useEffect)(()=>{if(null!=b&&b.current)return b.current.addEventListener("focus",l),b.current.addEventListener("blur",l),()=>{b.current&&(b.current.removeEventListener("focus",l),b.current.removeEventListener("blur",l))}},[]),eO.createElement(oi,{id:"scroll-search",autoComplete:"off",isPanelExpanded:g},eO.createElement(ot,{onClick:()=>{var h;return null==(h=null==b?void 0:b.current)?void 0:h.focus()}},eO.createElement(mt,null)),eO.createElement(oe,{ref:b,name:"clover-search",type:"text",placeholder:"Search...",defaultValue:A,onChange:h=>{var g;E({payload:null==(g=null==h?void 0:h.target)?void 0:g.value,type:"updateSearchString"})}}),eO.createElement(on,{"aria-disabled":!g,"aria-label":"Close search panel",onClick:h=>{h.preventDefault(),s()},disabled:!g},eO.createElement(ut,null)))},os=aI("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maxWidth:"100%",marginTop:"1rem",transition:"$all",variants:{isPanelExpanded:{true:{zIndex:1,opacity:1,transform:"translateX(0)"},false:{zIndex:-1,opacity:0,transform:"translateX(-2.618rem)",transitionDelay:"0",transition:"none"}}}}),gt=h=>{let[g,E]=(0,eO.useState)({top:0,left:0});return(0,eO.useEffect)(()=>{let a=()=>{if(h.current){let g=h.current.getBoundingClientRect();E({top:g.top,left:g.left})}};return window.addEventListener("scroll",a),window.addEventListener("resize",a),a(),()=>{window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}},[h]),g},ft=({isPanelExpanded:h,handlePanel:g})=>{var E;let _=(0,eO.useRef)(null),{state:A}=(0,eO.useContext)(aC),{options:b}=A,{offset:C}=b,{top:k}=gt(_),S=!!k&&k<C,N=null==(E=null==_?void 0:_.current)?void 0:E.offsetWidth,w=N&&.5*N,R={top:S?C:0,width:`calc(${w}px - 1.318rem)`,maxWidth:h?"100%":`${w?w-315:180}px`,minWidth:"130px"};return eO.createElement(aP,{ref:_,className:S?"anchor":"","data-testid":"scroll-panel"},eO.createElement(aL,{style:R},eO.createElement(pt,{togglePanel:g,isPanelExpanded:h}),eO.createElement(os,{"data-testid":"scroll-panel-results","data-panel-expanded":h,isPanelExpanded:h},h&&eO.createElement(scroll_dt,null))))},xt=({items:h})=>{let[g,E]=(0,eO.useState)(!1);return eO.createElement(eO.Fragment,null,eO.createElement(ft,{isPanelExpanded:g,handlePanel:h=>E(h)}),eO.createElement(aG,{"data-figures-visible":!g},h.map((g,E)=>{let _=E+1,A=_===h.length;return eO.createElement(a4,{item:g,hasItemBreak:_<h.length,isLastItem:A,key:g.id,itemCount:h.length,itemNumber:_})})))},vt=(h,g)=>{let[E,_]=(0,eO.useState)([]);return(0,eO.useEffect)(()=>{if(!g)return;let E=[];null==h||h.forEach(h=>{var _;let A=g.get(h);null==(_=null==A?void 0:A.annotations)||_.forEach(h=>{var _;let A=g.get(h);null==(_=null==A?void 0:A.items)||_.forEach(h=>{var _;let A=g.get(h);A&&E.push({...A,body:null==(_=null==A?void 0:A.body)?void 0:_.map(h=>g.get(h))})})})});let A=E.reduce((h,g)=>(h.some(h=>h.id===g.id)||h.push(g),h),[]);_(A)},[h,g]),E},wt=({iiifContent:h})=>{let[g,E]=(0,eO.useState)(),{state:_,dispatch:A}=(0,eO.useContext)(aC),{vault:b}=_,C=vt(null==g?void 0:g.items,b);return(0,eO.useEffect)(()=>{b&&b.load(h).then(h=>h&&E(h)).catch(g=>console.error(`Manifest ${h} failed to load: ${g}`))},[h,b]),(0,eO.useEffect)(()=>{A({type:"updateAnnotations",payload:C})},[C,A]),g?eO.createElement(aF,null,g.label&&eO.createElement(we,{label:g.label}),g.items&&eO.createElement(xt,{items:g.items})):null},Ft=({iiifContent:h,options:g})=>eO.createElement(scroll_re,{options:g},eO.createElement(wt,{iiifContent:h}));var ol=E(9897),oc=E(334),ou=E(434),od=E(150),op=E(9821),oh=E(1876).Buffer;function esm_p(h){return h.endsWith("info.json")?h:h.endsWith("/")?`${h}info.json`:`${h}/info.json`}let of="http://library.stanford.edu/iiif/image-api/compliance.html#level1",om="http://library.stanford.edu/iiif/image-api/compliance.html#level2",og="http://library.stanford.edu/iiif/image-api/conformance.html#level1",oE="http://library.stanford.edu/iiif/image-api/conformance.html#level2",oT="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",o_="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",oA="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",oy="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",ov="http://iiif.io/api/image/1/level1.json",ob="http://iiif.io/api/image/1/profiles/level1.json",ox="http://iiif.io/api/image/1/level2.json",oC="http://iiif.io/api/image/1/profiles/level2.json",oI="http://iiif.io/api/image/2/level1.json",oS="http://iiif.io/api/image/2/profiles/level1.json",oN="http://iiif.io/api/image/2/level2.json",ow="http://iiif.io/api/image/2/profiles/level2.json",oO="level1",oR="level2",oD="http://iiif.io/api/image/2/level1",oL="http://iiif.io/api/image/2/level2",oP=[oL,om,oE,o_,oy,ox,oC,oN,ow,oR],oM=[...oP,oD,of,og,oT,oA,ov,ob,oI,oS,oO],oF=["http://iiif.io/api/image/2/level0",oD,oL,"http://library.stanford.edu/iiif/image-api/compliance.html#level0",of,om,"http://library.stanford.edu/iiif/image-api/conformance.html#level0",og,oE,"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",oT,o_,"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",oA,oy,"http://iiif.io/api/image/1/level0.json","http://iiif.io/api/image/1/profiles/level0.json",ov,ob,ox,oC,"http://iiif.io/api/image/2/level0.json","http://iiif.io/api/image/2/profiles/level0.json",oI,oS,oN,ow,"level0",oO,oR],oB={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["sizeByWhListed"]},oH={extraFormats:["jpg"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPx","regionSquare","sizeByWhListed","sizeByH","sizeByW","sizeByWh"]},oU={extraFormats:["jpg","png"],extraQualities:["default"],extraFeatures:["baseUriRedirect","cors","jsonldMediaType","regionByPct","regionByPx","regionSquare","rotationBy90s","sizeByWhListed","sizeByConfinedWh","sizeByH","sizeByPct","sizeByW","sizeByWh"]};function esm_h(h){return h["@id"]?h["@id"]:h.id?h.id:void 0}function esm_w(h){if(!h||!h.profile||!esm_h(h))return!1;let g=Array.isArray(h.profile)?h.profile:[h.profile];for(let h of g)if("string"==typeof h&&-1!==oF.indexOf(h))return!0;return!1}function v(h,g){if(g&&g.profile){let E=g.profile;if(E){let g=Array.isArray(E)?E:[E];return g.includes(`level${h}`)||g.includes(`http://iiif.io/api/image/2/level${h}.json`)||g.includes(`http://iiif.io/api/image/1/level${h}.json`)||g.includes(`http://iiif.io/api/image/1/profiles/level${h}.json`)}}return!1}function esm_F(h){return esm_w(h)?v(0,h)?0:v(1,h)?1:v(2,h)?2:null:null}function esm_X(h){return -1!==(h["@context"]?Array.isArray(h["@context"])?h["@context"]:[h["@context"]]:[]).indexOf("http://iiif.io/api/image/3/context.json")}function esm_Y(h){let g=h.match(/^.*\/(full)\/(((\d+),(\d+)?)|max)\/(\d+)\/default\.(jpg|png|jpeg)$/);if(g){let E=g[1],_=parseInt(g[4],10),A=parseInt(g[5],10),b=g[7];if(("max"===E||"full"===E)&&_&&A&&b)return{type:"fixed",id:h,height:A,width:_}}return{type:"unknown",id:h}}function esm_q(h){let g=[],E=h.length;for(let _=0;_<E;_++){let E=function(h){return esm_w(h)?(h&&h.sizes?h.sizes:[]).map(g=>({id:esm_h(h),type:"fixed-service",height:g.height,width:g.width,level:esm_F(h),version:esm_X(h)?3:2})):[]}(h[_]);E.length&&g.push(...E);let A=function(h){if(!function(h){if(!esm_w(h))return!1;let g=Array.isArray(h.profile)?h.profile:[h.profile];for(let h of g)if("string"==typeof h){if(-1!==oM.indexOf(h))return!0}else{let g=[...h.supports||[],...h.extraFeatures||[]];if(-1!==g.indexOf("regionByPx")&&(-1!==g.indexOf("sizeByW")||-1!==g.indexOf("sizeByWh")))return!0}return!1}(h))return[];let g=[],E=Array.isArray(h.profile)?h.profile:[h.profile],_=E.length;for(let g=0;g<_;g++){let _=E[g];if("string"!=typeof _&&(_.maxHeight||_.maxWidth))return[{id:esm_h(h),type:"variable",minWidth:0,minHeight:0,maxHeight:_.maxHeight||_.maxWidth,maxWidth:_.maxWidth||_.maxHeight,level:esm_F(h),version:"http://iiif.io/api/image/3/context.json"===h["@context"]?3:2}]}if(h.tiles){let E=h.tiles.length;for(let _=0;_<E;_++){let E=h.tiles[_];(E.height||E.width)&&g.push({id:esm_h(h),type:"variable",minHeight:0,minWidth:0,maxHeight:E.height||E.width,maxWidth:E.width,level:esm_F(h),version:esm_X(h)?3:2})}}return g}(h[_]);A.length&&g.push(...A)}return g}function ee(h){let g=h.service?Array.isArray(h.service)?h.service:[h.service]:[],E=g.length,_=[];for(let h=0;h<E;h++)esm_w(g[h])&&_.push(g[h]);return _}var oz=Object.defineProperty,oG=Object.defineProperties,o$=Object.getOwnPropertyDescriptors,oj=Object.getOwnPropertySymbols,oV=Object.prototype.hasOwnProperty,oq=Object.prototype.propertyIsEnumerable,esm_$e=(h,g,E)=>g in h?oz(h,g,{enumerable:!0,configurable:!0,writable:!0,value:E}):h[g]=E,esm_x=(h,g)=>{for(var E in g||(g={}))oV.call(g,E)&&esm_$e(h,E,g[E]);if(oj)for(var E of oj(g))oq.call(g,E)&&esm_$e(h,E,g[E]);return h},I=(h,g)=>oG(h,o$(g));function esm_O(h,g,E){let _=function(h){let g=function(h,g=""){let{path:E,scheme:_,server:A,prefix:b}=function(h,g=""){let E=h.match(/^(([a-zA-Z]+):\/\/([^/]+))?((.*)+)/);if(!E)throw Error(`Invalid or unknown input ${h}`);let _=E[2],A=E[3],b=E[4];if("/"===b[0]&&(b=b.substr(1)),g.length>0){if("/"===g[0]&&(g=g.substr(1)),g!==b.substr(0,g.length))throw Error(`Path does not start with prefix (path: ${b}, prefix: ${g})`);b=b.substr(g.length)}return{scheme:_,server:A,path:b,prefix:g}}(h,g),C=E.split("/").reverse(),[k,S,N,w,...R]=C,L=R.reverse().filter(Boolean).join("/");if(1===C.length||""===k)return{type:"base",scheme:_,server:A,prefix:b,identifier:L};if("info.json"===k){let[,...h]=C;return{type:"info",scheme:_,server:A,prefix:b,identifier:h.reverse().filter(Boolean).join("/")}}let P=k.split(".");return{type:"image",scheme:_,server:A,prefix:b,identifier:L,originalPath:E,region:function(h){try{if("full"===h)return{full:!0};if("square"===h)return{square:!0};let g=h.startsWith("pct:"),E=h.substr(g?4:0).split(",").map(h=>parseFloat(h));return{x:E[0],y:E[1],w:E[2],h:E[3],percent:g}}catch{throw Error("Expected 'full', 'square' or 'x,y,w,h'. Found "+h)}}(w),size:function(h){let g={upscaled:!1,max:!1,confined:!1};if("^"===h[0]&&(g.upscaled=!0,h=h.slice(1)),"max"===h||"full"===h)return g.max=!0,g.serialiseAsFull="full"===h,g;if("!"===h[0]&&(g.confined=!0,h=h.slice(1)),"p"===h[0])return g.percentScale=parseFloat(h.slice(4)),g;let E=h.split(",").map(h=>h.trim());return E.length&&(""!==E[0]&&(g.width=parseInt(E[0],10)),""!==E[1]?(g.height=parseInt(E[1],10),g.version=2):g.version=3),g}(N),rotation:function(h){let g={angle:0};if("!"===h[0]&&(g.mirror=!0,h=h.substr(1)),g.angle=parseFloat(h)%360,Number.isNaN(g.angle))throw Error(`Invalid rotation ${h}`);return g}(S),quality:P[0],format:P[1]}}(esm_p(h.id));if("info"!==g.type)throw Error("Invalid service URL");let E=function(h){let g=h?Array.isArray(h.profile)?h.profile:[h.profile]:[],E={extraQualities:[],extraFormats:[],extraFeatures:[]};for(let h of g){var _;if("string"==typeof h&&(_=h,h=-1!==oP.indexOf(_)?oU:-1!==oM.indexOf(_)?oH:oB),h){if(h.formats)for(let g of h.formats)-1===E.extraFormats.indexOf(g)&&E.extraFormats.push(g);if(h.qualities)for(let g of h.qualities)-1===E.extraQualities.indexOf(g)&&E.extraQualities.push(g);if(h.supports)for(let g of h.supports)-1===E.extraFeatures.indexOf(g)&&E.extraFeatures.push(g);if(h.maxHeight&&(E.maxHeight=h.maxHeight),h.maxWidth&&(E.maxWidth=h.maxWidth),h.maxArea&&(E.maxArea=h.maxArea),h.extraFormats)for(let g of h.extraFormats)-1===E.extraFormats.indexOf(g)&&E.extraFormats.push(g);if(h.extraQualities)for(let g of h.extraQualities)-1===E.extraQualities.indexOf(g)&&E.extraQualities.push(g);if(h.extraFeatures)for(let g of h.extraFeatures)-1===E.extraFeatures.indexOf(g)&&E.extraFeatures.push(g);h.maxHeight&&(E.maxHeight=h.maxHeight),h.maxWidth&&(E.maxWidth=h.maxWidth),h.maxArea&&(E.maxArea=h.maxArea)}}if(h.extraFormats)for(let g of h.extraFormats)-1===E.extraFormats.indexOf(g)&&E.extraFormats.push(g);if(h.extraFeatures)for(let g of h.extraFeatures)-1===E.extraFeatures.indexOf(g)&&E.extraFeatures.push(g);if(h.extraQualities)for(let g of h.extraQualities)-1===E.extraQualities.indexOf(g)&&E.extraQualities.push(g);return E}(h);return{identifier:g.identifier,originalPath:"",server:g.server,prefix:g.prefix,scheme:g.scheme,type:"image",quality:-1===E.extraQualities.indexOf("default")?E.extraQualities[0]:"default",region:{full:!0},size:{max:!0,upscaled:!1,confined:!1},format:"jpg",rotation:{angle:0}}}({"@context":3===h.version?"http://iiif.io/api/image/3/context.json":"http://iiif.io/api/image/2/context.json",id:esm_p(esm_h(h)),profile:null===h.level||typeof h.level>"u"?"level0":`level${h.level}}`,type:3===h.version?"ImageService3":"ImageService2"});if("image"!==_.type)throw Error("Invalid service");return _.size.max=!1,_.size.width=g,_.size.height=E,{id:function(h,g){let E=h.prefix.startsWith("/")?h.prefix.substr(1):h.prefix,_=`${h.scheme}://${h.server}/${E?`${E}/`:""}${h.identifier}`;if("base"===h.type)return _;if("info"===h.type)return`${_}/info.json`;let{size:A}=h,{region:b,rotation:C,format:k,quality:S}=h;if(g){let h=g["@context"]?Array.isArray(g["@context"])?g["@context"]:[g["@context"]]:[],E=-1!==h.indexOf("http://iiif.io/api/image/2/context.json"),_=-1!==h.indexOf("http://iiif.io/api/image/3/context.json");if((A.width!==g.width||A.height)&&(A.height!==g.height||A.width)&&(A.width!==g.width||A.height!==g.height)||(A=I(esm_x({},A),{max:!0})),E&&(A.max&&!A.serialiseAsFull&&(A=I(esm_x({},A),{serialiseAsFull:!0})),!A.max&&A.width&&A.height&&(A=I(esm_x({},A),{height:void 0})),A=I(esm_x({},A),{version:2})),_){if(A.max&&A.serialiseAsFull&&(A=I(esm_x({},A),{serialiseAsFull:!1})),A.width&&!A.height&&g.width&&g.height){let h=g.height/g.width;A=I(esm_x({},A),{height:Math.ceil(A.width*h)})}A=I(esm_x({},A),{version:3})}}return[_,function({x:h=0,y:g=0,w:E,h:_,full:A,square:b,percent:C}){if(A)return"full";if(b)return"square";if(typeof E>"u"||typeof _>"u")throw Error("RegionParameter: invalid region");let k=`${h},${g},${E},${_}`;return C?`pct:${k}`:k}(b),function({max:h,percentScale:g,upscaled:E,confined:_,width:A,height:b,serialiseAsFull:C,version:k}){let S=[];return E&&S.push("^"),h?S.push(C?"full":"max"):(_&&S.push("!"),g&&S.push(`pct:${g}`),A&&S.push(`${A}`),S.push(","),b&&3===k&&S.push(`${b}`)),S.join("")}(A),`${C.mirror?"!":""}${(C.angle||0)%360}`,`${S}.${k}`].filter(Boolean).join("/")}(_),type:"fixed",width:g,height:E||h.height/(h.width||1)*g,unsafe:h.width>g}}function esm_y(h){let g=h.replace(/(https?:\/\/)?(www.)?/i,"");return -1!==g.indexOf("/")?g.split("/")[0]:g}var oW=Object.defineProperty,oY=Object.defineProperties,oQ=Object.getOwnPropertyDescriptors,oX=Object.getOwnPropertySymbols,oK=Object.prototype.hasOwnProperty,oZ=Object.prototype.propertyIsEnumerable,esm_Re=(h,g,E)=>g in h?oW(h,g,{enumerable:!0,configurable:!0,writable:!0,value:E}):h[g]=E,ri=(h,g)=>{for(var E in g||(g={}))oK.call(g,E)&&esm_Re(h,E,g[E]);if(oX)for(var E of oX(g))oZ.call(g,E)&&esm_Re(h,E,g[E]);return h},si=(h,g)=>oY(h,oQ(g)),esm_=(h,g,E)=>new Promise((_,A)=>{var s=h=>{try{o(E.next(h))}catch(h){A(h)}},a=h=>{try{o(E.throw(h))}catch(h){A(h)}},o=h=>h.done?_(h.value):Promise.resolve(h.value).then(s,a);o((E=E.apply(h,g)).next())});new class{constructor(){this.config={verificationsRequired:1,approximateServices:!0,enableFetching:!0,disableThrottling:!1},this.fetchingCount=0,this.imageServices={},this.knownImageServers={}}setConfig(h){Object.assign(this.config,h)}sample(h,g,E=!0){let _=esm_y(esm_h(h)),A=esm_p(esm_h(h)),b=this.knownImageServers[_];return this.imageServices[A]=Object.assign(h,{real:!0}),b||!h.tiles||v(0,h)?this.verify(h):(this.knownImageServers[_]={verifications:0,malformed:!1,root:_,preLoaded:E,sampledId:esm_h(h),verified:!1,server:null,result:{context:h["@context"]||[],sampledProfile:h.profile,resourceServiceRatio:g&&h.height?g.height/h.height:1,sampledSizes:h.sizes||[],sizeRatios:function(h,g,E){let _=E.length,A=[];for(let g=0;g<_;g++){let _=E[g].width;A.push(h/_)}return A}(h.width,h.height,h.sizes||[]),sampledTiles:h.tiles||[]}},!0)}preLoad(h,g=!0){this.knownImageServers[h.root]=h,g&&(this.knownImageServers[h.root].malformed=!1,this.knownImageServers[h.root].verifications=this.config.verificationsRequired)}predict(h,g=!1,E=!1){let _=null==h?void 0:h.source,A=esm_y(esm_h(h)),b=this.knownImageServers[A];if(!b||!b.result||!((null==_?void 0:_.height)||h.height)||!((null==_?void 0:_.width)||h.width)||!E&&(b.malformed||b.verifications<this.config.verificationsRequired)||v(0,h.source))return null;let C=esm_p(esm_h(h));return this.imageServices[C]||(this.imageServices[C]={"@context":b.result.context,"@id":esm_h(h),id:esm_h(h),protocol:"http://iiif.io/api/image",tiles:(null==_?void 0:_.tiles)||function(h,g,E){let _=h>g?h:g,A=E.length,b=[];for(let h=0;h<A;h++){let g=E[h],A=g.scaleFactors[0],C=_/A,k=[A];for(;C>=g.width;)k.push(A*=2),C/=2;b.push(si(ri({},g),{scaleFactors:k}))}return b}(h.width,h.height,b.result.sampledTiles),sizes:(null==_?void 0:_.sizes)||function(h,g,E){let _=E.length,A=[];for(let b=0;b<_;b++){let _=E[b];A.push({width:Math.floor(h/_),height:Math.floor(g/_)})}return A}(Math.round(h.width/b.result.resourceServiceRatio),Math.round(h.height/b.result.resourceServiceRatio),b.result.sizeRatios),profile:(null==_?void 0:_.profile)||b.result.sampledProfile,height:(null==_?void 0:_.height)||h.height,width:(null==_?void 0:_.width)||h.width,real:!1}),this.imageServices[C]}getThumbnailFromResource(h,g){return esm_(this,arguments,function*(h,g,E=!0,_=[]){let A=h?yield this.getImageCandidates(h,E):[];return function(h,g){let E=[],_=Object.assign({unsafeImageService:!1,atAnyCost:!0,fallback:!0,minHeight:64,minWidth:64,maxHeight:1/0,maxWidth:1/0,returnAllOptions:!1,preferFixedSize:!1,allowUnsafe:!1,explain:!1,height:0,width:0},h),r=(h,g=0)=>_.explain?E.push(Array(g).fill(0).map(h=>"    ").join("")+h().trim()):void 0,A=[],b=[],C=null;r(()=>`Using configuration: ${JSON.stringify(_,null,2)}`);let f=(h,g)=>{if(r(()=>"Swapping choice",3),function(h,g,E){let _=h.width?h.width:h.maxWidth;return E.height<=h.maxHeight&&E.width<=h.maxWidth&&E.height>=h.minHeight&&E.width>=h.minWidth&&(!g||Math.abs(E.width-_)<Math.abs(g.width-_))}(_,g,h)){if(_.preferFixedSize&&h.unsafe){r(()=>`We found an image that was marked as unsafe, but it was the best size. (${h.id})`,4),b.push(h);return}_.returnAllOptions&&g&&b.push(g),r(()=>`We found a new image that was the best size. (${h.id})`,4),C=h}else _.returnAllOptions&&b.push(h)};r(()=>`The input shows we have ${g.length} list(s) of candidates to choose from.`);let k=g.length;for(let h=0;h<k;h++){let E=g[h]();r(()=>`Candidate group ${h}: ${JSON.stringify(E,null,2)}`,1);let b=E.length;r(()=>`Checking candidate list number ${h} and found ${b} potential ways of creating image(s)`,1);for(let h=0;h<b;h++){let g=E[h];if(r(()=>`-> Checking candidate ${h}`,1),"unknown"===g.type&&_.atAnyCost&&(r(()=>'We\'ve found an unknown image type, adding this to the "last resort" list',2),A.push(g)),"fixed"===g.type&&(g.unsafe?(r(()=>'We\'ve found an unsafe fixed image type, adding this to the "last resort" list',2),A.push(g)):(r(()=>"We've found a fixed size image, checking if it matches the request",2),f(g,C))),"fixed-service"===g.type){if(_.unsafeImageService){r(()=>"Checking for an image from the tile source, without calculating the right height and width (unsafeImageService)",2);let h=esm_O(g,_.width,_.height);f(h,C)}else{r(()=>"Checking for an image from the tile source 3",2);let h=esm_O(g,g.width,g.height);f(h,C)}}if("variable"===g.type&&g.maxWidth){let h=esm_O({id:g.id,type:"fixed-service",width:g.maxWidth,height:g.maxWidth,level:g.level,version:g.version},g.maxWidth);f(h,C)}}if(C&&!_.returnAllOptions){if(C.unsafe||_.allowUnsafe)continue;r(()=>`We found a match in choice list number ${h}, no searching any more`);break}}return _.atAnyCost&&0===b.length?(r(()=>C?`We found an image! ${C.id} of type ${C.type}`:'We found no images, but "atAnyCost" is set, so returning that'),{best:C||A[0],fallback:A.slice(1),log:E}):_.returnAllOptions?(r(()=>"Returning all options that we have found"),{best:_.atAnyCost?C||b[0]||A[0]:C||b[0],fallback:[...b,...A],log:E}):(r(()=>"Returning the best image that we found, and a fallback"),{best:C||b[0]||null,fallback:C?b:b.slice(1),log:E})}(g,[()=>_,()=>A])})}getImageCandidates(h,g=!0){return esm_(this,null,function*(){if(g&&h.height&&h.width){let g=ee(h);for(let E of g){let g={id:esm_h(E),width:E.width?E.width:h.width,height:E.height?E.height:h.height,source:E};yield this.loadService(g)}}return function(h,g=!0,E){let _=[],A=function(h){if("string"==typeof h)return esm_Y(h);let g=h["@type"]?h["@type"]:h.type?h.type:void 0;if("Image"!==g&&"sc:Image"!==g)return null;let E=esm_h(h);return E?E&&h.width&&h.height?{id:E,type:"fixed",width:h.width,height:h.height,unsafe:!0}:esm_Y(E):null}(h);if(null===A)return _;if(_.push(A),g&&h.width&&h.height){let g=[],A=ee(h);for(let _ of A){let A={id:esm_h(_),width:h.width,height:h.height};if(E.canLoadSync(A)){let _=E.loadServiceSync(A);_&&(_.height||(_.height=h.height),_.width||(_.width=h.width),g.push(...esm_q([_])))}}if(g.length)return _.push(...g),_}return h.service&&_.push(...esm_q(h.service)),_}(h,g,this)})}verify(h){return esm_(this,null,function*(){let g=this.predict(h,!1,!0),E=yield this.fetchService(esm_h(h));if(!g)return!1;let _=g.height===E.height&&g.width===E.width&&g["@context"]===E["@context"]&&function(h,g){if(h.length!==g.length)return!1;if(0===h.length&&0===g.length)return!0;let E=h.length,_=!0;for(let A=0;A<E;A++){let E=h[A],b=g[A];if(E.width!==b.width||E.height!==b.height){_=!1;break}}if(_)return!0;let A=0;for(let _=0;_<E;_++)for(let b=0;b<E;b++)if(h[_].width===g[b].width&&h[_].height===g[b].height){A++;break}return A===E}(g.sizes||[],E.sizes||[]);if(_){let g=esm_y(esm_h(h));this.knownImageServers[g].verifications+=1,this.knownImageServers[g].verifications>=this.config.verificationsRequired&&(this.knownImageServers[g].verified=!0)}return _})}canLoadSync(h){let g="string"==typeof h?h:esm_h(h),E=esm_p(g);if(this.imageServices[E])return!0;let _=this.knownImageServers[esm_y(g)];return _&&!_.malformed&&_.verifications>=this.config.verificationsRequired}markAsMalformed(h){return esm_(this,null,function*(){return this.knownImageServers[esm_y(esm_h(h))].malformed=!0,this.loadService(h,!0)})}fetchService(h,g=!1){return esm_(this,null,function*(){let E=esm_p(h);if(this.imageServices[E]&&(!g||this.imageServices[E].real))return this.imageServices[E];if(!this.config.enableFetching)throw Error("Fetching is not enabled");let _=yield this.fetch(E).then(h=>h.json());return!_.id&&_["@id"]&&(_.id=_["@id"]),_.id!==h&&(_.id=h,_["@id"]&&(_["@id"]=h)),this.imageServices[E]=Object.assign(_,{real:!0}),this.imageServices[E]})}fetch(h,g){return esm_(this,null,function*(){return fetch(h,g)})}loadService(h,g=!1){return esm_(this,null,function*(){if(!this.config.disableThrottling){let h=!0;for(;h;)if(this.fetchingCount>=this.config.verificationsRequired)yield new Promise(h=>setTimeout(h,500));else{h=!1;break}}let E=this.knownImageServers[esm_y(esm_h(h))];if(E&&!E.malformed&&!g){yield E.result;let g=this.loadServiceSync(h);if(g)return g}this.fetchingCount++;let _=yield this.fetchService(esm_h(h),g);return this.fetchingCount--,_.real&&this.sample(_,h),_})}loadServiceSync(h){let g=esm_p(esm_h(h));return this.imageServices[g]?this.imageServices[g]:this.predict(h)}},Symbol.for("_refs_"),Symbol.for("_reactive_"),Symbol.for("_defined_");var oJ=E(6419),o0=E(5059),o1=E(761);let Gt=h=>{let g=h.toString().split(":"),E=Math.ceil(parseInt(g[0])),_=Math.ceil(parseInt(g[1])),A=qt(Math.ceil(parseInt(g[2])),2),b=`${0!==E&&_<10?(_+"").padStart(2,"0"):_}:${A}`;return 0!==E&&(b=`${E}:${b}`),b},viewer_je=h=>{let g=new Date(1e3*h).toISOString().substr(11,8);return Gt(g)},viewer_Ge=(h,g)=>{if("object"!=typeof h||null===h)return g;for(let E in g)"object"!=typeof g[E]||null===g[E]||Array.isArray(g[E])?h[E]=g[E]:(h[E]||(h[E]={}),h[E]=viewer_Ge(h[E],g[E]));return h},Ut=h=>h.split("").reduce(function(h,g){return(h=(h<<5)-h+g.charCodeAt(0))&h},0),viewer_Ue=(h,g)=>Object.hasOwn(h,g)?h[g].toString():void 0,qt=(h,g)=>String(h).padStart(g,"0"),o2={annotationOverlays:{backgroundColor:"#ff6666",borderColor:"#990000",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:2},background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"500px",ignoreCaptionLabels:[],informationPanel:{vtt:{autoScroll:{enabled:!0,settings:{behavior:"smooth",block:"center"}}},open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0,renderAnnotation:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showDownload:!0,showIIIFBadge:!0,showTitle:!0,withCredentials:!1};function viewer_qe(h){let g={...o2.informationPanel.vtt.autoScroll};return"object"==typeof h&&(g="enabled"in h?h:{enabled:!0,settings:h}),!1===h&&(g.enabled=!1),function({behavior:h,block:g}){let E=["auto","instant","smooth"],_=["center","end","nearest","start"];if(!E.includes(h))throw TypeError(`'${h}' not in ${E.join(" | ")}`);if(!_.includes(g))throw TypeError(`'${g}' not in ${_.join(" | ")}`)}(g.settings),g}let o3=viewer_qe(null==(ex=null==(eb=null==o2?void 0:o2.informationPanel)?void 0:eb.vtt)?void 0:ex.autoScroll),o4={activeCanvas:"",activeManifest:"",collection:{},configOptions:o2,customDisplays:[],isAutoScrollEnabled:o3.enabled,isAutoScrolling:!1,isInformationOpen:null==(eC=null==o2?void 0:o2.informationPanel)?void 0:eC.open,isLoaded:!1,isUserScrolling:void 0,vault:new Vault,openSeadragonViewer:null,viewerId:esm_browser_v4()},o5=eO.createContext(o4),o6=eO.createContext(o4);function Jt(h,g){switch(g.type){case"updateActiveCanvas":return g.canvasId||(g.canvasId=""),{...h,activeCanvas:g.canvasId};case"updateActiveManifest":return{...h,activeManifest:g.manifestId};case"updateAutoScrollAnnotationEnabled":return{...h,isAutoScrollEnabled:g.isAutoScrollEnabled};case"updateAutoScrolling":return{...h,isAutoScrolling:g.isAutoScrolling};case"updateCollection":return{...h,collection:g.collection};case"updateConfigOptions":return{...h,configOptions:viewer_Ge(h.configOptions,g.configOptions)};case"updateInformationOpen":return{...h,isInformationOpen:g.isInformationOpen};case"updateIsLoaded":return{...h,isLoaded:g.isLoaded};case"updateUserScrolling":return{...h,isUserScrolling:g.isUserScrolling};case"updateOpenSeadragonViewer":return{...h,openSeadragonViewer:g.openSeadragonViewer};case"updateViewerId":return{...h,viewerId:g.viewerId};default:throw Error(`Unhandled action type: ${g.type}`)}}let Kt=({initialState:h=o4,children:g})=>{let[E,_]=(0,eO.useReducer)(Jt,h);return eO.createElement(o5.Provider,{value:E},eO.createElement(o6.Provider,{value:_},g))};function viewer_I(){let h=eO.useContext(o5);if(void 0===h)throw Error("useViewerState must be used within a ViewerProvider");return h}function viewer_F(){let h=eO.useContext(o6);if(void 0===h)throw Error("useViewerDispatch must be used within a ViewerProvider");return h}let Qt=(h,g)=>{let E=h.get({id:g,type:"Canvas"});return null!=E&&E.annotations&&E.annotations[0]?h.get(E.annotations).filter(h=>!!h.items&&!!h.items.length&&h).map(h=>{let g=h.label||{none:["Annotations"]};return{...h,label:g}}):[]},viewer_Ye=(h,g,E,_)=>{var A,b;let C={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(C.canvas=h.get(g),C.canvas&&(C.annotationPage=h.get(C.canvas.items[0]),C.accompanyingCanvas=null!=(A=C.canvas)&&A.accompanyingCanvas?h.get(null==(b=C.canvas)?void 0:b.accompanyingCanvas):void 0),C.annotationPage){let A=h.get(C.annotationPage.items).map(g=>({body:h.get(g.body[0].id),motivation:g.motivation,type:"Annotation"})),b=[];A.forEach(g=>{"Choice"===g.body.type?g.body.items.forEach(E=>b.push({...g,id:E.id,body:h.get(E.id)})):b.push(g)}),C.annotations=b.filter(A=>{if(A){if(!A.body||!A.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",A);return}let b=A.body;Array.isArray(b)&&(b=b[0]);let C=h.get(b.id);if(C)switch(E){case"painting":return A.target===g.id&&A.motivation&&"painting"===A.motivation[0]&&_.includes(C.type)&&(A.body=C),!!A;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return C},viewer_U=(h,g="en")=>{if(!h)return"";if(!h[g]){let g=Object.getOwnPropertyNames(h);if(g.length>0)return h[g[0]]}return h[g]},viewer_q=(h,g)=>{let E=viewer_Ye(h,{id:g,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==E.annotations.length&&E.annotations&&E.annotations)return E.annotations.map(h=>null==h?void 0:h.body)},en=(h,g,E,_)=>{let A=[];if(g.canvas&&g.canvas.thumbnail.length>0){let E=h.get(g.canvas.thumbnail[0]);A.push(E)}if(g.annotations[0]){if(g.annotations[0].thumbnail&&g.annotations[0].thumbnail.length>0){let E=h.get(g.annotations[0].thumbnail[0]);A.push(E)}if(!g.annotations[0].body)return;let E=g.annotations[0].body;"Image"===E.type&&A.push(E)}return 0===A.length?void 0:{id:A[0].id,format:A[0].format,type:A[0].type,width:E,height:_}},o8={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:o9,css:o7,keyframes:se,createTheme:sn}=(0,ew.Th)({theme:{colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:"hsl(209 100% 38.2%)",accentMuted:"hsl(209 80% 61.8%)",accentAlt:"hsl(209 80% 30%)",secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},media:o8}),sr=o9("div",{display:"flex",flexDirection:"column",alignItems:"center"}),sa=o9("p",{fontWeight:"bold",fontSize:"x-large"}),so=o9("span",{fontSize:"medium"}),viewer_Je=({error:h})=>{let{message:g}=h;return eO.createElement(sr,{role:"alert"},eO.createElement(sa,{"data-testid":"headline"},"Something went wrong"),g&&eO.createElement(so,null,`Error message: ${g}`," "))},ss=o9("div",{position:"relative",zIndex:"0"}),sl=o9("div",{display:"flex",flexDirection:"row",flexGrow:"1",overflow:"hidden","@sm":{flexDirection:"column"}}),sc=o9("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),su=o9(oc.xz,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),sd=o9(oc.VY,{width:"100%",display:"flex"}),sp=o9("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),sh=o9("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased",'&[data-absolute-position="true"]':{position:"absolute",width:"100%",height:"100%",zIndex:"0"},"> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start",height:"100%",maxHeight:"100%","@sm":{[`& ${sl}`]:{flexGrow:"1"},[`& ${sc}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${ss}`]:{display:"none"},[`& ${su}`]:{margin:"1rem"},[`& ${sd}`]:{height:"100%"}}}}),sf=o9(ou.fC,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),sm=o9(ou.aV,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}}),sg=o9(ou.xz,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),sE=o9(ou.VY,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),sT=o9(({handleScroll:h,children:g,className:E})=>eO.createElement("div",{className:E,onScroll:h},g),{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),s_={position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none"},sA=o9("button",{textAlign:"left","&:hover":{color:"$accent"}}),sy=o9("div",{display:"flex",flexDirection:"column",width:"100%"}),sv=o9("div",{...s_}),sb=o9("div",{"&:hover":{color:"$accent"}}),viewer_Ie=({value:h,handleClick:g})=>eO.createElement(sA,{onClick:g},h),hn=({value:h,handleClick:g})=>eO.createElement(sb,{dangerouslySetInnerHTML:{__html:h},onClick:g}),gn=()=>{function e(h){return h.map(h=>{let g=h.identifier||esm_browser_v4();return{...h,identifier:g}})}return{addIdentifiersToParsedCues:e,createNestedCues:function(h){var g;let E=[],_=[],A=e(h);for(let h of A){for(;_.length>0&&_[_.length-1].end<=h.start;)_.pop();_.length>0?(_[_.length-1].children||(_[_.length-1].children=[]),null==(g=_[_.length-1].children)||g.push(h)):E.push(h),_.push(h)}return E},isChild:function(h,g=[]){return g.some(g=>h.start>=g.start&&h.end<=g.end)},orderCuesByTime:function(h=[]){return h.sort((h,g)=>h.start-g.start)}}},sx=se({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),sC=o9(od.fC,{display:"flex",flexDirection:"column",width:"100%"}),sI=o9(od.ck,{...s_,"@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:sx,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:sx,boxSizing:"content-box","@sm":{content:"unset"}}}}),xn=h=>{for(;h&&h!==document.body;){let g=window.getComputedStyle(h).overflowY;if("visible"!==g&&"hidden"!==g&&h.scrollHeight>h.clientHeight)return h;h=h.parentNode}return null},bn=({label:h,start:g,end:E})=>{var _,A;let b=viewer_F(),{configOptions:C,isAutoScrollEnabled:k,isUserScrolling:S}=viewer_I(),N=null==(A=null==(_=null==C?void 0:C.informationPanel)?void 0:_.vtt)?void 0:A.autoScroll,[w,R]=(0,eO.useState)(!1),L=(0,eO.useRef)(null),P=document.getElementById("clover-iiif-video");return(0,eO.useEffect)(()=>(null==P||P.addEventListener("timeupdate",()=>{let{currentTime:h}=P;R(g<=h&&h<E)}),()=>document.removeEventListener("timeupdate",()=>{})),[E,g,P]),(0,eO.useEffect)(()=>{var h,g;if(k&&w&&L.current&&!S){let E=L.current;if(E&&E instanceof HTMLElement){let _=xn(E);if(_&&_ instanceof HTMLElement){let A;switch(null==(h=null==N?void 0:N.settings)?void 0:h.block){case"center":let C=_.getBoundingClientRect();A=E.offsetTop+E.offsetHeight-Math.floor((C.bottom-C.top)/2);break;case"end":A=E.offsetTop+E.offsetHeight-(_.clientHeight-E.clientHeight)+2;break;default:A=E.offsetTop-2}b({type:"updateAutoScrolling",isAutoScrolling:!0}),_.scrollTo({top:A,left:0,behavior:null==(g=null==N?void 0:N.settings)?void 0:g.behavior}),setTimeout(()=>b({type:"updateAutoScrolling",isAutoScrolling:!1}),750)}}}},[N,w,S,k,b]),eO.createElement(sI,{ref:L,"aria-checked":w,"data-testid":"information-panel-cue",onClick:()=>{P&&(P.pause(),P.currentTime=g,P.play())},value:h},h,eO.createElement("strong",null,viewer_je(g)))},sk=o9("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${sI}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),viewer_it=({items:h})=>eO.createElement(sk,null,h.map(h=>{let{text:g,start:E,end:_,children:A,identifier:b}=h;return eO.createElement("li",{key:b},eO.createElement(bn,{label:g,start:E,end:_}),A&&eO.createElement(viewer_it,{items:A}))})),En=({label:h,vttUri:g})=>{let[E,_]=eO.useState([]),{createNestedCues:A,orderCuesByTime:b}=gn(),[C,k]=eO.useState();return(0,eO.useEffect)(()=>{g&&fetch(g,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(h=>h.text()).then(h=>{let g=(0,op.parse)(h).cues,E=b(g),C=A(E);_(C)}).catch(h=>{console.error(g,h.toString()),k(h)})},[g]),eO.createElement(sC,{"data-testid":"annotation-item-vtt","aria-label":`navigate ${viewer_U(h,"en")}`},C&&eO.createElement("div",{"data-testid":"error-message"},"Network Error: ",C.toString()),eO.createElement(viewer_it,{items:E}))},viewer_lt=h=>{var g,E;let _={id:"string"==typeof h?h:h.source};if("string"==typeof h){if(h.includes("#xywh=")){let g=h.split("#xywh=");if(g&&g[1]){let[h,E,A,b]=g[1].split(",").map(h=>Number(h));_={id:g[0],rect:{x:h,y:E,w:A,h:b}}}}else if(h.includes("#t=")){let g=h.split("#t=");g&&g[1]&&(_={id:g[0],t:g[1]})}}else"object"==typeof h&&((null==(g=h.selector)?void 0:g.type)==="PointSelector"?_={id:h.source,point:{x:h.selector.x,y:h.selector.y}}:(null==(E=h.selector)?void 0:E.type)==="SvgSelector"&&(_={id:h.source,svg:h.selector.value}));return _},sS=window.OpenSeadragon;if(!sS&&!(sS=eS))throw Error("OpenSeadragon is missing.");let sN="http://www.w3.org/2000/svg";sS.Viewer&&(sS.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo||(this._svgOverlayInfo=new viewer_me(this)),this._svgOverlayInfo});let viewer_me=function(h){let g=this;this._viewer=h,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(sN,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(sN,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){g.resize()}),this._viewer.addHandler("open",function(){g.resize()}),this._viewer.addHandler("rotate",function(){g.resize()}),this._viewer.addHandler("flip",function(){g.resize()}),this._viewer.addHandler("resize",function(){g.resize()}),this.resize()};viewer_me.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));let h=this._viewer.viewport.pixelFromPoint(new sS.Point(0,0),!0),g=this._viewer.viewport.getZoom(!0),E=this._viewer.viewport.getRotation(),_=this._viewer.viewport.getFlip(),A=this._viewer.viewport._containerInnerSize.x,b=A*g,C=b;_&&(b=-b,h.x=-h.x+A),this._node.setAttribute("transform","translate("+h.x+","+h.y+") scale("+b+","+C+") rotate("+E+")")},onClick:function(h,g){new sS.MouseTracker({element:h,clickHandler:g}).setTracking(!0)}};let Sn=h=>new viewer_me(h),Cn=h=>fetch(`${h.replace(/\/$/,"")}/info.json`).then(h=>h.json()).then(h=>h).catch(g=>{console.error(`The IIIF tilesource ${h.replace(/\/$/,"")}/info.json failed to load: ${g}`)}),kn=h=>{let g,E;return Array.isArray(h)&&(g=h[0])&&(E="@id"in g?g["@id"]:g.id),E},viewer_ue=h=>{var g;let E,_;if(Tn(h))E=h,_={};else{let A=JSON.parse(function(h){let g=function(h){let g=h.length%4;if(1===g)throw Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");return h+(g?"====".slice(0,4-g):"")}(h),E=g.replace(/-/g,"+").replace(/_/g,"/"),_="undefined"==typeof atob?oh.from(E,"base64").toString("utf-8"):atob(E);return decodeURIComponent(_).trim()}(h));switch(null==A?void 0:A.type){case"SpecificResource":case"Range":case"Annotation":_={manifest:E=null==A?void 0:A.target.partOf[0].id,canvas:null==A?void 0:A.target.id};break;case"Canvas":_={manifest:E=null==A?void 0:A.partOf[0].id,canvas:null==A?void 0:A.id};break;case"Manifest":E=null==A?void 0:A.id,_={collection:null==(g=null==A?void 0:A.partOf[0])?void 0:g.id,manifest:null==A?void 0:A.id};break;case"Collection":_={collection:E=null==A?void 0:A.id}}}return{resourceId:E,active:_}},In=h=>{let{resourceId:g,active:E}=viewer_ue(h);return E.collection||E.manifest||g},$n=(h,g)=>{let E=g.items.map(h=>h.id),{active:_}=viewer_ue(h),A=_.canvas;return E.includes(A)?A:E[0]},An=(h,g)=>{let{active:E}=viewer_ue(h),_=E.manifest,A=g.items.filter(h=>"Manifest"===h.type).map(h=>h.id);return 0==A.length?null:A.includes(_)?_:A[0]},Tn=h=>{try{new URL(h)}catch{return!1}return!0};var sw=((er=sw||{}).TiledImage="tiledImage",er.SimpleImage="simpleImage",er);function viewer_Te(h,g,E,_){let A=function(h){if(!h)return null;let g=document.createElement("template");return g.innerHTML=h.trim(),g.content.children[0]}(g);if(A)for(let g of A.children)!function viewer_st(h,g,E,_){var A;if("#text"===g.nodeName)g.textContent&&(g.textContent.includes(`
`)||console.log("nodeName:",g.nodeName,", textContent:",g.textContent,", childNodes.length",g.childNodes.length));else{let b=function(h,g,E){var _,A,b,C;let k=!1,S=!1,N=!1,w=!1,R=document.createElementNS("http://www.w3.org/2000/svg",h.nodeName);if(h.attributes.length>0)for(let g=0;g<h.attributes.length;g++){let E=h.attributes[g];switch(E.name){case"fill":N=!0;break;case"stroke":k=!0;break;case"stroke-width":S=!0;break;case"fill-opacity":w=!0}R.setAttribute(E.name,E.textContent)}return k||(R.style.stroke=null==(_=g.annotationOverlays)?void 0:_.borderColor),S||(R.style.strokeWidth=null==(A=g.annotationOverlays)?void 0:A.borderWidth),N||(R.style.fill=null==(b=g.annotationOverlays)?void 0:b.backgroundColor),w||(R.style.fillOpacity=null==(C=g.annotationOverlays)?void 0:C.opacity),R.setAttribute("transform",`scale(${E})`),R}(g,E,_),C=Sn(h);C.node().append(b),null==(A=C._svg)||A.setAttribute("class","annotation-overlay"),g.childNodes.forEach(g=>{viewer_st(h,g,E,_)})}}(h,g,E,_)}let On=h=>{let g=Array.isArray(null==h?void 0:h.service)&&(null==h?void 0:h.service.length)>0,E=g?kn(null==h?void 0:h.service):null==h?void 0:h.id,_=g?sw.TiledImage:sw.SimpleImage;return{uri:E,imageType:_}},Pn=(h,g)=>{let E=g?sw.TiledImage:sw.SimpleImage;return{uri:h,imageType:E}},Vn=({caption:h,handleClick:g,imageUri:E})=>eO.createElement(sA,{onClick:g},eO.createElement("img",{src:E,alt:`A visual annotation for ${h}`}),eO.createElement("span",null,h)),Bn=({annotation:h})=>{var g,E;let{target:_}=h,A=viewer_I(),{openSeadragonViewer:b,vault:C,activeCanvas:k,configOptions:S}=A,N=h.body.map(h=>C.get(h.id)),w=(null==(g=N.find(h=>h.format))?void 0:g.format)||"",R=(null==(E=N.find(h=>h.value))?void 0:E.value)||"",L=C.get({id:k,type:"Canvas"});function p(){var h;if(!_)return;let g=(null==(h=S.annotationOverlays)?void 0:h.zoomLevel)||1,E=viewer_lt(_),{point:A,rect:C,svg:k}=E;if(A||C||k){let h=function(h,g,E){let _,A,b=40,C=40;g.rect&&(_=g.rect.x,A=g.rect.y,b=g.rect.w,C=g.rect.h),g.point&&(_=g.point.x,A=g.point.y);let k=1/h.width;return new eS.Rect(_*k-b*k/2*(E-1),A*k-C*k/2*(E-1),b*k*E,C*k*E)}(L,E,g);null==b||b.viewport.fitBounds(h)}}return eO.createElement(sv,null,function(){var h,g;switch(w){case"text/plain":return eO.createElement(viewer_Ie,{value:R,handleClick:p});case"text/html":return eO.createElement(hn,{value:R,handleClick:p});case"text/vtt":return eO.createElement(En,{label:N[0].label,vttUri:N[0].id||""});case null==(h=w.match(/^image\//))?void 0:h.input:let E=(null==(g=N.find(h=>{var g;return!(null!=(g=h.id)&&g.includes("vault://"))}))?void 0:g.id)||"";return eO.createElement(Vn,{caption:R,handleClick:p,imageUri:E});default:return eO.createElement(viewer_Ie,{value:R,handleClick:p})}}())},_n=({annotationPage:h})=>{var g;let E=viewer_I(),{vault:_}=E;if(!h||!h.items||(null==(g=h.items)?void 0:g.length)===0)return eO.createElement(eO.Fragment,null);let A=h.items.map(h=>_.get(h.id));return A?eO.createElement(sy,{"data-testid":"annotation-page"},null==A?void 0:A.map(h=>eO.createElement(Bn,{key:h.id,annotation:h}))):eO.createElement(eO.Fragment,null)},sO=o9("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),sR=o9("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),viewer_ct=(h,g="none")=>{if(!h)return null;if("string"==typeof h)return[h];if(!h[g]){let g=Object.getOwnPropertyNames(h);if(g.length>0)return h[g[0]]}return h[g]&&Array.isArray(h[g])?h[g]:null},viewer_T=(h,g="none",E=", ")=>{let _=viewer_ct(h,g);return Array.isArray(_)?_.join(`${E}`):_};function viewer_z(h,g){let E=Object.keys(h).filter(h=>g.includes(h)?null:h),_={};return E.forEach(g=>{_[g]=h[g]}),_}let sD=o9("span",{}),viewer_=h=>{let{as:g,label:E}=h,_=viewer_z(h,["as","label"]);return eO.createElement(sD,{as:g,..._},viewer_T(E,_.lang))},Un=(h,g="200,",E="full")=>{let _;Array.isArray(h)&&(h=h[0]);let{id:A,service:b}=h;if(!b)return A;if(Array.isArray(h.service)&&h.service.length>0&&(_=b[0]),_){if(_["@id"])return`${_["@id"]}/${E}/${g}/0/default.jpg`;if(_.id)return`${_.id}/${E}/${g}/0/default.jpg`}},sL=o9("img",{objectFit:"cover"}),qn=h=>{let g;let E=(0,eO.useRef)(null),{contentResource:_,altAsLabel:A,region:b="full"}=h;A&&(g=viewer_T(A));let C=viewer_z(h,["contentResource","altAsLabel"]),{type:k,id:S,width:N=200,height:w=200,duration:R}=_;(0,eO.useEffect)(()=>{if(!S&&!E.current||["Image"].includes(k)||!S.includes("m3u8"))return;let h=new nm.ZP;return E.current&&(h.attachMedia(E.current),h.on(nm.ZP.Events.MEDIA_ATTACHED,function(){h.loadSource(S)})),h.on(nm.ZP.Events.ERROR,function(g,E){if(E.fatal)switch(E.type){case nm.ZP.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${g} network error encountered, try to recover`),h.startLoad();break;case nm.ZP.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${g} media error encountered, try to recover`),h.recoverMediaError();break;default:h.destroy()}}),()=>{h&&(h.detachMedia(),h.destroy())}},[S,k]);let L=(0,eO.useCallback)(()=>{if(!E.current)return;let h=0,g=30;if(R&&(g=R),!S.split("#t=")&&R&&(h=.1*R),S.split("#t=").pop()){let g=S.split("#t=").pop();g&&(h=parseInt(g.split(",")[0]))}let _=E.current;_.autoplay=!0,_.currentTime=h,setTimeout(()=>L(),1e3*g)},[R,S]);(0,eO.useEffect)(()=>L(),[L]);let P=Un(_,`${N},${w}`,b);switch(k){case"Image":return eO.createElement(sL,{as:"img",alt:g,css:{width:N,height:w},key:S,src:P,...C});case"Video":return eO.createElement(sL,{as:"video",css:{width:N,height:w},disablePictureInPicture:!0,key:S,loop:!0,muted:!0,onPause:L,ref:E,src:S});default:return console.warn(`Resource type: ${k} is not valid or not yet supported in Primitives.`),eO.createElement(eO.Fragment,null)}},sP=o9("a",{}),Xn=h=>{let{children:g,homepage:E}=h,_=viewer_z(h,["children","homepage"]);return eO.createElement(eO.Fragment,null,E&&E.map(h=>{let E=viewer_T(h.label,_.lang);return eO.createElement(sP,{"aria-label":g?E:void 0,href:h.id,key:h.id,..._},g||E)}))},sM={delimiter:", "},sF=(0,eO.createContext)(void 0),viewer_dt=()=>{let h=(0,eO.useContext)(sF);if(void 0===h)throw Error("usePrimitivesContext must be used with a PrimitivesProvider");return h},viewer_fe=({children:h,initialState:g=sM})=>{let E=Jn(g,"delimiter");return eO.createElement(sF.Provider,{value:{delimiter:E}},h)},Jn=(h,g)=>Object.hasOwn(h,g)?h[g].toString():void 0,sB=o9("span",{}),viewer_Re=h=>{let{as:g,markup:E}=h,{delimiter:_}=viewer_dt();if(!E)return eO.createElement(eO.Fragment,null);let A=viewer_z(h,["as","markup"]),b={__html:nf(viewer_T(E,A.lang,_),{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})};return eO.createElement(sB,{as:g,...A,dangerouslySetInnerHTML:b})},viewer_mt=h=>eO.useContext(sF)?eO.createElement(viewer_Re,{...h}):eO.createElement(viewer_fe,null,eO.createElement(viewer_Re,{...h})),Qn=({as:h="dd",lang:g,value:E})=>eO.createElement(viewer_mt,{markup:E,as:h,lang:g}),sH=o9("span",{}),viewer_tr=({as:h="dd",customValueContent:g,lang:E,value:_})=>{var A;let{delimiter:b}=viewer_dt(),C=null==(A=viewer_ct(_,E))?void 0:A.map(h=>(0,eO.cloneElement)(g,{value:h}));return eO.createElement(sH,{as:h,lang:E},null==C?void 0:C.map((h,g)=>[g>0&&`${b}`,eO.createElement(eO.Fragment,{key:g},h)]))},viewer_ut=h=>{var g;let{item:E,lang:_,customValueContent:A}=h,{label:b,value:C}=E,k=null==(g=viewer_T(b))?void 0:g.replace(" ","-").toLowerCase();return eO.createElement("div",{role:"group","data-label":k},eO.createElement(viewer_,{as:"dt",label:b,lang:_}),A?eO.createElement(viewer_tr,{as:"dd",customValueContent:A,value:C,lang:_}):eO.createElement(Qn,{as:"dd",value:C,lang:_}))},sU=o9("dl",{}),or=h=>{let{as:g,customValueContent:E,metadata:_}=h;if(!Array.isArray(_))return eO.createElement(eO.Fragment,null);let A=viewer_Ue(h,"customValueDelimiter"),b=viewer_z(h,["as","customValueContent","customValueDelimiter","metadata"]);return eO.createElement(viewer_fe,{..."string"==typeof A?{initialState:{delimiter:A}}:void 0},_.length>0&&eO.createElement(sU,{as:g,...b},_.map((h,g)=>{let _=E?function(h,g){let E=g.filter(g=>{let{matchingLabel:E}=g,_=Object.keys(g.matchingLabel)[0],A=viewer_T(E,_);if(viewer_T(h,_)===A)return!0}).map(h=>h.Content);if(Array.isArray(E))return E[0]}(h.label,E):void 0;return eO.createElement(viewer_ut,{customValueContent:_,item:h,key:g,lang:null==b?void 0:b.lang})})))};o9("li",{}),o9("ul",{});let sz=o9("li",{}),sG=o9("ul",{}),lr=h=>{let{as:g,rendering:E}=h,_=viewer_z(h,["as","rendering"]);return eO.createElement(sG,{as:g},E&&E.map(h=>{let g=viewer_T(h.label,_.lang);return eO.createElement(sz,{key:h.id},eO.createElement("a",{href:h.id,..._,target:"_blank"},g||h.id))}))},s$=o9("dl",{}),cr=h=>{let{as:g,requiredStatement:E}=h;if(!E)return eO.createElement(eO.Fragment,null);let _=viewer_Ue(h,"customValueDelimiter"),A=viewer_z(h,["as","customValueDelimiter","requiredStatement"]);return eO.createElement(viewer_fe,{..."string"==typeof _?{initialState:{delimiter:_}}:void 0},eO.createElement(s$,{as:g,...A},eO.createElement(viewer_ut,{item:E,lang:A.lang})))},sj=o9("li",{}),sV=o9("ul",{}),ur=h=>{let{as:g,seeAlso:E}=h,_=viewer_z(h,["as","seeAlso"]);return eO.createElement(sV,{as:g},E&&E.map(h=>{let g=viewer_T(h.label,_.lang);return eO.createElement(sj,{key:h.id},eO.createElement("a",{href:h.id,..._},g||h.id))}))},viewer_pr=h=>{let{as:g,summary:E}=h,_=viewer_z(h,["as","customValueDelimiter","summary"]);return eO.createElement(viewer_mt,{as:g,markup:E,..._})},viewer_pt=h=>{let{thumbnail:g,region:E}=h,_=viewer_z(h,["thumbnail"]);return eO.createElement(eO.Fragment,null,g&&g.map(h=>eO.createElement(qn,{contentResource:h,key:h.id,region:E,..._})))},fr=({homepage:h})=>(null==h?void 0:h.length)===0?eO.createElement(eO.Fragment,null):eO.createElement(eO.Fragment,null,eO.createElement("span",{className:"manifest-property-title"},"Homepage"),eO.createElement(Xn,{homepage:h})),hr=({id:h,htmlLabel:g,parent:E="manifest"})=>eO.createElement(eO.Fragment,null,eO.createElement("span",{className:"manifest-property-title"},g),eO.createElement("a",{href:h,target:"_blank",id:`iiif-${E}-id`},h)),gr=({metadata:h,parent:g="manifest"})=>h?eO.createElement(eO.Fragment,null,eO.createElement(or,{metadata:h,id:`iiif-${g}-metadata`})):eO.createElement(eO.Fragment,null),viewer_vr=({rendering:h})=>(null==h?void 0:h.length)===0?eO.createElement(eO.Fragment,null):eO.createElement(eO.Fragment,null,eO.createElement("span",{className:"manifest-property-title"},"Alternate formats"),eO.createElement(lr,{rendering:h})),yr=({requiredStatement:h,parent:g="manifest"})=>h?eO.createElement(eO.Fragment,null,eO.createElement(cr,{requiredStatement:h,id:`iiif-${g}-required-statement`})):eO.createElement(eO.Fragment,null),xr=({rights:h})=>h?eO.createElement(eO.Fragment,null,eO.createElement("span",{className:"manifest-property-title"},"Rights"),eO.createElement("a",{href:h,target:"_blank"},h)):eO.createElement(eO.Fragment,null),br=({seeAlso:h})=>(null==h?void 0:h.length)===0?eO.createElement(eO.Fragment,null):eO.createElement(eO.Fragment,null,eO.createElement("span",{className:"manifest-property-title"},"See Also"),eO.createElement(ur,{seeAlso:h})),wr=({summary:h,parent:g="manifest"})=>h?eO.createElement(eO.Fragment,null,eO.createElement(viewer_pr,{summary:h,as:"p",id:`iiif-${g}-summary`})):eO.createElement(eO.Fragment,null),Er=({label:h,thumbnail:g})=>(null==g?void 0:g.length)===0?eO.createElement(eO.Fragment,null):eO.createElement(eO.Fragment,null,eO.createElement(viewer_pt,{altAsLabel:h||{none:["resource"]},thumbnail:g,style:{backgroundColor:"#6663",objectFit:"cover"}})),Sr=()=>{let h=viewer_I(),{activeManifest:g,vault:E}=h,[_,A]=(0,eO.useState)(),[b,C]=(0,eO.useState)([]),[k,S]=(0,eO.useState)([]),[N,w]=(0,eO.useState)([]),[R,L]=(0,eO.useState)([]);return(0,eO.useEffect)(()=>{var h,_,b,k;let N=E.get(g);A(N),(null==(h=N.homepage)?void 0:h.length)>0&&C(E.get(N.homepage)),(null==(_=N.seeAlso)?void 0:_.length)>0&&S(E.get(N.seeAlso)),(null==(b=N.rendering)?void 0:b.length)>0&&w(E.get(N.rendering)),(null==(k=N.thumbnail)?void 0:k.length)>0&&L(E.get(N.thumbnail))},[g,E]),_?eO.createElement(sR,null,eO.createElement(sO,null,eO.createElement(Er,{thumbnail:R,label:_.label}),eO.createElement(wr,{summary:_.summary}),eO.createElement(gr,{metadata:_.metadata}),eO.createElement(yr,{requiredStatement:_.requiredStatement}),eO.createElement(xr,{rights:_.rights}),eO.createElement(fr,{homepage:b}),eO.createElement(br,{seeAlso:k}),eO.createElement(viewer_vr,{rendering:N}),eO.createElement(hr,{id:_.id,htmlLabel:"IIIF Manifest"}))):eO.createElement(eO.Fragment,null)},kr=({activeCanvas:h,annotationResources:g})=>{let E=viewer_F(),_=viewer_I(),{isAutoScrolling:A,configOptions:{informationPanel:b},isUserScrolling:C}=_,[k,S]=(0,eO.useState)(),N=null==b?void 0:b.renderAbout,w=null==b?void 0:b.renderAnnotation;return(0,eO.useEffect)(()=>{N?S("manifest-about"):g&&(null==g?void 0:g.length)>0&&!N&&S(g[0].id)},[h,N,g]),eO.createElement(sf,{"data-testid":"information-panel",defaultValue:k,onValueChange:h=>{S(h)},orientation:"horizontal",value:k,className:"clover-viewer-information-panel"},eO.createElement(sm,{"aria-label":"select chapter","data-testid":"information-panel-list"},N&&eO.createElement(sg,{value:"manifest-about"},"About"),w&&g&&g.map((h,g)=>eO.createElement(sg,{key:g,value:h.id},eO.createElement(viewer_,{label:h.label})))),eO.createElement(sT,{handleScroll:function(){if(!A){clearTimeout(C);let h=setTimeout(()=>{E({type:"updateUserScrolling",isUserScrolling:void 0})},1500);E({type:"updateUserScrolling",isUserScrolling:h})}}},N&&eO.createElement(sE,{value:"manifest-about"},eO.createElement(Sr,null)),w&&g&&g.map(h=>eO.createElement(sE,{key:h.id,value:h.id},eO.createElement(_n,{annotationPage:h})))))},sq=o9("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),sW=o9("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),sY=o9("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),sQ=o9("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),sX=o9("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${sq}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}}),viewer_Tr=(h,g)=>{(0,eO.useEffect)(()=>{function r(E){E.key===h&&g()}return window.addEventListener("keyup",r),()=>window.removeEventListener("keyup",r)},[])},Mr=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Arrow Back"),eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),Rr=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Arrow Forward"),eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),zr=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Close"),eO.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Lr=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},eO.createElement("title",null,"Search"),eO.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),Fr=({handleCanvasToggle:h,handleFilter:g,activeIndex:E,canvasLength:_})=>{let[A,b]=(0,eO.useState)(!1),[C,k]=(0,eO.useState)(!1),[S,N]=(0,eO.useState)(!1);return(0,eO.useEffect)(()=>{N(0===E),E===_-1?k(!0):k(!1)},[E,_]),viewer_Tr("Escape",()=>{b(!1),g("")}),eO.createElement(sX,{isToggle:A},eO.createElement(sq,null,A&&eO.createElement(sW,{autoFocus:!0,onChange:h=>g(h.target.value),placeholder:"Search"}),!A&&eO.createElement(sQ,null,eO.createElement(sY,{onClick:()=>h(-1),disabled:S,type:"button"},eO.createElement(Mr,null)),eO.createElement("span",null,E+1," of ",_),eO.createElement(sY,{onClick:()=>h(1),disabled:C,type:"button"},eO.createElement(Rr,null))),eO.createElement(sY,{onClick:()=>{b(h=>!h),g("")},type:"button"},A?eO.createElement(zr,null):eO.createElement(Lr,null))))},sK=o9(od.fC,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),sZ=o9("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),viewer_$=h=>eO.createElement(sZ,{...h,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},h.children);viewer_$.Title=({children:h})=>eO.createElement("title",null,h),viewer_$.Add=()=>eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),viewer_$.Audio=()=>eO.createElement(eO.Fragment,null,eO.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),eO.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),eO.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),viewer_$.Close=()=>eO.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),viewer_$.Download=()=>eO.createElement(eO.Fragment,null,eO.createElement("path",{d:"M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 272l80 80 80-80M256 48v288"})),viewer_$.Image=()=>eO.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),viewer_$.Video=()=>eO.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"});let sJ=se({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),s0=se({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),s1=o9(oJ.Eh,{fill:"$secondaryAlt"}),s2=o9(oJ.x8,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),s3=o9(oJ.VY,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:s0},'&[data-side="bottom"]':{animationName:sJ},'&[data-align="end"]':{[`& ${s1}`]:{margin:"0 0.7rem"}}}),s4=o9(oJ.xz,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),s5=o9(oJ.fC,{boxSizing:"content-box"}),viewer_V=({children:h})=>eO.createElement(s5,null,h);viewer_V.Trigger=h=>eO.createElement(s4,{...h},h.children),viewer_V.Content=h=>eO.createElement(s3,{...h},eO.createElement(s1,null),eO.createElement(s2,null,eO.createElement(viewer_$,{isSmall:!0},eO.createElement(viewer_$.Close,null))),h.children);let s6=o9("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${sZ}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),s8=o9("span",{display:"flex"}),s9=o9("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),s7=o9("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),lt=o9(od.ck,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${s8}`]:{position:"absolute",right:"0",bottom:"0",[`& ${s6}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${s8}`]:{[`& ${s6}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}}),eo=({type:h})=>{switch(h){case"Sound":return eO.createElement(viewer_$.Audio,null);case"Image":default:return eO.createElement(viewer_$.Image,null);case"Video":return eO.createElement(viewer_$.Video,null)}},to=({canvas:h,canvasIndex:g,isActive:E,thumbnail:_,type:A,handleChange:b})=>eO.createElement(lt,{"aria-checked":E,"data-testid":"media-thumbnail","data-canvas":g,onClick:()=>b(h.id),value:h.id},eO.createElement("figure",null,eO.createElement("div",null,(null==_?void 0:_.id)&&eO.createElement("img",{src:_.id,alt:null!=h&&h.label?viewer_U(h.label):""}),eO.createElement(s8,null,eO.createElement(s6,{isIcon:!0,"data-testid":"thumbnail-tag"},eO.createElement(s9,null),eO.createElement(viewer_$,{"aria-label":A},eO.createElement(eo,{type:A})),["Video","Sound"].includes(A)&&eO.createElement(s7,null,viewer_je(h.duration))))),(null==h?void 0:h.label)&&eO.createElement("figcaption",{"data-testid":"fig-caption"},eO.createElement(viewer_,{label:h.label})))),no=h=>h.body?h.body.type:"Image",ro=({items:h})=>{let g=viewer_F(),E=viewer_I(),{activeCanvas:_,vault:A}=E,[b,C]=(0,eO.useState)(""),[k,S]=(0,eO.useState)([]),[N,w]=(0,eO.useState)(0),R=eO.useRef(null),f=h=>{_!==h&&g({type:"updateActiveCanvas",canvasId:h})};return(0,eO.useEffect)(()=>{if(!k.length){let g=["Image","Sound","Video"],E=h.map(h=>viewer_Ye(A,h,"painting",g)).filter(h=>h.annotations.length>0);S(E)}},[h,k.length,A]),(0,eO.useEffect)(()=>{k.forEach((h,g)=>{null!=h&&h.canvas&&h.canvas.id===_&&w(g)})},[_,k]),(0,eO.useEffect)(()=>{let h=document.querySelector(`[data-canvas="${N}"]`);if(h instanceof HTMLElement&&R.current){let g=h.offsetLeft-R.current.offsetWidth/2+h.offsetWidth/2;R.current.scrollTo({left:g,behavior:"smooth"})}},[N]),eO.createElement(eO.Fragment,null,eO.createElement(Fr,{handleFilter:h=>C(h),handleCanvasToggle:h=>{let g=k[N+h];null!=g&&g.canvas&&f(g.canvas.id)},activeIndex:N,canvasLength:k.length}),eO.createElement(sK,{"aria-label":"select item","data-testid":"media",ref:R},k.filter(h=>{var g;if(null!=(g=h.canvas)&&g.label){let g=viewer_U(h.canvas.label);if(Array.isArray(g))return g[0].toLowerCase().includes(b.toLowerCase())}}).map((h,g)=>{var E,b;return eO.createElement(to,{canvas:h.canvas,canvasIndex:g,handleChange:f,isActive:_===(null==(E=null==h?void 0:h.canvas)?void 0:E.id),key:null==(b=null==h?void 0:h.canvas)?void 0:b.id,thumbnail:en(A,h,200,200),type:no(h.annotations[0])})})))},ln=o9("button",{position:"absolute",background:"none",border:"none",cursor:"zoom-in",margin:"0",padding:"0",width:"100%",height:"100%",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}}),li=o9("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",backgroundColor:"$primary",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&[data-button=rotate-right]":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=rotate-left]":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&[data-button=reset]":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),la=o9(li,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),lo=o9("div",{position:"relative",display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",gap:"1rem",zIndex:"0",overflow:"hidden","&:hover":{[`${la}`]:{backgroundColor:"$accent"},[`${ln}`]:{backgroundColor:"#6662"}}}),ls=o9("div",{width:"100%",height:"100%"}),ll=o9("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),lc=o9(o0.xz,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",cursor:"pointer",transition:"$all",border:"1px solid #6663",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem",width:"100%","@sm":{fontSize:"1rem"}}),lu=o9(o0.VY,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),ld=o9(o0.ck,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),lp=o9(o0.__,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),lh=o9(o0.fC,{position:"relative",zIndex:"5",width:"100%"}),viewer_re=({direction:h,title:g})=>eO.createElement(ll,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",null,g),"up"===h&&eO.createElement(()=>eO.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),null),"down"===h&&eO.createElement(()=>eO.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"}),null)),viewer_wt=({children:h,label:g,maxHeight:E,onValueChange:_,value:A})=>eO.createElement(lh,{onValueChange:_,value:A},eO.createElement(lc,{"data-testid":"select-button"},eO.createElement(o0.ki,{"data-testid":"select-button-value"}),eO.createElement(o0.GV,null,eO.createElement(viewer_re,{direction:"down",title:"select"}))),eO.createElement(o0.ue,null,eO.createElement(lu,{css:{maxHeight:`${E} !important`},"data-testid":"select-content"},eO.createElement(o0.Pn,null,eO.createElement(viewer_re,{direction:"up",title:"scroll up for more"})),eO.createElement(o0.Q_,null,eO.createElement(o0.DI,null,g&&eO.createElement(lp,null,eO.createElement(viewer_,{"data-testid":"select-label",label:g})),h)),eO.createElement(o0.Jk,null,eO.createElement(viewer_re,{direction:"down",title:"scroll down for more"}))))),Et=h=>eO.createElement(ld,{...h},h.thumbnail&&eO.createElement(viewer_pt,{thumbnail:h.thumbnail}),eO.createElement(o0.S_,null,eO.createElement(viewer_,{label:h.label})),eO.createElement(o0.o6,null)),lf=o9("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),lm=o9("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),lg=o9("div",{width:"100%",height:"100%",maxHeight:"100vh",background:"transparent",backgroundSize:"contain",color:"white",position:"relative",zIndex:"0",overflow:"hidden",variants:{hasNavigator:{true:{[`${lf}`]:{display:"block"}},false:{[`${lf}`]:{display:"none"}}}}}),viewer_B=({className:h,id:g,label:E,children:_})=>{let A=E.toLowerCase().replace(/\s/g,"-");return eO.createElement(li,{id:g,className:h,"data-testid":"openseadragon-button","data-button":A},eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${g}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",{id:`${g}-svg-title`},E),_))},lE=o9("div",{position:"absolute",zIndex:"1",top:"1rem",right:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),ho=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),go=()=>eO.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),vo=()=>eO.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),yo=()=>eO.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),viewer_ze=()=>eO.createElement(eO.Fragment,null,eO.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),eO.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),xo=({_cloverViewerHasPlaceholder:h,config:g})=>eO.createElement(lE,{"data-testid":"clover-iiif-image-openseadragon-controls",hasPlaceholder:h},g.showZoomControl&&eO.createElement(eO.Fragment,null,eO.createElement(viewer_B,{id:g.zoomInButton,label:"zoom in"},eO.createElement(ho,null)),eO.createElement(viewer_B,{id:g.zoomOutButton,label:"zoom out"},eO.createElement(go,null))),g.showFullPageControl&&eO.createElement(viewer_B,{id:g.fullPageButton,label:"full page"},eO.createElement(vo,null)),g.showRotationControl&&eO.createElement(eO.Fragment,null,eO.createElement(viewer_B,{id:g.rotateRightButton,label:"rotate right"},eO.createElement(viewer_ze,null)),eO.createElement(viewer_B,{id:g.rotateLeftButton,label:"rotate left"},eO.createElement(viewer_ze,null))),g.showHomeControl&&eO.createElement(viewer_B,{id:g.homeButton,label:"reset"},eO.createElement(yo,null))),bo=({ariaLabel:h,config:g,uri:E,_cloverViewerHasPlaceholder:_,imageType:A,openSeadragonCallback:b})=>{let[C,k]=(0,eO.useState)(),[S,N]=(0,eO.useState)(),w=(0,eO.useRef)(!1);return(0,eO.useEffect)(()=>(w.current||(w.current=!0,S||N(eS(g))),()=>null==S?void 0:S.destroy()),[]),(0,eO.useEffect)(()=>{S&&b&&b(S)},[S,b]),(0,eO.useEffect)(()=>{S&&E!==C&&(null==S||S.forceRedraw(),k(E))},[S,C,E]),(0,eO.useEffect)(()=>{if(C&&S)switch(A){case"simpleImage":null==S||S.addSimpleImage({url:C});break;case"tiledImage":Cn(C).then(h=>{try{if(!h)throw Error(`No tile source found for ${C}`);null==S||S.addTiledImage({tileSource:h})}catch(h){console.error(h)}});break;default:null==S||S.close(),console.warn(`Unable to render ${C} in OpenSeadragon as type: "${A}"`)}},[A,C]),eO.createElement(lg,{className:"clover-iiif-image-openseadragon","data-testid":"clover-iiif-image-openseadragon","data-openseadragon-instance":g.id,hasNavigator:g.showNavigator},eO.createElement(xo,{_cloverViewerHasPlaceholder:_,config:g}),g.showNavigator&&eO.createElement(lf,{id:g.navigatorId,"data-testid":"clover-iiif-image-openseadragon-navigator"}),eO.createElement(lm,{id:g.id,"data-testid":"clover-iiif-image-openseadragon-viewport",role:"img",...h&&{"aria-label":h}}))},Eo=({_cloverViewerHasPlaceholder:h=!1,body:g,instanceId:E,isTiledImage:_=!1,label:A,src:b="",openSeadragonCallback:C,openSeadragonConfig:k={}})=>{let S=E||esm_browser_v4(),N="string"==typeof A?A:viewer_T(A),w={id:`openseadragon-${S}`,navigatorId:`openseadragon-navigator-${S}`,loadTilesWithAjax:!0,fullPageButton:`fullPage-${S}`,homeButton:`reset-${S}`,rotateLeftButton:`rotateLeft-${S}`,rotateRightButton:`rotateRight-${S}`,zoomInButton:`zoomIn-${S}`,zoomOutButton:`zoomOut-${S}`,showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!1},...k},{imageType:R,uri:L}=g?On(g):Pn(b,_);return L?eO.createElement(eN.SV,{FallbackComponent:viewer_Je},eO.createElement(bo,{_cloverViewerHasPlaceholder:h,ariaLabel:N,config:w,imageType:R,key:S,uri:L,openSeadragonCallback:C})):null},So=({isMedia:h,label:g,placeholderCanvas:E,setIsInteractive:_})=>{let{vault:A}=viewer_I(),b=viewer_q(A,E),C=b?b[0]:void 0,k=g?viewer_U(g):["placeholder image"];return eO.createElement(ln,{onClick:()=>_(!0),isMedia:h,className:"clover-viewer-placeholder"},eO.createElement("img",{src:(null==C?void 0:C.id)||"",alt:k.join(),height:null==C?void 0:C.height,width:null==C?void 0:C.width}))},lT=o9("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),l_=eO.forwardRef((h,g)=>{let E=eO.useRef(null),_=(0,eO.useCallback)(()=>{var h,_;if(null!=(h=g.current)&&h.currentTime&&(null==(_=g.current)?void 0:_.currentTime)>0)return;let A=g.current;if(!A)return;let b=new AudioContext,C=b.createMediaElementSource(A),k=b.createAnalyser(),S=E.current;if(!S)return;S.width=A.offsetWidth,S.height=A.offsetHeight;let N=S.getContext("2d");C.connect(k),k.connect(b.destination),k.fftSize=256;let w=k.frequencyBinCount,R=new Uint8Array(w);setInterval(function(){!function(h,g,E,_,A,b){let C=A/E*2.6,k,S=0;h.getByteFrequencyData(_),g.fillStyle="#000000",g.fillRect(0,0,A,b);for(let h=0;h<E;h++)k=2*_[h],g.fillStyle="rgba(78, 42, 132, 1)",g.fillRect(S,b-k,C,k),S+=C+6}(k,N,w,R,S.width,S.height)},20)},[g]);return eO.useEffect(()=>{g&&g.current&&(g.current.onplay=_)},[_,g]),eO.createElement(lT,{ref:E,role:"presentation"})}),lA=o9("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",height:"100%",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),$o=({resource:h,ignoreCaptionLabels:g})=>{let E=viewer_U(h.label,"en");return Array.isArray(E)&&E.some(h=>g.includes(h))?null:eO.createElement("track",{key:h.id,src:h.id,label:Array.isArray(E)?E[0]:E,srcLang:"en","data-testid":"player-track"})},ly=["application/vnd.apple.mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"],To=({allSources:h,annotationResources:g,painting:E})=>{let[_,A]=eO.useState(0),[b,C]=eO.useState(),k=eO.useRef(null),S=(null==E?void 0:E.type)==="Sound",N=viewer_I(),{activeCanvas:w,configOptions:R,vault:L}=N;return(0,eO.useEffect)(()=>{if(!E.id||!k.current)return;if(null!=k&&k.current){let h=k.current;h.src=E.id,h.load()}if("m3u8"!==E.id.split(".").pop()&&E.format&&!ly.includes(E.format))return;let h=new nm.ZP({xhrSetup:function(h,g){h.withCredentials=!!R.withCredentials}});return h.attachMedia(k.current),h.on(nm.ZP.Events.MEDIA_ATTACHED,function(){h.loadSource(E.id)}),h.on(nm.ZP.Events.ERROR,function(g,E){if(E.fatal)switch(E.type){case nm.ZP.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${g} network error encountered, try to recover`),h.startLoad();break;case nm.ZP.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${g} media error encountered, try to recover`),h.recoverMediaError();break;default:h.destroy()}}),()=>{if(h&&k.current){let g=k.current;h.detachMedia(),h.destroy(),g.currentTime=0}}},[R.withCredentials,E.id]),(0,eO.useEffect)(()=>{var h,g,E,A;let b=L.get(w),k=null!=(h=b.accompanyingCanvas)&&h.id?viewer_q(L,null==(g=b.accompanyingCanvas)?void 0:g.id):null,S=null!=(E=b.placeholderCanvas)&&E.id?viewer_q(L,null==(A=b.placeholderCanvas)?void 0:A.id):null;k&&S?C(0===_?S[0].id:k[0].id):(k&&C(k[0].id),S&&C(S[0].id))},[w,_,L]),(0,eO.useEffect)(()=>{if(null!=k&&k.current){let h=k.current;return null==h||h.addEventListener("timeupdate",()=>A(h.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[]),eO.createElement(lA,{css:{backgroundColor:R.canvasBackgroundColor,maxHeight:R.canvasHeight,position:"relative"},"data-testid":"player-wrapper",className:"clover-viewer-player-wrapper"},eO.createElement("video",{id:"clover-iiif-video",key:E.id,ref:k,controls:!0,height:E.height,width:E.width,crossOrigin:"anonymous",poster:b,style:{maxHeight:R.canvasHeight,position:"relative",zIndex:"1"}},h.map(h=>eO.createElement("source",{src:h.id,type:h.format,key:h.id})),(null==g?void 0:g.length)>0&&g.map(h=>{let g=[];return h.items.forEach(h=>{L.get(h.id).body.forEach(h=>{let E=L.get(h.id);g.push(E)})}),g.map(h=>eO.createElement($o,{resource:h,ignoreCaptionLabels:R.ignoreCaptionLabels||[],key:h.id}))}),"Sorry, your browser doesn't support embedded videos."),S&&eO.createElement(l_,{ref:k}))},Mo=()=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",{id:"close-svg-title"},"close"),eO.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Ro=({isMedia:h})=>eO.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},eO.createElement("title",{id:"open-svg-title"},"open"),h?eO.createElement("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):eO.createElement(eO.Fragment,null,eO.createElement("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),eO.createElement("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"}))),zo=({handleToggle:h,isInteractive:g,isMedia:E})=>eO.createElement(la,{onClick:h,isInteractive:g,isMedia:E,"data-testid":"placeholder-toggle"},g?eO.createElement(Mo,null):eO.createElement(Ro,{isMedia:E})),Lo=({activeCanvas:h,annotationResources:g,isMedia:E,painting:_})=>{var A,b,C,k,S,N;let[w,R]=eO.useState(0),[L,P]=eO.useState(!1),{configOptions:z,customDisplays:G,openSeadragonViewer:$,vault:j,viewerId:W}=viewer_I(),Q=viewer_F(),Z=j.get(h),et=null==(A=null==Z?void 0:Z.placeholderCanvas)?void 0:A.id,er=!!et,ei=(null==_?void 0:_.length)>1,es=et&&!L&&!E,el=`${W}-${Ut(h+w)}`,ec=G.find(g=>{var E;let A=!1,{canvasId:b,paintingFormat:C}=g.target;if(Array.isArray(b)&&b.length>0&&(A=b.includes(h)),Array.isArray(C)&&C.length>0){let h=(null==(E=_[w])?void 0:E.format)||"";A=!!(h&&C.includes(h))}return A}),eu=[];null==(C=null==(b=g[0])?void 0:b.items)||C.forEach(h=>{let g=j.get(h.id);eu.push(g)}),(0,eO.useEffect)(()=>{var h;eu&&$&&null!=(h=z.annotationOverlays)&&h.renderOverlays&&function(h,g,E,_){if(!h)return;let A=1/g.width;_.forEach(g=>{if(!g.target)return;let _=viewer_lt(g.target),{point:b,rect:C,svg:k}=_;if(C){let{x:g,y:_,w:b,h:k}=C;(function(h,g,E,_,A,b){let C=new eS.Rect(g,E,_,A),k=document.createElement("div");if(b.annotationOverlays){let{backgroundColor:h,opacity:g,borderType:E,borderColor:_,borderWidth:A}=b.annotationOverlays;k.style.backgroundColor=h,k.style.opacity=g,k.style.border=`${E} ${A} ${_}`,k.className="annotation-overlay"}h.addOverlay(k,C)})(h,g*A,_*A,b*A,k*A,E)}if(b){let{x:g,y:_}=b,C=`
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg">
          <circle cx="${g}" cy="${_}" r="20" />
        </svg>
      `;viewer_Te(h,C,E,A)}k&&viewer_Te(h,k,E,A)})}($,Z,z,eu)},[null==Z?void 0:Z.id,eu,$,null==(k=z.annotationOverlays)?void 0:k.renderOverlays]);let ed=null==(S=null==ec?void 0:ec.display)?void 0:S.component;return eO.createElement(lo,{className:"clover-viewer-painting"},eO.createElement(ls,{style:{backgroundColor:z.canvasBackgroundColor,height:"auto"===z.canvasHeight?"100%":z.canvasHeight}},et&&!E&&eO.createElement(zo,{handleToggle:()=>P(!L),isInteractive:L,isMedia:E}),es&&!E&&eO.createElement(So,{isMedia:E,label:null==Z?void 0:Z.label,placeholderCanvas:et,setIsInteractive:P}),!es&&!ec&&(E?eO.createElement(To,{allSources:_,painting:_[w],annotationResources:g}):_&&eO.createElement(Eo,{_cloverViewerHasPlaceholder:er,body:_[w],instanceId:el,key:el,openSeadragonCallback:h=>{h&&(null==$?void 0:$.id)!==`openseadragon-${el}`&&Q({type:"updateOpenSeadragonViewer",openSeadragonViewer:h})},openSeadragonConfig:z.openSeadragon})),!es&&ed&&eO.createElement(ed,{id:h,annotationBody:_[w],...null==ec?void 0:ec.display.componentProps})),ei&&eO.createElement(viewer_wt,{value:null==(N=_[w])?void 0:N.id,onValueChange:h=>{let g=_.findIndex(g=>g.id===h);R(g)},maxHeight:"200px"},null==_?void 0:_.map(h=>eO.createElement(Et,{value:null==h?void 0:h.id,key:null==h?void 0:h.id,label:null==h?void 0:h.label}))))},Fo=({activeCanvas:h,annotationResources:g,isAudioVideo:E,items:_,painting:A})=>{let{isInformationOpen:b,configOptions:C}=viewer_I(),{informationPanel:k}=C,S=(null==k?void 0:k.renderAbout)&&b,N=(null==k?void 0:k.renderAnnotation)&&g.length>0&&!k.open;return eO.createElement(sl,{className:"clover-viewer-content","data-testid":"clover-viewer-content"},eO.createElement(sc,null,eO.createElement(Lo,{activeCanvas:h,annotationResources:g,isMedia:E,painting:A}),S&&eO.createElement(su,null,eO.createElement("span",null,b?"View Items":"More Information")),_.length>1&&eO.createElement(ss,{className:"clover-viewer-media-wrapper"},eO.createElement(ro,{items:_,activeItem:0}))),(S||N)&&eO.createElement(sp,null,eO.createElement(sd,null,eO.createElement(kr,{activeCanvas:h,annotationResources:g}))))},lv=o9(viewer_V.Trigger,{width:"30px",padding:"5px"}),lb=o9(viewer_V.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),lx=o9("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),lC=o9("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${lh}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),lI=o9("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"}),Bo=()=>{var h;let g=viewer_F(),E=viewer_I(),{activeManifest:_,collection:A,configOptions:b,vault:C}=E,k=null==b?void 0:b.canvasHeight;return eO.createElement("div",{style:{margin:"0.75rem"}},eO.createElement(viewer_wt,{label:A.label,maxHeight:k,value:_,onValueChange:h=>{g({type:"updateActiveManifest",manifestId:h}),g({type:"updateViewerId",viewerId:esm_browser_v4()})}},null==(h=null==A?void 0:A.items)?void 0:h.map(h=>eO.createElement(Et,{value:h.id,key:h.id,thumbnail:null!=h&&h.thumbnail?C.get(null==h?void 0:h.thumbnail):void 0,label:h.label}))))},_o=(h,g=2500)=>{let[E,_]=(0,eO.useState)(),A=(0,eO.useCallback)(()=>{navigator.clipboard.writeText(h).then(()=>_("copied"),()=>_("failed"))},[h]);return(0,eO.useEffect)(()=>{if(!E)return;let h=setTimeout(()=>_(void 0),g);return()=>clearTimeout(h)},[E]),[E,A]},lk=o9("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),No=({status:h})=>h?eO.createElement(lk,{"data-copy-status":h},h):null,viewer_Le=({textPrompt:h,textToCopy:g})=>{let[E,_]=_o(g);return eO.createElement("button",{onClick:_},h," ",eO.createElement(No,{status:E}))},Wo=()=>{let h="#ed1d33",g="#2873ab";return eO.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},eO.createElement("title",null,"IIIF Manifest Options"),eO.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},eO.createElement("g",{transform:"scale(0.1)"},eO.createElement("path",{style:{fill:g},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),eO.createElement("path",{style:{fill:g},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),eO.createElement("path",{style:{fill:h},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),eO.createElement("path",{style:{fill:h},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),eO.createElement("path",{style:{fill:g},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),eO.createElement("path",{style:{fill:g},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),eO.createElement("path",{style:{fill:h},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},lS=o9(o1.fC,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),lN=o9(o1.bU,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),lw=o9("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),lO=o9("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"}),Zo=()=>{var h;let{configOptions:g}=viewer_I(),E=viewer_F(),[_,A]=(0,eO.useState)(null==(h=null==g?void 0:g.informationPanel)?void 0:h.open);return(0,eO.useEffect)(()=>{E({type:"updateInformationOpen",isInformationOpen:_})},[_,E]),eO.createElement(lO,null,eO.createElement(lw,{htmlFor:"information-toggle",css:_?{opacity:"1"}:{}},"More Information"),eO.createElement(lS,{checked:_,onCheckedChange:()=>A(!_),id:"information-toggle","aria-label":"information panel toggle",name:"toggled?"},eO.createElement(lN,null)))},lR=o9(viewer_V.Trigger,{width:"30px",padding:"5px"}),lD=o9(lb,{h3:{color:"$primaryAlt",fontSize:"$2",fontWeight:"700",margin:"$2 0"},button:{},"& ul li":{marginBottom:"$1"}});function viewer_Fe(h,g){let E=[];if(!h)return E;for(let _ of h)if(_.id){let h=g.get(_.id);h&&E.push(h)}return E}function viewer_He(h,g){return h.map(({format:h,id:E,label:_})=>{let A=function(h){let{vault:g}=viewer_I();try{let E=h&&g.get(h);if(!E)throw Error(`Vault entity ${h} not found.`);return(null==E?void 0:E["@id"])||(null==E?void 0:E.id)}catch(g){return console.error(g),h}}(E);return{format:h,id:A,label:viewer_T(_)||g}})}let ea=()=>{let{allPages:h,individualPages:g}=function(){let h=function(){let{activeCanvas:h,activeManifest:g,vault:E}=viewer_I(),[_,A]=(0,eO.useState)({root:[],canvas:[]});return(0,eO.useEffect)(()=>{let _=E.get(g),b=E.get(h),C=null==_?void 0:_.rendering,k=null==b?void 0:b.rendering,S=viewer_Fe(C,E),N=viewer_Fe(k,E);A({root:S,canvas:N})},[h,g,E]),{..._}}(),g=viewer_He((null==h?void 0:h.root)||[],"Root Rendering Label"),E=viewer_He((null==h?void 0:h.canvas)||[],"Canvas Rendering Label");return{allPages:g,individualPages:E}}(),E=h.length>0||g.length>0,a=h=>{window.open(h,"_blank")};return E?eO.createElement(viewer_V,null,eO.createElement(lR,{"data-testid":"download-button"},eO.createElement(viewer_$,null,eO.createElement(viewer_$.Download,null))),eO.createElement(lD,{"data-testid":"download-content"},g.length>0&&eO.createElement(eO.Fragment,null,eO.createElement("h3",null,"Individual Pages"),eO.createElement("ul",null,g.map(({format:h,id:g,label:E})=>eO.createElement("li",{key:E},eO.createElement("button",{onClick:()=>a(g)},E," (",h,")"))))),h.length>0&&eO.createElement(eO.Fragment,null,eO.createElement("h3",null,"All Pages"),eO.createElement("ul",null,h.map(({format:h,id:g,label:E})=>eO.createElement("li",{key:E},eO.createElement("button",{onClick:()=>a(g)},E," (",h,")"))))))):null},Ct=h=>{let n=()=>!!window.matchMedia&&window.matchMedia(h).matches,[g,E]=(0,eO.useState)(n);return(0,eO.useEffect)(()=>{let o=()=>E(n);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)}),g},ta=({manifestId:h,manifestLabel:g})=>{let E=viewer_I(),{collection:_,configOptions:A}=E,{informationPanel:b,showDownload:C,showIIIFBadge:k,showTitle:S}=A,N=C||k||(null==b?void 0:b.renderToggle),w=Ct(o8.sm);return eO.createElement(lC,{className:"clover-viewer-header"},null!=_&&_.items?eO.createElement(Bo,null):eO.createElement(lx,{className:S?"":"visually-hidden"},S&&eO.createElement(viewer_,{label:g,className:"label"})),N&&eO.createElement(lI,null,C&&eO.createElement(ea,null),k&&eO.createElement(viewer_V,null,eO.createElement(lv,null,eO.createElement(Wo,null)),eO.createElement(lb,null,(null==_?void 0:_.items)&&eO.createElement("button",{onClick:h=>{h.preventDefault(),window.open(_.id,"_blank")}},"View Collection"),eO.createElement("button",{onClick:g=>{g.preventDefault(),window.open(h,"_blank")}},"View Manifest")," ",(null==_?void 0:_.items)&&eO.createElement(viewer_Le,{textPrompt:"Copy Collection URL",textToCopy:_.id}),eO.createElement(viewer_Le,{textPrompt:"Copy Manifest URL",textToCopy:h}))),(null==b?void 0:b.renderToggle)&&!w&&eO.createElement(Zo,null)))},na=(h=!1)=>{let[g,E]=(0,eO.useState)(h);return(0,eO.useLayoutEffect)(()=>{if(!g)return;let h=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=h}},[g]),(0,eO.useEffect)(()=>{g!==h&&E(h)},[h]),[g,E]},ra=({manifest:h,theme:g})=>{var E;let _=viewer_I(),A=viewer_F(),{activeCanvas:b,isInformationOpen:C,vault:k,configOptions:S}=_,N=(null==S?void 0:S.canvasHeight)&&["100%","auto"].includes(null==S?void 0:S.canvasHeight),[w,R]=(0,eO.useState)(!1),[L,P]=(0,eO.useState)(!1),[z,G]=(0,eO.useState)([]),[$,j]=(0,eO.useState)([]),[W,Q]=na(!1),Z=Ct(o8.sm),et=(0,eO.useCallback)(h=>{A({type:"updateInformationOpen",isInformationOpen:h})},[A]);return(0,eO.useEffect)(()=>{var h;null!=(h=null==S?void 0:S.informationPanel)&&h.open&&et(!Z)},[Z,null==(E=null==S?void 0:S.informationPanel)?void 0:E.open,et]),(0,eO.useEffect)(()=>{if(!Z){Q(!1);return}Q(C)},[C,Z,Q]),(0,eO.useEffect)(()=>{let h=viewer_q(k,b);h&&(P(["Sound","Video"].indexOf(h[0].type)>-1),G(h));let g=Qt(k,b);g.length>0&&A({type:"updateInformationOpen",isInformationOpen:!0}),j(g),R(0!==g.length)},[b,k,A]),eO.createElement(eN.SV,{FallbackComponent:viewer_Je},eO.createElement(sh,{className:`${g} clover-viewer`,css:{background:null==S?void 0:S.background},"data-body-locked":W,"data-absolute-position":N,"data-information-panel":w,"data-information-panel-open":C},eO.createElement(oc.fC,{open:C,onOpenChange:et},eO.createElement(ta,{manifestLabel:h.label,manifestId:h.id}),eO.createElement(Fo,{activeCanvas:b,painting:z,annotationResources:$,items:h.items,isAudioVideo:L}))))},lL={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function viewer_Pe(h,g=null){return{ok:!1,status:h.status,statusText:h.statusText,headers:h.getAllResponseHeaders(),data:g||h.statusText,json:()=>JSON.parse(g||h.statusText)}}let ba=({canvasIdCallback:h=()=>{},customDisplays:g=[],customTheme:E,iiifContent:_,id:A,manifestId:b,options:C})=>{var k,S,N;let w=_;A&&(w=A),b&&(w=b);let R=viewer_qe(null==(S=null==(k=null==C?void 0:C.informationPanel)?void 0:k.vtt)?void 0:S.autoScroll);return eO.createElement(Kt,{initialState:{...o4,customDisplays:g,isAutoScrollEnabled:R.enabled,isInformationOpen:!!(null!=(N=null==C?void 0:C.informationPanel)&&N.open),vault:new Vault({customFetcher:h=>(function(h,g=lL){let E=g.headers||lL.headers;return new Promise((_,A)=>{let b=new XMLHttpRequest;b.open("get",h),b.withCredentials=g.withCredentials,E&&Object.keys(E).forEach(h=>b.setRequestHeader(h,E[h])),b.onload=()=>{_({ok:b.status>=200&&b.status<300,status:b.status,statusText:b.statusText,headers:b.getAllResponseHeaders(),data:b.responseText,json:()=>JSON.parse(b.responseText)})},b.onerror=()=>{A(viewer_Pe(b,"Failed to make request."))},b.ontimeout=()=>{A(viewer_Pe(b,"Request took longer than expected."))},b.send()})})(h,{withCredentials:null==C?void 0:C.withCredentials,headers:null==C?void 0:C.requestHeaders}).then(h=>JSON.parse(h.data))})}},eO.createElement(ia,{iiifContent:w,canvasIdCallback:h,customTheme:E,options:C}))},ia=({canvasIdCallback:h,customTheme:g,iiifContent:E,options:_})=>{let A=viewer_F(),b=viewer_I(),{activeCanvas:C,activeManifest:k,isLoaded:S,vault:N}=b,[w,R]=(0,eO.useState)(),[L,P]=(0,eO.useState)(),z={};return g&&(z=(0,ew.jG)("custom",g)),(0,eO.useEffect)(()=>{h&&h(C)},[C,h]),(0,eO.useEffect)(()=>{k&&N.loadManifest(k).then(h=>{P(h),A({type:"updateActiveCanvas",canvasId:$n(E,h)})}).catch(h=>{console.error(`Manifest failed to load: ${h}`)}).finally(()=>{A({type:"updateIsLoaded",isLoaded:!0})})},[E,k,A,N]),(0,eO.useEffect)(()=>{A({type:"updateConfigOptions",configOptions:_});let h=In(E);N.load(h).then(h=>{R(h)}).catch(h=>{console.error(`The IIIF resource ${E} failed to load: ${h}`)})},[A,E,_,N]),(0,eO.useEffect)(()=>{if((null==w?void 0:w.type)==="Collection"){A({type:"updateCollection",collection:w});let h=An(E,w);h&&A({type:"updateActiveManifest",manifestId:h})}else(null==w?void 0:w.type)==="Manifest"&&A({type:"updateActiveManifest",manifestId:w.id})},[A,E,w]),S?L&&L.items?0===L.items.length?(console.log(`The IIIF manifest ${E} does not contain canvases.`),eO.createElement(eO.Fragment,null)):eO.createElement(ra,{manifest:L,theme:z,key:L.id}):(console.log(`The IIIF manifest ${E} failed to load.`),eO.createElement(eO.Fragment,null)):eO.createElement(eO.Fragment,null,"Loading")};var lP=ba}}]);